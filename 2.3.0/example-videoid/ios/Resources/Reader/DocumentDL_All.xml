<?xml version="1.0" encoding="UTF-8"?>
<selphid-widget-conf version="1.0">

    <DocumentID id="NG" iso="NGA">
        <Version id="DL" type="TD1" document_type="DLI">
            <Front>
                <FACE/>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="frn" content="FEDERAL@REPUBLIC@OF@NIGERIA" threshold="0.3"/>
                    <findLineContent dst="ndl" content="NATIONAL@DRIVERS@LICENSE" threshold="0.3"/>
                    <rejectIfNotValid src="frn" reason="DocumentNotExpected"/>
                    <rejectIfNotValid src="ndl" reason="DocumentNotExpected"/>

                    <findLineMatch src="docStr" dst="docNumber"
                        regex="[LU][I/]?[NM][Oo] ?([0-9A-Z]{9,})$"
                        value="($1)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="DoBStr" dst="DoB"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <!-- Assign the full name right after the date of birth -->
                    <assignIfValid dst="fullN" src="DoBStr" offset="1" overwrite="false"/>
                    <splitIfValid2 src="fullN" by=","
                        dst1="ln"
                        dst2="fn"
                        overwrite="false"
                    />
                    <jumpIfNotValid src="fn" dst="no_decomposed_name"/>
                        <assignField src="fn" field="FirstName"/>
                        <assignField src="ln" field="LastName"/>
                        <assignIfValid dst="fullN" src="fn"/>
                        <concatenateIfValid dst="fullN" src="ln" prefix=" " suffix=""/>
                    <label src="no_decomposed_name"/>
                    <assignField src="fullN" field="FullName"/>

                    <findLineContent dst="sexStr" content="SEX@@" threshold="1"/>
                    <matchIfValid src="sexStr" dst="sex"
                        regex="([M|F])"
                        value="($1)"
                    />
                    <assignField src="sex" field="Gender"/>

                    <findLineMatch dst="bt"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />
                    <assignField src="bt" field="BloodType"/>

                    <!-- We block the line of the first date of issue -->
                    <findLineContent dst="firstIssuse" content="DATE@OF@1st@ISS@@@@@@@@@@@" threshold="0.3"/>
                    <!-- We block the line of the N of K -->
                    <findLineContent dst="nofk" content="N@of@K#" threshold="0.3"/>

                    <findLineMatch src="DoIStr" dst="DoI"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineMatch src="DoEStr" dst="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineContent dst="classStr" content="CLASS@@" threshold="2"/>
                    <replaceIfValid dst="class" src="classStr" content="CLASS" replace="" threshold="2"/>
                    <assignField src="class" field="VehicleClass"/>
                
                </ML>
            </Front>
            <Back>

                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <PDF417 optional="yes">
                </PDF417>

                <BARCODE optional="yes">
                </BARCODE>

                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="classStr" content="CLASS@OF@LICENSE@#" threshold="0.3"/>
                    <replaceIfValid dst="class" src="classStr" content="CLASS@OF@LICENSE@" replace="" threshold="0.3"/>
                    <assignField src="class" field="VehicleClass"/>

                    <findLineContent dst="endoStr" content="ENDORSEMENTS@#" threshold="0.3"/>
                    <replaceIfValid dst="endo" src="endoStr" content="ENDORSEMENTS@" replace="" threshold="0.3"/>
                    <assignField src="endo" field="Endorsements"/>

                    <findLineContent dst="mark1" content="INDEX@@BG@Blood@group@@F@MARKS@Facial@marks@@REP@No@@of@replacements" threshold="0.3"/>
                    <findLineContent dst="mark2" content="REN@No@@of@reneweale@@HT@Height@@GL@Glasses@@D@OF@B@Date@of@birth" threshold="0.3"/>
                    <rejectIfNotValid src="mark1" src2="mark2" reason="DocumentNotExpected"/>

                </ML>

            </Back>
        </Version>
    </DocumentID>


    <DocumentID id="BR" iso="BRA">

        <Version id="DLv1" type="TD2" document_type="DLI">
            <Front>
                <FACE/>
                <ML cols="8" split_by="elements" separation="0.04" space_separation="0.20">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="registerNumberLine" dst="registerNumber"
                        regex="^([0-9oOl]{11})$"
                        value="([N]$1)"
                    />
                    <rejectIfNotValid src="registerNumber" reason="DocumentNotExpected"/>
                    <assignField src="registerNumber" field="RegisterNumber"/>

                    <findLineMatch src="cpfLine" dst="cpf"
                        regex="([0-9oOl]{3}) ?(?:,|\.) ?([0-9oOl]{3}) ?(?:,|\.) ?([0-9oOl]{3}) ?- ?([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <rejectIfNotValid src="cpf" reason="DocumentNotExpected"/>
                    <assignField src="cpf" field="CPF"/>
                    <assignField src="cpf" field="DocumentNumber"/>

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8})([0-9a-zA-Z])([0-9a-zA-Z]{3,4}RJ)"
                        value="([N]$1)($2)([U]$3)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="RJ" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>
                    
                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8}).+[sS8][sS8]P.*[sS8]P"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="SP" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>
                    
                    <findLineMatchMultiple src="docNumberStr" overwrite="false"
                        regex="([0-9A-Z]{2})([0-9oOl]{6}).+[sS8]P.+([A-Z]{2})"
                        dst1="docNumber"
                        value1="($1)([N]$2)"
                        dst2="issuerLocal"
                        value2="([U]$3)"
                    />
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>
                    
                    <findLineMatch dst="docNumber"
                        regex="M[G6]([0-9oOl]{6}).+[sS8]P"
                        value="MG([N]$1)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="MG" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>

                    <findLineMatchMultiple src="docNumberStr" overwrite="false"
                        regex="([0-9oOl]{6,}).+[sS8]P.+([A-Z]{2})"
                        dst1="docNumber"
                        value1="([N]$1)"
                        dst2="issuerLocal"
                        value2="([U]$2)"
                    />
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>

                    <findLineMatchMultiple src="docNumberStr" overwrite="false"
                        regex="([A-Z]{2})([0-9oOl]{6})"
                        dst1="issuerLocal"
                        value1="([U]$1)"
                        dst2="docNumber"
                        value2="([U]$1)([N]$2)"
                    />

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8}).+[sS8]P"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="SP" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>

                    <findLineContent dst="dataDocNumber" content="DOC@@IDENTIDADE@@@ORG@@EMISOR@@@UF" threshold="0.3"/>
                    <assignIfValid dst="docNumStr" src="dataDocNumber" offset="1" overwrite="false"/>
                    <matchIfValid src="docNumStr" dst="docNumber"
                        regex="^([0-9oOl]{6,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="docNumStr" dst="docNumber"
                        regex="^([0-9oOl]+) "
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <label src="jumpDocumentIssuer"/>
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="issuerLocal" field="IssuerLocal"/>
                    <replaceIfValid dst="docNumber" content=" " replace=""/>
                    <assignField src="docNumber" field="DocIdentidade"/>

                    <findLineContent dst="dataName" content="NOME" threshold="0.3"/>
                    <findLineContent dst="dataRegisterNumber" content="N@REGISTRO" threshold="0.3"/>
                    <rejectIfNotValid src="dataName" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="dataRegisterNumber" src2="dataDocNumber" reason="DocumentNotExpected"/>

                    <assignIfValid dst="fn" src="dataName" offset="1" overwrite="false"/>
                    <rejectIfNotValid src="fn"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FullName"/>

                    <matchIfValid2 src="registerNumberLine" dst="DoE" dst2="DoI1"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch2 dst="DoE" dst2="DoI1"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoI1"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="DoE" field="DateOfExpiry"/>
                    <assignField src="DoI1" field="DateOfFirstIssue"/>

                    <replaceIfValid dst="cpfLine" content=" " replace=""/>
                    <matchIfValid src="cpfLine" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                </ML>
                <ML-90 cols="2" split_by="elements" separation="0.04" space_separation="0.20">
                    <findLineMatch dst="licenseNumber"
                        regex="^([0-9oOl]{8,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="licenseNumber" reason="DocumentNotExpected"/>
                    <assignField src="licenseNumber" field="LicenseNumber"/>
                </ML-90>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="2" split_by="elements" separation="0.04" space_separation="0.20">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>
                    
                    <findLineContent dst="mark" content="VÁLIDA@EM@TODO@O@TERRITÓRIO@NACIONAL" threshold="0.3"/>
                    <rejectIfValid src="mark" reason="DocumentNotExpected"/>

                    <findLineMatch dst="DoI"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoI"
                        regex="([0-3oOlI][0-9oOl])[ ,:;\-\.\/7]?([0-1oOlI][0-9oOlI])[ ,:;\-\.\/7]?([1-2lI][0-9oOlI]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineContent dst="dataLocal" content="LOCAL" threshold="0.3"/>
                    <findLineMatch dst="dataLocal"
                        regex="([LJ][O0o][CE][A4][LJ])"
                        value="($1)"
                        overwrite="false"
                    />
                    <!-- <rejectIfNotValid src="dataLocal"/> -->

                    <assignIfValid dst="local" src="dataLocal" offset="1" overwrite="false"/>
                    <assignField src="local" field="Local"/>

                    <assignIfValid dst="data1" src="DoI" offset="1"/>
                    <assignIfValid dst="data2" src="DoI" offset="2"/>
                    <assignField src="data1" field="Data1"/>
                    <assignField src="data2" field="Data2"/>
                </ML>
                <ML-90 cols="2" split_by="elements" separation="0.04" space_separation="0.20">
                    <findLineMatch dst="licenseNumber"
                        regex="^([0-9oOl]{8,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="licenseNumber" reason="DocumentNotExpected"/>
                    <assignField src="licenseNumber" field="LicenseNumber"/>
                </ML-90>
            </Back>

        </Version>
        
        <Version id="DLv2" type="TD2" document_type="DLI">
            <Front>
                <FACE/>
                <ML cols="8" split_by="elements" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="registerNumberLine" dst="registerNumber"
                        regex="^([0-9oOl]{11})$"
                        value="([N]$1)"
                    />
                    <rejectIfNotValid src="registerNumber" reason="DocumentNotExpected"/>
                    <assignField src="registerNumber" field="RegisterNumber"/>

                    <findLineMatch src="cpfLine" dst="cpf"
                        regex="([0-9oOl]{3}) ?(?:,|\.) ?([0-9oOl]{3}) ?(?:,|\.) ?([0-9oOl]{3}) ?- ?([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <rejectIfNotValid src="cpf" reason="DocumentNotExpected"/>
                    <assignField src="cpf" field="CPF"/>
                    <assignField src="cpf" field="DocumentNumber"/>

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8})([0-9a-zA-Z])([0-9a-zA-Z]{3,4}RJ)"
                        value="([N]$1)($2)([U]$3)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="RJ" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>
                    
                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8}).+[sS8][sS8]P.*[sS8]P"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="SP" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>
                    
                    <findLineMatchMultiple src="docNumberStr" overwrite="false"
                        regex="([0-9A-Z]{2})([0-9oOl]{6}).+[sS8]P.+([A-Z]{2})"
                        dst1="docNumber"
                        value1="($1)([N]$2)"
                        dst2="issuerLocal"
                        value2="([U]$3)"
                    />
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>
                    
                    <findLineMatch dst="docNumber"
                        regex="M[G6]([0-9oOl]{6}).+[sS8]P"
                        value="MG([N]$1)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="MG" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>

                    <findLineMatchMultiple src="docNumberStr" overwrite="false"
                        regex="([0-9oOl]{6,}).+[sS8]P.+([A-Z]{2})"
                        dst1="docNumber"
                        value1="([N]$1)"
                        dst2="issuerLocal"
                        value2="([U]$2)"
                    />
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>

                    <findLineMatchMultiple src="docNumberStr" overwrite="false"
                        regex="([A-Z]{2})([0-9oOl]{6})"
                        dst1="issuerLocal"
                        value1="([U]$1)"
                        dst2="docNumber"
                        value2="([U]$1)([N]$2)"
                    />

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8}).+[sS8]P"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfContent dst="issuerLocal" src="docNumber" value="SP" op="exists" param="" param_2=""/>
                    <jumpIfValid src="issuerLocal" dst="jumpDocumentIssuer"/>


                    <findLineContent dst="dataDocNumber" content="4c@DOC@@IDENTIDADE@@@ORG@@EMISOR@@@UF" threshold="0.3"/>
                    <assignIfValid dst="docNumStr" src="dataDocNumber" offset="1" overwrite="false"/>
                    <matchIfValid src="docNumStr" dst="docNumber"
                        regex="^([0-9oOl]{6,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="docNumStr" dst="docNumber"
                        regex="^([0-9oOl]+) "
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <label src="jumpDocumentIssuer"/>
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="issuerLocal" field="IssuerLocal"/>
                    <replaceIfValid dst="docNumber" content=" " replace=""/>
                    <assignField src="docNumber" field="DocIdentidade"/>

                    <findLineContent dst="dataName" content="2@e@1@NOME@E@SOBRENOME" threshold="0.3"/>
                    <findLineContent dst="dataRegisterNumber" content="5@N@REGISTRO" threshold="0.3"/>
                    <rejectIfNotValid src="dataName" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="dataRegisterNumber" src2="dataDocNumber" reason="DocumentNotExpected"/>

                    <assignIfValid dst="fn" src="dataName" offset="1" overwrite="false"/>
                    <rejectIfNotValid src="fn"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FullName"/>


                    <findLineContent dst="dataLocal" content="3@DATA@@LOCAL@E@UF@DE@NASCIMENTO" threshold="0.3"/>
                    <assignIfValid dst="DoBStr" src="dataLocal" offset="1" />
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)*([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)*([0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/1([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <matchIfValid2 src="registerNumberLine" dst="DoI" dst2="DoE"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch2 dst="DoI" dst2="DoE"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />

                    <findLineMatch dst="DoI"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoE"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />

                    <assignField src="DoI" field="DateOfIssue"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineMatch dst="DoII"
                        regex="([0-9oOl]{2})(?: |-|\.|\/|\|)+([0-9oOl]{2})(?: |-|\.|\/|\|)+([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="DoII" field="DateOfFirstIssue"/>

                </ML>
                <ML-90 cols="2" split_by="elements" separation="0.04" space_separation="0.10">
                    <findLineMatch dst="licenseNumber"
                        regex="([0-9oOl]{8,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="licenseNumber" reason="DocumentNotExpected"/>
                    <assignField src="licenseNumber" field="LicenseNumber"/>
                </ML-90>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                </ML>
                <ML-90 cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    <!-- Reject if mark IS PRESENT -->
                    <findLineContent dst="mark" content="PROIBIDO@PLASTIFICAR" threshold="0.3"/>
                    <rejectIfValid src="mark" reason="DocumentNotExpected"/>

                    <findLineMatch dst="licenseNumber"
                        regex="^([0-9oOl]{8,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <!-- <rejectIfNotValid src="licenseNumber" reason="DocumentNotExpected"/> -->
                    <assignField src="licenseNumber" field="LicenseNumber"/>
                </ML-90>
            </Back>

        </Version>


    </DocumentID>


    <DocumentID id="KR" iso="KOR">
        <Version id="ID" type="TD1" document_type="DLI">
            <Front>
                <FACE/>
                <ML-KR cols="1" split_by="elements" separation="0.20" space_separation="0.15">
                    
                    <findLineContent dst="idStr" content="주민둥록증" threshold="2" overwrite="false"/>
                    <rejectIfNotValid src="idStr" reason="DocumentNotExpected"/>

                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?- ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?[^A-Za-z0-9]* ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <replaceIfValid dst="docNum" content=" " replace=""/>
                    <rejectIfNotValid src="docNum" reason="DocumentNotExpected"/>
                    <assignField src="docNum" field="DocumentNumber" mask="-6"/>

                    <replaceIfValid dst="DoB" content=" " replace=""/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <matchIfValid src="sexStr" dst="sex" regex="([02468])" value="F" overwrite="false"/>
                    <matchIfValid src="sexStr" dst="sex" regex="([13579])" value="M" overwrite="false"/>
                    <assignField src="sex" field="Gender"/>

                    <findLineMatch src="doiStr" dst="DoI"
                        regex="^([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9])"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="fullN" src="docNum" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="idStr" offset="+1" overwrite="false"/>
                    <matchIfValid src="fullN" dst="fullName"
                        regex="^([^ ]*) ?\(.*\)?"
                        value="($1)"
                        overwrite="false"
                    />
                    <matchIfValid src="fullN" dst="fullName"
                        regex="^(.{3})"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="fullName"/>
                    <assignField src="fullName" field="FullName"/>

                    <assignIfValid dst="address" src="docNum" offset="+1" overwrite="false"/>
                    <assignIfValid dst="address2" src="docNum" offset="+2" overwrite="false"/>
                    <assignIfValid dst="address3" src="docNum" offset="+3" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" " suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix=" " suffix=""/>
                    <rejectIfNotValid src="address"/>
                    <assignField src="address" field="Address"/>

                    <matchIfValid src="address" dst="cityStr"
                        regex="([^ ]*)[시사]"
                        value="($1)시"
                    />
                    <assignFromList dst="city" src="cityStr" threshold="1"
                        list="서울특별시,부산광역시,대구광역시,인천광역시,광주광역시,대전광역시,울산광역시,세종특별자치시,수원시,성남시,의정부시,안양시,부천시,광명시,평택시,동두천시,안산시,고양시,과천시,구리시,남양주시,오산시,시흥시,군포시,의왕시,하남시,용인시,파주시,이천시,안성시,김포시,화성시,광주시,양주시,포천시,여주시,춘천시,원주시,강릉시,동해시,태백시,속초시,삼척시,청주시,충주시,제천시,천안시,공주시,보령시,아산시,서산시,논산시,계룡시,당진시,전주시,군산시,익산시,정읍시,남원시,김제시,목포시,여수시,순천시,나주시,광양시,포항시,경주시,김천시,안동시,구미시,영주시,영천시,상주시,문경시,경산시,창원시,진주시,통영시,사천시,김해시,밀양시,거제시,양산시,제주시,서귀포시"
                    />
                    <assignField src="city" field="City"/>

                    <matchIfValid src="address" dst="districtStr"
                        regex="([^ ]*)[구쿠꾸]"
                        value="($1)구"
                    />
                    <assignFromList dst="district" src="districtStr" threshold="1"
                        list="장안구,권선구,팔달구,영통구,수정구,중원구,분당구,만안구,동안구,상록구,단원구,덕양구,일산동구,일산서구,처인구,기흥구,수지구,상당구,서원구,흥덕구,청원구,동남구,서북구,완산구,덕진구,남구,북구,의창구,성산구,마산합포구,마산회원구,진해구,종로구,중구,용산구,성동구,광진구,동대문구,중랑구,성북구,강북구,도봉구,노원구,은평구,서대문구,마포구,양천구,강서구,구로구,금천구,영등포구,동작구,관악구,서초구,강남구,송파구,강동구,서구,동구,영도구,부산진구,동래구,해운대구,사하구,금정구,연제구,수영구,사상구,수성구,달서구,미추홀구,연수구,남동구,부평구,계양구,광산구,유성구,대덕구"
                    />
                    <assignField src="district" field="District"/>

                    <matchIfValid src="address" dst="townStr"
                        regex="([^ ]*)[군쿤꾼]"
                        value="($1)군"
                    />
                    <assignFromList dst="town" src="townStr" threshold="1"
                        list="연천군,가평군,양평군,홍천군,횡성군,영월군,평창군,정선군,철원군,화천군,양구군,인제군,고성군,양양군,보은군,옥천군,영동군,증평군,진천군,괴산군,음성군,단양군,금산군,부여군,서천군,청양군,홍성군,예산군,태안군,완주군,진안군,무주군,장수군,임실군,순창군,고창군,부안군,담양군,곡성군,구례군,고흥군,보성군,화순군,장흥군,강진군,해남군,영암군,무안군,함평군,영광군,장성군,완도군,진도군,신안군,군위군,의성군,청송군,영양군,영덕군,청도군,고령군,성주군,칠곡군,예천군,봉화군,울진군,울릉군,의령군,함안군,창녕군,남해군,하동군,산청군,함양군,거창군,합천군,달성군,강화군,옹진군,울주군,기장군"
                    />
                    <assignField src="town" field="Town"/>

                    <matchIfValid src="address" dst="provinceStr"
                        regex="([^ ]*)[도됴툐]"
                        value="($1)도"
                    />
                    <assignFromList dst="province" src="provinceStr" threshold="1"
                        list="경기도,강원도,충청북도,충청남도,전라북도,전라남도,경상북도,경상남도,제주특별자치도"
                    />
                    <assignField src="province" field="Province"/>

                    <replaceIfValid dst="address" content="$cityStr" replace="$city"/>
                    <replaceIfValid dst="address" content="$districtStr" replace="$district"/>
                    <replaceIfValid dst="address" content="$townStr" replace="$town"/>
                    <replaceIfValid dst="address" content="$provinceStr" replace="$province"/>

                </ML-KR>

            </Front>
        </Version>

        <Version id="DL" type="TD1" document_type="DLI">
            <Front>
                <FACE/>
                <ML-KR cols="5" split_by="elements" separation="0.10" space_separation="0.10">
                    
                    <postProcessImage dst=""
                        rMin="0.000" rMax="0.999"
                        gMin="0.000" gMax="0.999"
                        bMin="0.000" bMax="0.750"
                        rWeight="0.000"
                        gWeight="0.000"
                        bWeight="0.999"
                    />

                    <findLineContent dst="dlStr" content="자동차운전면허증#" threshold="3" overwrite="false"/>
                    <rejectIfNotValid src="dlStr" reason="DocumentNotExpected"/>

                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([0-9OolI]{2})-([0-9OolI]{2})-([0-9OolI]{6})-([0-9OolI]{2})"
                        value="([N]$1)-([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([0-9OolI]{2})(?: |[^A-Za-z0-9])*([0-9OolI]{2})(?: |[^A-Za-z0-9])*([0-9OolI]{6})(?: |[^A-Za-z0-9])*([0-9OolI]{2})"
                        value="([N]$1)-([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([^ ]+) ?([0-9OolI]{2})-([0-9OolI]{6})-([0-9OolI]{2})"
                        value="($1) ([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([^ ]+) ?([0-9OolI]{2})(?: |[^A-Za-z0-9])*([0-9OolI]{6})(?: |[^A-Za-z0-9])*([0-9OolI]{2})"
                        value="($1) ([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="dlNum" reason="DocumentNotExpected"/>
                    <assignField src="dlNum" field="DriverLicenseNumber" mask="-4"/>

                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?- ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?[^A-Za-z0-9]* ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <replaceIfValid dst="docNum" content=" " replace=""/>
                    <replaceIfValid dst="DoB" content=" " replace=""/>
                    <rejectIfNotValid src="docNum" reason="DocumentNotExpected"/>
                    <assignField src="docNum" field="DocumentNumber" mask="-6"/>

                    <matchIfValid src="sexStr" dst="sex" regex="([02468])" value="F" overwrite="false"/>
                    <matchIfValid src="sexStr" dst="sex" regex="([13579])" value="M" overwrite="false"/>
                    <assignField src="sex" field="Gender"/>

                    <assignIfValid dst="fullN" src="docNum" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="dlNum" offset="+1" overwrite="false"/>
                    <findLineInside dst="fullN" overwrite="false"
                        x="0.350" y="0.245" w="0.650" h="0.130"
                    />
                    <rejectIfNotValid src="fullN"/>
                    <matchIfValid src="fullN" dst="fullN"
                        regex="(.{3})[,.:;-A-Za-z0-9]*$"
                        value="($1)"
                    />
                    <assignField src="fullN" field="FullName"/>

                    <findLineMatch src="dorStr" dst="DoR" overwrite="false"
                        regex="([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9]).?$"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoR" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoR" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoR" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoR"/>
                    <assignField src="DoR" field="DateOfRenewal"/>

                    <findLineMatch src="doeStr" dst="DoE"
                        regex="([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9]).?$"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoE" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoE" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoE" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineMatch src="doiStr" dst="DoI"
                        regex="^([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9])"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="address" src="docNum" offset="+1" overwrite="false"/>
                    <assignIfValid dst="address2" src="docNum" offset="+2" overwrite="false"/>
                    <assignIfValid dst="address3" src="docNum" offset="+3" overwrite="false"/>
                    <assignIfValid dst="address" src="DoR" offset="-3" overwrite="false"/>
                    <assignIfValid dst="address2" src="DoR" offset="-2" overwrite="false"/>
                    <assignIfValid dst="address3" src="DoR" offset="-1" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" " suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix=" " suffix=""/>
                    <assignField src="address" field="Address"/>

                    <matchIfValid src="address" dst="cityStr"
                        regex="([^ ]*)[시사]"
                        value="($1)시"
                    />
                    <assignFromList dst="city" src="cityStr" threshold="1"
                        list="서울특별시,부산광역시,대구광역시,인천광역시,광주광역시,대전광역시,울산광역시,세종특별자치시,수원시,성남시,의정부시,안양시,부천시,광명시,평택시,동두천시,안산시,고양시,과천시,구리시,남양주시,오산시,시흥시,군포시,의왕시,하남시,용인시,파주시,이천시,안성시,김포시,화성시,광주시,양주시,포천시,여주시,춘천시,원주시,강릉시,동해시,태백시,속초시,삼척시,청주시,충주시,제천시,천안시,공주시,보령시,아산시,서산시,논산시,계룡시,당진시,전주시,군산시,익산시,정읍시,남원시,김제시,목포시,여수시,순천시,나주시,광양시,포항시,경주시,김천시,안동시,구미시,영주시,영천시,상주시,문경시,경산시,창원시,진주시,통영시,사천시,김해시,밀양시,거제시,양산시,제주시,서귀포시"
                    />
                    <assignField src="city" field="City"/>

                    <matchIfValid src="address" dst="districtStr"
                        regex="([^ ]*)[구쿠꾸]"
                        value="($1)구"
                    />
                    <assignFromList dst="district" src="districtStr" threshold="1"
                        list="장안구,권선구,팔달구,영통구,수정구,중원구,분당구,만안구,동안구,상록구,단원구,덕양구,일산동구,일산서구,처인구,기흥구,수지구,상당구,서원구,흥덕구,청원구,동남구,서북구,완산구,덕진구,남구,북구,의창구,성산구,마산합포구,마산회원구,진해구,종로구,중구,용산구,성동구,광진구,동대문구,중랑구,성북구,강북구,도봉구,노원구,은평구,서대문구,마포구,양천구,강서구,구로구,금천구,영등포구,동작구,관악구,서초구,강남구,송파구,강동구,서구,동구,영도구,부산진구,동래구,해운대구,사하구,금정구,연제구,수영구,사상구,수성구,달서구,미추홀구,연수구,남동구,부평구,계양구,광산구,유성구,대덕구"
                    />
                    <assignField src="district" field="District"/>

                    <matchIfValid src="address" dst="townStr"
                        regex="([^ ]*)[군쿤꾼]"
                        value="($1)군"
                    />
                    <assignFromList dst="town" src="townStr" threshold="1"
                        list="연천군,가평군,양평군,홍천군,횡성군,영월군,평창군,정선군,철원군,화천군,양구군,인제군,고성군,양양군,보은군,옥천군,영동군,증평군,진천군,괴산군,음성군,단양군,금산군,부여군,서천군,청양군,홍성군,예산군,태안군,완주군,진안군,무주군,장수군,임실군,순창군,고창군,부안군,담양군,곡성군,구례군,고흥군,보성군,화순군,장흥군,강진군,해남군,영암군,무안군,함평군,영광군,장성군,완도군,진도군,신안군,군위군,의성군,청송군,영양군,영덕군,청도군,고령군,성주군,칠곡군,예천군,봉화군,울진군,울릉군,의령군,함안군,창녕군,남해군,하동군,산청군,함양군,거창군,합천군,달성군,강화군,옹진군,울주군,기장군"
                    />
                    <assignField src="town" field="Town"/>

                    <matchIfValid src="address" dst="provinceStr"
                        regex="([^ ]*)[도됴툐]"
                        value="($1)도"
                    />
                    <assignFromList dst="province" src="provinceStr" threshold="1"
                        list="경기도,강원도,충청북도,충청남도,전라북도,전라남도,경상북도,경상남도,제주특별자치도"
                    />
                    <assignField src="province" field="Province"/>

                    <replaceIfValid dst="address" content="$cityStr" replace="$city"/>
                    <replaceIfValid dst="address" content="$districtStr" replace="$district"/>
                    <replaceIfValid dst="address" content="$townStr" replace="$town"/>
                    <replaceIfValid dst="address" content="$provinceStr" replace="$province"/>

                </ML-KR>

            </Front>
        </Version>

        <Version id="FC" type="TD1" document_type="DLI">
            <Front>
                <FACE/>
                <ML-KR cols="1" split_by="elements" separation="0.20" space_separation="0.15">
                    
                    <findLineContent dst="idStrKor" content="외국인등록증" threshold="2" overwrite="false"/>
                    <findLineContent dst="idStrKor" content="영주증" threshold="1" overwrite="false"/>
                    <rejectIfNotValid src="idStrKor" reason="DocumentNotExpected"/>
                    <findLineContent dst="idStr" content="ALIEN@REGISTRATION@CARD" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="idStr" content="PERMANENT@RESIDENT@CARD" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid src="idStr" reason="DocumentNotExpected"/>

                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?- ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?[^A-Za-z0-9]* ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <replaceIfValid dst="docNum" content=" " replace=""/>
                    <rejectIfNotValid src="docNum" reason="DocumentNotExpected"/>
                    <assignField src="docNum" field="DocumentNumber" mask="-6"/>

                    <replaceIfValid dst="DoB" content=" " replace=""/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <matchIfValid src="sexStr" dst="sex" regex="([02468])" value="F" overwrite="false"/>
                    <matchIfValid src="sexStr" dst="sex" regex="([13579])" value="M" overwrite="false"/>
                    <assignField src="sex" field="Gender"/>

                    <findLineMatch src="doiStr" dst="DoI"
                        regex="([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9])"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="fullN" src="doiStr" offset="-3" overwrite="false"/>
                    <matchIfValid src="fullN" dst="fullName"
                        regex="성 ?명 ?([A-Z \.,]+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <matchIfValid src="fullN" dst="fullName"
                        regex="([A-Z \.,]+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="fullName"/>
                    <assignField src="fullName" field="FullName"/>

                    <assignIfValid dst="natStr" src="doiStr" offset="-2" overwrite="false"/>
                    <matchIfValid src="natStr" dst="nat"
                        regex="([A-Z \.,]+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="nat"/>
                    <assignField src="nat" field="Nationality"/>

                </ML-KR>

            </Front>
        </Version>
    </DocumentID>
    
    <DocumentID id="ZA" iso="ZAF">
        <Version id="DriverLicense_v1" type="TD1" document_type="DLI" document_id="ZAF-00-DLI-0000-001-01-00">
            <Front>
                <FACE/>
                <ML split_by="lines">
                    <!--<postProcessImage dst=""
                        nonLinear="true"
                        rMin="0.000" rMax="0.999"
                        gMin="0.000" gMax="0.999"
                        bMin="0.000" bMax="0.999"
                    />-->
                    <calculateOffset x="0.756" y="0.039" w="0.231" h="0.030" content="SOUTH@AFRICA" threshold="0.3"/>
                    <findElementsIntersecting dst="var0" x="0.756" y="0.039" w="0.231" h="0.030"/>
                    <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="SOUTH@AFRICA" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="found0"/>

                    <calculateOffset x="0.027" y="0.167" w="0.243" h="0.022" content="CARTA@DE@CONDUCAO" threshold="0.3"/>
                    <findElementsIntersecting dst="var1" x="0.027" y="0.167" w="0.243" h="0.022"/>
                    <assignIfContent overwrite="false" src="var1" dst="found1" value="Y" op="distance" param="CARTA@DE@CONDUCAO" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="found1"/>

                    <findElementsIntersecting dst="var2" x="0.018" y="0.245" w="0.620" h="0.001"/>
                    <rejectIfNotValid src="var2"/>
                    <assignField src="var2" field="FullName"/>

                    <calculateOffset x="0.029" y="0.313" w="0.058" h="0.026" content="ID@No" threshold="0.3"/>
                    <!-- var4 = DocumentNumber -->
                    <findElementsIntersecting dst="match_var4" x="0.135" y="0.324" w="0.341" h="0.001"/>
                    <matchIfValid overwrite="false" src="match_var4" regex="[0-9oOIlzZhBASsG]{2} ?[^0-9]* ?([0-9oOIlzZhBASsG]{2})([0-1oOIl][0-9oOIlzZhBASsG])([0-3oOIlzZ][0-9oOIlzZhBASsG])([0-9oOIlzZhBASsG]{7})" value="([N]$1)([N]$2)([N]$3)([N]$4)" dst="var4"/>
                    <matchIfValid overwrite="false" src="match_var4" regex="[0-9oOIlzZhBASsG]{2} ?[^0-9]* ?([0-9oOIlzZhBASsG]{2})([0-1oOIl][0-9oOIlzZhBASsG])([0-3oOIlzZ][0-9oOIlzZhBASsG])([0-9oOIlzZhBASsG]{7})" value="([N]$3)/([N]$2)/([YP]$1)" dst="var5"/>
                    <assignField src="var5" field="DateOfBirth"/>
                    <jumpIfValid src="var4" dst="valid_var4"/>

                    <calculateOffset x="0.028" y="0.373" w="0.059" h="0.032" content="Birth#" threshold="0.3"/>
                    <!-- var5 = DateOfBirth -->
                    <findElementsIntersecting dst="match_var5" x="0.271" y="0.385" w="0.181" h="0.001"/>
                    <matchIfValid overwrite="false" src="match_var5" regex="([0-9oOI]{2})/?([0-9oOI]{2})/?([0-9oOI]{4})" value="([N]$1)/([N]$2)/([N]$3)" dst="var5"/>
                    <rejectIfNotValid src="var5"/>
                    <assignField src="var5" field="DateOfBirth"/>


                    <matchIfValid overwrite="false" src="match_var4" regex="[0-9oOIlsS]{2} ?[^0-9]* ?([0-9oOIlzZhBASsG]{13})" value="([N]$1)" dst="var4"/>
                    <jumpIfValid src="var4" dst="valid_var4"/>
                    <matchIfValid overwrite="false" src="match_var4" regex="([0-9oOIlzZhBASsG]{7})$" value="([N]$1)" dst="var4_2"/>
                    <rejectIfNotValid src="var4_2"/>
                    <matchIfValid overwrite="false" src="var5" regex="([0-9]{2})/([0-9]{2})/[0-9]{2}([0-9]{2})" value="($3)($2)($1)" dst="var4_1"/>
                    <rejectIfNotValid src="var4_1"/>
                    <assignIfValid dst="var4" src="var4_1"/>
                    <concatenateIfValid dst="var4" src="var4_2" prefix="" suffix=""/>
                    <jumpIfValid src="var4" dst="valid_var4"/>
                    <matchIfValid overwrite="false" src="match_var4" regex="[0-9oOIlsS]{2} ?[^0-9]* ?([0-9a-zA-Z]{13})" value="([N]$1)" dst="var4"/>                
                    <rejectIfNotValid src="var4"/>
                    <label src="valid_var4"/>
                    <assignField src="var4" field="DocumentNumber"/>

                    <matchIfValid overwrite="false" src="var4" regex="^[0-9]{6}[0-4]" value="F" dst="var3"/>
                    <matchIfValid overwrite="false" src="var4" regex="^[0-9]{6}[5-9]" value="M" dst="var3"/>
                    <jumpIfValid src="var3" dst="valid_var3"/>

                    <findElementsIntersecting dst="match_var3" x="0.541" y="0.320" w="0.095" h="0.001"/>
                    <matchIfValid overwrite="false" src="match_var3" regex="^(MALE)$" value="M" dst="var3"/>
                    <matchIfValid overwrite="false" src="match_var3" regex="^([0-9a-zA-Z]{2,4})$" value="M" dst="var3"/>
                    <matchIfValid overwrite="false" src="match_var3" regex="^(FEMALE)$" value="F" dst="var3"/>
                    <matchIfValid overwrite="false" src="match_var3" regex="^([0-9a-zA-Z]{5,6})$" value="F" dst="var3"/>
                    <rejectIfNotValid src="var3"/>
                    <label src="valid_var3"/>
                    <assignField src="var3" field="Gender"/>

                    <calculateOffset x="0.025" y="0.440" w="0.185" h="0.025" content="License@Number#" threshold="0.3"/>
                    <calculateOffset x="0.025" y="0.440" w="0.185" h="0.025" content="Lic@@No@@L#" threshold="0.3"/>

                    <findElementsIntersecting dst="match_var7" x="0.292" y="0.445" w="0.178" h="0.001"/>
                    <matchIfValid overwrite="false" src="match_var7" regex="([0-9oOIlhBASsG]{8})([0-9a-zA-Z]{4})" value="([N]$1)($2)" dst="var7"/>
                    <rejectIfNotValid src="var7"/>
                    <assignField src="var7" field="LicenseNumber"/>

                    <calculateOffset x="0.028" y="0.499" w="0.058" h="0.028" content="Valid#" threshold="0.3"/>

                    <findElementsIntersecting dst="match_var8" x="0.280" y="0.504" w="0.161" h="0.001"/>
                    <matchIfValid overwrite="false" src="match_var8" regex="([0-9oOIlsS]{2})/?([0-9oOIlsS]{2})/?([0-9oOIlsS]{4}) ?[^0-9]* ?([0-9oOIlsS]{2})/?([0-9oOIlsS]{2})/?([0-9oOIlsS]{4})" value="([N]$1)/([N]$2)/([N]$3)" dst="var8"/>
                    <matchIfValid overwrite="false" src="match_var8" regex="([0-9oOIlsS]{2})/?([0-9oOIlsS]{2})/?([0-9oOIlsS]{4}) ?[^0-9] ?" value="([N]$1)/([N]$2)/([N]$3)" dst="var8"/>
                    <rejectIfNotValid src="var8"/>
                    <assignField src="var8" field="DateOfIssue"/>

                    <findElementsIntersecting dst="match_var9" x="0.457" y="0.504" w="0.159" h="0.001"/>
                    <matchIfValid overwrite="false" src="match_var9" regex="([0-9oOIlsS]{2})/?([0-9oOIlsS]{2})/?([0-9oOIlsS]{4}) ?[^0-9]* ?([0-9oOIlsS]{2})/?([0-9oOIlsS]{2})/?([0-9oOIlsS]{4})" value="([N]$4)/([N]$5)/([N]$6)" dst="var9"/>
                    <matchIfValid overwrite="false" src="match_var9" regex="[^0-9] ?([0-9oOIlsS]{2})/?([0-9oOIlsS]{2})/?([0-9oOIlsS]{4})" value="([N]$1)/([N]$2)/([N]$3)" dst="var9"/>
                    <rejectIfNotValid src="var9"/>
                    <assignField src="var9" field="DateOfExpiry"/>
                </ML>
                <CROP>
                    <region id="Signature" x="0.011" y="0.786" w="0.431" h="0.205"/>
                </CROP>
            </Front>
<!--
            <Back>
                <PDF417 optional="yes" decode="custom:DriverLicenseZAF"/>
                <ML>
                    <findLineContent dst="dr" content="DRIVER@RESTRICTIONS" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="pr" content="PrDP@CATEGORIES" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="vr" content="VEHICLE@RESTRICTIONS" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid3 src="dr" src2="pr" src3="vr"/>
                </ML>
                <CROP>
                    <region id="Fingerprint" x="0.569" y="0.577" w="0.378" h="0.413"/>
                </CROP>
            </Back>
-->
        </Version>
    </DocumentID>
    
        
    <Supported
        Front="AL,AT,BY,BE,BA,BG,HR,CY,CZ,DK,EE,FI,FR,GE,DE,GR,HU,IS,IE,IT,XK,LV,LT,LU,MT,ME,NL,NO,PL,PT,RO,RU,RS,SK,SI,ES,SE,CH,GB,UA,DZ,CD,EG,GH,IL,JO,KW,MA,MZ,NG,OM,QA,SA,ZA,TN,TR,AE,UG,AR,BS,BO,BR,CL,CO,CR,DO,EC,SV,GT,HT,HN,JM,MX,PA,PY,PE,PR,TT,VE,BD,KH,IN,ID,JP,MY,MM,PH,SG,KR,LK,TH,UZ,VN,AU,NZ,BM,CA,US,UK"
        Back= "NL,DZ,CD,EG,KW,MA,NG,OM,AE,BR,CO,DO,SV,GT,HN,JM,MX,PY,PE,BD,IN,MM,SG,TH,AU,CA,US"

        Exceptions-Front="KR"
        Exceptions-Back="KR"
    />
	
</selphid-widget-conf>
