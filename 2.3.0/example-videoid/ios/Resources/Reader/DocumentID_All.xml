<?xml version="1.0" encoding="UTF-8"?>
<selphid-widget-conf version="1.0">

    <DocumentID id="ES" iso="ESP">
        <Version id="All" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="6" split_by="elements" c_separation="2" y_separation="0.3" space_separation="0.07">
                    <findLineMatch dst="docNumber"
                        regex="([0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?) ?([A-Za-z0-9])"
                        value="($1)([U]$2)"
                    />
                    <replaceIfValid dst="docNumber" content=" " replace=""/>
                    <!-- We DONT reject at this point -->
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="dobStr" dst="DoB"
                        regex="^([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch src="doidoeStr" dst="DoI"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3}|9999) (?:[0-3][0-9])(?: |[^A-Za-z0-9])*(?:[0-1][0-9])(?: |[^A-Za-z0-9])*(?:[1-2][0-9]{3}|9999)"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <matchIfValid src="doidoeStr" dst="DoE"
                        regex="(?:[0-3][0-9])(?: |[^A-Za-z0-9])*(?:[0-1][0-9])(?: |[^A-Za-z0-9])*(?:[1-2][0-9]{3}|9999) ([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3}|9999)"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch src="doeStr" dst="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3}|9999)"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <!-- We test if the cardNumber is in the same line as the date of expiry -->
                    <matchIfValid src="doeStr" dst="IDCardNumber"
                        regex="^([A-Za-z0-9]{3}) ?([0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA])"
                        value="([U]$1)([N]$2)"
                    />
                    <findLineMatch dst="IDCardNumber" mode="reverse"
                        regex="([A-Za-z0-9]{3}) ?([0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA] ?[0-9OIlSBA])"
                        value="([U]$1)([N]$2)"
                        overwrite="false"
                    />
                    <!-- <rejectIfNotValid src="IDCardNumber" reason="DocumentNotExpected"/> -->
                    <replaceIfValid dst="IDCardNumber" content=" " replace=""/>
                    <assignField src="IDCardNumber" field="IDCardNumber"/>
                    <assignField src="IDCardNumber" field="NfcKey"/>

                    <findLineContent dst="dni" content="DOCUMENTO@NACIONAL@DE@IDENTIDAD" threshold="0.30"/>
                    <findLineContent dst="nom" content="NOMBRE" threshold="0.30" overwrite="false"/>
                    <findLineContent dst="nom" content="NOMBRE@@@NOM" threshold="0.30" overwrite="false"/>
                    <findLineContent dst="nom" content="NOMBRE@@@IZENA" threshold="0.30" overwrite="false"/>

                    <findLineContent dst="ape" content="APELLIDOS" threshold="0.30" overwrite="false"/>
                    <findLineContent dst="ape" content="APELLIDOS@@@COGNOMS" threshold="0.30" overwrite="false"/>
                    <findLineContent dst="ape" content="APELLIDOS@@@APELIDOS" threshold="0.30" overwrite="false"/>
                    <jumpIfNotValid src="ape" dst="else_apellidos"/>
                        <assignIfValid dst="ln1" src="ape" offset="+1" overwrite="false"/>
                        <assignIfValid dst="ln2" src="ape" offset="+2" overwrite="false"/>
                        <assignIfValid dst="ln1" src="nom" offset="-2" overwrite="false"/>
                        <assignIfValid dst="ln2" src="nom" offset="-1" overwrite="false"/>
                        <assignResult src="$_ESP/IDCard/DNIv3" field="DocumentModel"/>
                        <jump dst="end_apellidos"/>
                    <label src="else_apellidos"/>
                        <findLineContent dst="p_a" content="PRIMER@APELLIDO" threshold="0.30" overwrite="false"/>
                        <findLineContent dst="p_a" content="PRIMER@APELLIDO@@@PRIMER@COGNOM" threshold="0.30" overwrite="false"/>
                        <findLineContent dst="p_a" content="PRIMER@APELLIDO@@@ABIZENAK" threshold="0.30" overwrite="false"/>
                        <findLineContent dst="s_a" content="SEGUNDO@APELLIDO" threshold="0.30" overwrite="false"/>
                        <findLineContent dst="s_a" content="SEGUNDO@APELLIDO@@@SEGON@COGNOM" threshold="0.30" overwrite="false"/>
                        <findLineContent dst="s_a" content="SEGUNDO@APELLIDO@@@BIGARREN@ABIZENA" threshold="0.30" overwrite="false"/>
                        <assignIfValid dst="ln1" src="p_a" offset="+1" overwrite="false"/>
                        <assignIfValid dst="ln1" src="s_a" offset="-1" overwrite="false"/>
                        <assignIfValid dst="ln2" src="s_a" offset="+1" overwrite="false"/>
                        <assignIfValid dst="ln2" src="nom" offset="-1" overwrite="false"/>
                        <assignResult src="$_ESP/IDCard/DNIv2" field="DocumentModel"/>
                    <label src="end_apellidos"/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <rejectIfNotValid src="fn"/>
                    <rejectIfNotValid src="ln1"/>
                    <rejectIfNotValid src="ln2"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <modifyIfValid dst="ln1" op="U"/>
                    <modifyIfValid dst="ln2" op="U"/>

                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>

                    <assignField src="fn" field="FirstName" block="true"/>
                    <assignField src="ln1" field="LastName1" block="true"/>
                    <assignField src="ln2" field="LastName2" block="true"/>
                    <assignField src="ln" field="LastName"/>

                    <jumpIfNotValid src="DoI" dst="NO_V4"/>
                        <assignResult src="$_ESP/IDCard/DNIv4" field="DocumentModel"/>
                    <label src="NO_V4"/>

                    <findLineMatch src="sexStr" dst="sex"
                        regex="^(M|F) [A-Z]{3}$"
                        value="($1)"
                    />
                    <findLineMatch dst="sex"
                        regex="^(M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>

                    <matchIfValid src="sexStr" dst="nat"
                        regex="^(?:M|F) ([A-Z]{3})$"
                        value="($1)"
                    />
                    <findLineMatch dst="nat"
                        regex="^([A-Z]{3})$"
                        value="($1)"
                        overwrite="false"
                        mode="reverse"
                    />
                    <assignField src="nat" field="Nationality"/>

                    <findLineIntersecting dst="canStr" x="0.7" y="0.8" w="0.3" h="0.2"/>
                    <matchIfValid src="canStr" dst="canN" overwrite="false"
                        regex="([0-9oOIlBASsG]{6})$"
                        value="([N]$1)"
                    />
                    <assignField src="canN" field="CANNumber"/>

                    <!-- We try to read a partial document number -->
                    <findLineMatch dst="partialDocNumber"
                        regex="^([0-9]? ?[0-9]? ?[0-9]? ?[0-9]? ?[0-9] ?[0-9] ?[0-9] ?[0-9] ?) ?([A-Za-z])$"
                        value="($1)([U]$2)"
                    />
                    <!-- We reject if we didn't find neither of those -->
                    <rejectIfNotValid2 src="docNumber" src2="partialDocNumber" reason="DocumentNotExpected"/>

                </ML>
            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"        line="1" starts="1" count="2" regex="ID"/>
                    <field id="Issuer"              line="1" starts="3" count="3" regex="ESP"/>
                    <field id="IDCardNumber"        line="1" starts="6" count="9"/>
                    <field id="DocumentNumber"      line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"         line="2" starts="1" count="6"/>
                    <field id="Gender"              line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"        line="2" starts="9" count="6"/>
                    <field id="Nationality"         line="2" starts="16" count="3"/>
                    <field id="Opt2"                line="2" starts="19" count="11"/>
                    <field id="LastName"            line="3" starts="1" count="??"/>
                    <field id="FirstName"           line="3" starts="??" count="30"/>
                    <!-- <field id="LastName+FirstName"  line="3" starts="1" count="30"/> -->

                    <field id="NfcKey"              line="1" starts="6" count="9"/>
                </MRZ>
                
                <ML cols="3" split_by="elements" c_separation="3" space_separation="0.07">
                    <findLineContent dst="dom" content="DOMICILIO@DOMICILI" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dom" content="DOMICIUO@DOMICIU" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dom" content="DOMICILIO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dom" content="DOMICIUO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dom" content="DOMICILIO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dom" content="DOMICIUO#" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid src="dom" reason="DocumentNotExpected"/>

                    <findLineContent dst="ldn" content="LUGAR@DE@NACIMIENTO@LLOC@DE@NAIXIMENT" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="ppn" content="PROVINCIA@PAIS@PROVINCIA@PAIS" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="ppn" content="PROVINCIA@PAIS" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="hjd" content="HIJO@A@DE@FILL@A@DE" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="hjd" content="HIJO@A@DE" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="ldd" content="LUGAR@DE@DOMICILIO@LLOC@DE@DOMICILI" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="ldd" content="LUGAR@DE@DOMICIUO@LLOC@DE@DOMICIU" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="ldd" content="LUGAR@DE@DOMICILIO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="ldd" content="LUGAR@DE@DOMICIUO" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="ppd" content="PROVINCIA@PAIS@PROVINCIA@PAIS" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="ppd" content="PROVINCIA@PAIS" threshold="0.3" overwrite="false"/>

                    <assignIfValid dst="addr" src="dom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="addr1" src="addr" overwrite="false"/>
                    <jumpIfValid src="ldd" dst="v2"/>
                        <assignIfValid dst="addr2" src="dom" offset="+2" overwrite="false"/>
                        <assignIfValid dst="addr3" src="dom" offset="+3" overwrite="false"/>
                        <jump dst="end"/>
                    <label src="v2"/>
                        <assignIfValid dst="addr2" src="ldd" offset="+1" overwrite="false"/>
                        <assignIfValid dst="addr3" src="ppd" offset="+1" overwrite="false"/>
                    <label src="end"/>
                    <concatenateIfValid dst="addr" src="addr2" prefix=" - " suffix=""/>
                    <concatenateIfValid dst="addr" src="addr3" prefix=" - " suffix=""/>
                    <assignField src="addr" field="Address"/>
                    <assignField src="addr1" field="Address1"/>
                    <assignField src="addr2" field="Address2"/>
                    <assignField src="addr3" field="Address3"/>

                    <assignIfValid dst="pob" src="ldn" offset="+1" overwrite="false"/>
                    <jumpIfValid src="ppn" dst="v2"/>
                        <assignIfValid dst="pob2" src="ldn" offset="+2" overwrite="false"/>
                        <jump dst="end"/>
                    <label src="v2"/>
                        <assignIfValid dst="pob2" src="ppn" offset="+1" overwrite="false"/>
                    <label src="end"/>
                    <concatenateIfValid dst="pob" src="pob2" prefix=" - " suffix=""/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <assignIfValid dst="parents" src="hjd" offset="+1" overwrite="false"/>
                    <splitIfValid2 src="parents" by="/"
                        dst1="fatherName"
                        dst2="motherName"
                        overwrite="false"
                    />
                    <splitIfValid2 src="parents" by=" I "
                        dst1="fatherName"
                        dst2="motherName"
                        overwrite="false"
                    />
                    <assignField src="fatherName" field="FatherFirstName"/>
                    <assignField src="motherName" field="MotherFirstName"/>

                </ML>
            </Back>
        </Version>

        <Version id="PresetId" type="TD1" document_type="IDC">
            <Front>
                <BLINKID>
                    <ML>
                        <field id="IDCardNumber" move="DocumentNumber"/>
                        <field id="DocumentNumber" move="PersonalIdNumber"/>
                    </ML>
                </BLINKID>
            </Front>
            <Back>
                <BLINKID>
                    <MRZ>
                        <field id="IDCardNumber" move="DocumentNumber"/>
                        <field id="DocumentNumber" move="Opt1"/>
                    </MRZ>
                </BLINKID>
            </Back>
        </Version>

    </DocumentID>
    
    <DocumentID id="PA" iso="PAN">
        <Version id="All" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="3" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineIntersecting dst="docNumberStr" x="0.7" y="0.4" w="0.3" h="0.3"/>
                    <matchIfValid src="docNumberStr" dst="docNumber" overwrite="false"
                        regex="^([0-9]+PI|[0-9]+|PE|N|E)-([0-9]+)-([0-9]{1,6})$"
                         value="($1)-($2)-($3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="err1" content="SERVICIO@NACIONAL@DE@MIGRACIÓN" threshold="0.3"/>
                    <rejectIfValid src="err1"/>

                    <findLineContent dst="nu" content="NOMBRE@USUAL" threshold="3"/>
                    <rejectIfNotValid src="nu" reason="DocumentNotExpected"/>
                    <findLineContent dst="rdp" content="REPUBLICA@DE@PANAMA" threshold="4"/>
                    <rejectIfNotValid src="rdp" reason="DocumentNotExpected"/>
                    <findLineContent dst="te" content="TRIBUNAL@ELECTORAL" threshold="4"/>
                    <!--<rejectIfNotValid src="te"/>-->
                    <findLineContent dst="crp" content="CARNE@DE@RESIDENTE@PERMANENTE" threshold="0.3"/>
                    <findLineContent dst="ddi" content="DOCUMENTO@DE@IDENTIDAD" threshold="3"/>
                    <rejectIfValid src="ddi" reason="DocumentNotExpected"/>

                    <assignIfValid dst="fn" src="nu" offset="-2" overwrite="false"/>
                    <assignIfValid dst="ln" src="nu" offset="-1" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="te" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="te" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="crp" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="crp" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="rdp" offset="2" overwrite="false"/>
                    <assignIfValid dst="ln" src="rdp" offset="3" overwrite="false"/>

                    <rejectIfNotValid src="fn"/>
                    <rejectIfNotValid src="ln"/>

                    <label src="names_read"/>
                    <modifyIfValid dst="fn" op="C"/>
                    <modifyIfValid dst="ln" op="C"/>

                    <assignField src="fn" field="FirstName" block="true"/>
                    <assignField src="ln" field="LastName" block="true"/>

                    <findLineContent dst="sexStr" content="SEXO@@@" threshold="2"/>
                    <assignIfContent2 src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <assignIfValid dst="DoBStr" src="nu" offset="+1" overwrite="false"/>
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <assignField src="DoB" field="DateOfBirth" block="true"/>

                    <findLineMatch2 dst="DoI" dst2="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch dst="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <assignField src="DoI" field="DateOfIssue"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <rejectIfNotValid src="DoB"/>
                    <rejectIfNotValid src="DoI"/>
                    <rejectIfNotValid src="DoE"/>

                    <findLineContent dst="btStr" content="TIPO@DE@SANGRE@" threshold="0.4"/>
                    <matchIfValid dst="BT" src="btStr"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                    />

                    <findLineContent dst="nat" content="NACIONALIDAD:#" threshold="0.3"/>
                    <jumpIfNotValid src="nat" dst="noNationality"/>
                    <replaceIfValid dst="nat" content="NACIONALIDAD" replace="" threshold="0.2"/>
                    <replaceIfValid dst="nat" content=":" replace=""/>
                    <replaceIfValid dst="nat" content="." replace=""/>
                    <assignField src="nat" field="Nationality"/>
                    <label src="noNationality"/>

                    <findLineContent dst="PoB" content="LUGAR@DE@NACIMIENTO#" threshold="0.3"/>
                    <jumpIfNotValid src="PoB" dst="noPlaceOfBirth"/>
                    <replaceIfValid dst="PoB" content="LUGAR" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="NACIMIENTO" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="DE" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <replaceIfValid dst="PoB" content="." replace=""/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <label src="noPlaceOfBirth"/>
                    
                    <findLineContent dst="bdStr" content="DONANTE" threshold="2"/>
                    <assignIfContent src="bdStr" dst="BD" value="YES"
                        op="exists"
                        overwrite="false"
                    />

                    <!-- We test again for sex and blood donor if it's all in one line -->
                    <findLineContent dst="g_bd" content="SEXO@@@@DONANTE" threshold="0.3"/>
                    <assignIfContent src="g_bd" dst="BD" value="YES"
                        op="exists"
                        overwrite="false"
                    />
                    <replaceIfValid dst="maybeSexStr" src="g_bd_bt" content="DONANTE" replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <!-- We test again for sex, blood donor and blood type if it's all in one line -->
                    <findLineContent dst="g_bd_bt" content="SEXO@@@@DONANTE@TIPO@DE@SANGRE@" threshold="0.4"/>
                    <assignIfContent src="g_bd_bt" dst="BD" value="YES"
                        op="exists"
                        overwrite="false"
                    />

                    <matchIfValid src="g_bd_bt" dst="BT"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />

                    <replaceIfValid dst="maybeSexStr" src="g_bd_bt" content="DONANTE" replace="" threshold="0.2"/>
                    <replaceIfValid dst="maybeSexStr" content="TIPO DE SANGRE" replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    
                    <assignIfContent dst="BD" value="NO"
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignIfContent dst="BT" value=""
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignField src="BD" field="BloodDonor"/>
                    <assignField src="BT" field="BloodType"/>
                    <assignField src="sex" field="Gender"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <ML cols="1" split_by="lines" c_separation="2" separation="0.04" y_separation="0.40" space_separation="0.10">
                    <findLineContent dst="tri" content="TRIBUNAL" threshold="0.3"/>
                    <findLineContent dst="ele" content="ELECTORAL" threshold="0.3"/>
                    <findLineContent dst="pat" content="LA@PATRIA@LA@HACEMOS@TODOS" threshold="0.3"/>
                    <rejectIfNotValid3 src="tri" src2="ele" src3="pat"/>
                </ML>
                <ML-90 cols="1" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">
                    <findLineMatch dst="docNumber"
                        regex="^([0-9]+PI|[0-9]+|PE|N|E)-([0-9]+)-([0-9]{2,6})$"
                        value="($1)-($2)-($3)"
                    />
                    <!-- <rejectIfNotValid src="docNumber"/> -->

                    <assignField src="docNumber" field="DocumentNumber"/>
                </ML-90>

            </Back>    
            
        </Version>

        <Version id="2023" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="3" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <!--<findLineMatch dst="docNumber"
                        regex="^([0-9]+PI|[0-9]+|PE|N|E)-([0-9]+)-([0-9]{1,6})$"
                        value="($1)-($2)-($3)"
                    />-->
                    <findLineIntersecting dst="docNumberStr" x="0.1" y="0.9" w="0.3" h="0.3"/>
                    <matchIfValid src="docNumberStr" dst="docNumber" overwrite="false"
                        regex="^([0-9]+PI|[0-9]+|PE|N|E)-([0-9]+)-([0-9]{1,6})$"
                         value="($1)-($2)-($3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>

                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="err1" content="SERVICIO@NACIONAL@DE@MIGRACIÓN" threshold="0.3"/>
                    <rejectIfValid src="err1"/>

                    <findLineContent dst="nu" content="NOMBRE@USUAL" threshold="2"/>
                    <rejectIfNotValid src="nu" reason="DocumentNotExpected"/>
                    <findLineContent dst="rdp" content="REPUBLICA@DE@PANAMA" threshold="3"/>
                    <rejectIfNotValid src="rdp" reason="DocumentNotExpected"/>
                    <!--<findLineContent dst="te" content="TRIBUNAL@ELECTORAL" threshold="3"/>
                    <rejectIfValid src="te"/>-->
                    <findLineContent dst="ddi" content="DOCUMENTO@DE@IDENTIDAD" threshold="3"/>
                    <!--<rejectIfNotValid src="ddi"/>-->

                    <assignIfValid dst="fn" src="nu" offset="-2" overwrite="false"/>
                    <assignIfValid dst="ln" src="nu" offset="-1" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="te" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="te" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="crp" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="crp" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="rdp" offset="2" overwrite="false"/>
                    <assignIfValid dst="ln" src="rdp" offset="3" overwrite="false"/>

                    <rejectIfNotValid src="fn"/>
                    <rejectIfNotValid src="ln"/>

                    <label src="names_read"/>
                    <modifyIfValid dst="fn" op="C"/>
                    <modifyIfValid dst="ln" op="C"/>

                    <assignField src="fn" field="FirstName" block="true"/>
                    <assignField src="ln" field="LastName" block="true"/>

                    <findLineContent dst="sexStr" content="SEXO@@" threshold="2"/>
                    <assignIfContent2 src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <assignIfValid dst="DoBStr" src="nu" offset="+1" overwrite="false"/>
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <assignField src="DoB" field="DateOfBirth" block="true"/>


                    <findLineMatch2 dst="DoI" dst2="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch dst="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />

                    <assignField src="DoI" field="DateOfIssue"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <rejectIfNotValid src="DoB"/>
                    <rejectIfNotValid src="DoI"/>
                    <rejectIfNotValid src="DoE"/>

                    <findLineContent dst="btStr" content="TIPO@DE@SANGRE@" threshold="0.4"/>
                    <matchIfValid dst="BT" src="btStr"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                    />

                    <findLineContent dst="PoB" content="LUGAR@DE@NACIMIENTO#" threshold="0.3"/>
                    <jumpIfNotValid src="PoB" dst="noPlaceOfBirth"/>
                    <replaceIfValid dst="PoB" content="NACIMIENTO" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="DE" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <replaceIfValid dst="PoB" content="." replace=""/>
                    <replaceIfValid dst="PoB" content="LUGAR" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="UGAR" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="WGAR" replace="" threshold="0.2"/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <label src="noPlaceOfBirth"/>

                    <!-- We test again for sex and blood type if it's all in one line -->
                    <findLineContent dst="g_bt" content="SEXO@@@@TIPO@DE@SANGRE@" threshold="0.4"/>

                    <matchIfValid src="g_bt" dst="BT"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />

                    <replaceIfValid dst="maybeSexStr" src="g_bt" content="TIPO@DE@SANGRE@"  replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <assignIfContent dst="BT" value=""
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignField src="BT" field="BloodType"/>
                    <assignField src="sex" field="Gender"/>

                    <assignResult src="$_PAN/IDCard/2023" field="DocumentModel"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <ML-90 cols="3" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">
                    <findLineMatch dst="docData"
                        regex="^([0-9A-Z]{9})$"
                        value="($1)"
                    />
                    <!-- <rejectIfNotValid src="docData"/> -->
                    <assignField src="docData" field="DocumentAdditionalNumber"/>
                </ML-90>

                <MRZ>
                    <field id="DocumentCode"              line="1" starts="1" count="2"/>
                    <field id="Issuer"                    line="1" starts="3" count="3" regex="PAN"/>
                    <field id="DocumentAdditionalNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"                      line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"               line="2" starts="1" count="6"/>
                    <field id="Gender"                    line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"              line="2" starts="9" count="6"/>
                    <field id="Nationality"               line="2" starts="16" count="3"/>
                    <field id="Opt2"                      line="2" starts="19" count="11"/>
                    <field id="LastName"                  line="3" starts="1" count="??"/>
                    <field id="FirstName"                 line="3" starts="??" count="30"/>

                    <field id="NfcKey"                    line="1" starts="6" count="9"/>
                </MRZ>

                <!-- types: QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <BARCODE types="QRCODE" decode="splitBy:|" charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"            data="0"/>
                    <field id="FirstName"                 data="1"/>
                    <field id="LastName"                  data="2"/>
                    <field id="Data3"                     data="3"/>
                    <field id="Gender"                    data="4"/>
                    <field id="PlaceOfBirth"              data="5"/>
                    <!-- <field id="DateOfBirth_"              data="6" regex="([0-9]{4})([0-9]{2})([0-9]{2})" value="($3)/($2)/($1)"/> -->
                    <field id="NationalityDemonym"        data="7"/>
                    <!-- <field id="DateOfIssue_"              data="8" regex="([0-9]{4})([0-9]{2})([0-9]{2})" value="($3)/($2)/($1)"/> -->
                    <!-- <field id="DateOfExpiry_"             data="9" regex="([0-9]{4})([0-9]{2})([0-9]{2})" value="($3)/($2)/($1)"/> -->
                    <field id="DocumentAdditionalNumber"  data="10"/>
                </BARCODE>

            </Back>

        </Version>

        <Version id="Juvenil" type="TD1">
            <Front>
                <FACE/>
                <ML cols="3" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch dst="docNumber"
                        regex="^([0-9]+PI|[0-9]+|PE|N|E)-([0-9]+)-([0-9]{1,6})$"
                        value="($1)-($2)-($3)"
                    />
                    <rejectIfNotValid src="docNumber"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="err1" content="SERVICIO@NACIONAL@DE@MIGRACIÓN" threshold="2"/>
                    <rejectIfValid src="err1"/>

                    <findLineContent dst="nu" content="NOMBRE@USUAL" threshold="2"/>
                    <rejectIfValid src="nu"/>

                    <findLineContent dst="rdp" content="REPUBLICA@DE@PANAMA" threshold="1"/>
                    <rejectIfNotValid src="rdp"/>

                    <findLineContent dst="tr" content="TRIBUNAL" threshold="1"/>
                    <findLineContent dst="el" content="ELECTORAL" threshold="1"/>
                    <findLineContent dst="te" content="TE" threshold="2"/>
                    <!-- <rejectIfNotValid src="te"/> -->
                    <findLineContent dst="tel" content="TEELECTORAL" threshold="1"/>
                    <findLineContent dst="crp" content="CARNE@DE@RESIDENTE@PERMANENTE" threshold="0.3"/>
                    <findLineContent dst="ddi" content="DOCUMENTO@DE@IDENTIDAD" threshold="3"/>
                    <rejectIfValid src="ddi"/>
                    <findLineContent dst="cju" content="CEDULA@JUVENIL" threshold="1"/>
                    <rejectIfNotValid src="cju"/>

                    <assignIfValid dst="fn" src="tel" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="tel" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="el" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="el" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="tr" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="tr" offset="2" overwrite="false"/>
                    <jumpIfValid2 src="fn" src2="ln" dst="names_read"/>

                    <assignIfValid dst="fn" src="cju" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="cju" offset="2" overwrite="false"/>

                    <!--<rejectIfNotValid src="fn"/>
                   <rejectIfNotValid src="ln"/>-->

                    <label src="names_read"/>
                    <modifyIfValid dst="fn" op="C"/>
                    <modifyIfValid dst="ln" op="C"/>

                    <assignField src="fn" field="FirstName" block="true"/>
                    <assignField src="ln" field="LastName" block="true"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <!-- types: QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <BARCODE types="QRCODE" optional="yes"/>

                <ML cols="3" split_by="lines" separation="0.04" y_separation="0.40" space_separation="0.10">

                    <findLineContent dst="sexStr" content="SEXO@@" threshold="2"/>
                    <assignIfContent2 src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <assignIfValid dst="DoBStr" src="nu" offset="+1" overwrite="false"/>
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch src="DoBStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <assignField src="DoB" field="DateOfBirth" block="true"/>


                    <findLineMatch2 dst="DoI" dst2="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <findLineMatch dst="DoE"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />

                    <assignField src="DoI" field="DateOfIssue"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <!--<rejectIfNotValid src="DoB"/>
                   <rejectIfNotValid src="DoI"/>
                   <rejectIfNotValid src="DoE"/>-->

                    <findLineContent dst="btStr" content="TIPO@DE@SANGRE@" threshold="0.4"/>
                    <matchIfValid dst="BT" src="btStr"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                    />

                    <findLineContent dst="PoB" content="LUGAR@DE@NACIMIENTO#" threshold="0.3"/>
                    <jumpIfNotValid src="PoB" dst="noPlaceOfBirth"/>
                    <replaceIfValid dst="PoB" content="NACIMIENTO" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="DE" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <replaceIfValid dst="PoB" content="." replace=""/>
                    <replaceIfValid dst="PoB" content="LUGAR" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="UGAR" replace="" threshold="0.2"/>
                    <replaceIfValid dst="PoB" content="WGAR" replace="" threshold="0.2"/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <label src="noPlaceOfBirth"/>

                    <!-- We test again for sex and blood type if it's all in one line -->
                    <findLineContent dst="g_bt" content="SEXO@@@@TIPO@DE@SANGRE@" threshold="0.4"/>

                    <matchIfValid src="g_bt" dst="BT"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />

                    <replaceIfValid dst="maybeSexStr" src="g_bt" content="TIPO@DE@SANGRE@"  replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />

                    <assignIfContent dst="BT" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignField src="BT" field="BloodType"/>
                    <assignField src="sex" field="Gender"/>


                    <findLineContent dst="motherName" content="PADRES: #" threshold="0.2"/>
                    <assignIfValid dst="fatherName" src="motherName" offset="+1"/>
                    <replaceIfValid dst="motherName" content=":" replace=""/>
                    <replaceIfValid dst="motherName" content="PADRES@" replace="" threshold="0.2"/>


                    <assignField src="motherName" field="MotherName"/>
                    <assignField src="fatherName" field="FatherName"/>

                </ML>

                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3"/>
                    <field id="DocumentData"    line="1" starts="6" count="9"/>
                    <!--<field id="DocumentNumber"  line="1" starts="16" count="15"/>-->
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
            </Back>
        </Version>
    </DocumentID>
    
    <DocumentID id="PE" iso="PER">
        <Version id="2005" type="TD1" document_type="IDC">
            <Front>
                <FACE>
                    <region id="Signature" x="0.540" y="0.455" w="0.280" h="0.265"/>
                </FACE>
                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="PER"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <!-- <field id="DateOfExpiry"    line="2" starts="9" count="6"/> -->
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                        overwrite="false"
                    />
                    <!-- We read MRZ via ML -->
                    <findLineMatch src="dataMRZ1" dst="docNumber"
                        regex="(?:[A-Z]{3}) ?([0-9oOl]{8})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="CUI"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <!-- Hardcoded data because it's always the same -->
                    <assignField src="$_I" field="DocumentCode"/>
                    <assignField src="$_PER" field="Issuer"/>

                    <findLineMatchMultiple src="dataMRZ2" overwrite="false"
                        regex="^((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))([M|F|X]) ?((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})((?:[0-9oOl][\s\.]*){2})(?:(?:[0-9oOl][\s\.]*))((?:[A-Z][\s\.]*){3})"
                        dst1="dob"
                        value1="([N]$3)/([N]$2)/([YP]$1)"
                        dst2="gender"
                        value2="([U]$4)"
                        dst3="nationality"
                        value3="([U]$8)"
                    />
                    <rejectIfNotValid src="dataMRZ2" reason="DocumentNotExpected"/>
                    
                    <assignField src="gender" field="Gender"/>
                    <replaceIfValid dst="dob" content=" " replace=""/>
                    <assignField src="dob" field="DateOfBirth"/>
                    <!-- <replaceIfValid dst="doe" content=" " replace=""/> -->
                    <!-- <assignField src="doe" field="DateOfExpiry"/> -->
                    <assignField src="nationality" field="Nationality"/>

                    <findLineContent dst="dataFirstSurname" content="Primer@Apellido@First@Surname" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataFirstSurname" content="Primer@Apellido" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataSecondSurname" content="Segundo@Apellido@Second@Surname" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataSecondSurname" content="Segundo@Apellido" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataFirstName" content="Pre@Nombres@Given@Names" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataFirstName" content="Pre@Nombre" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataDateOfInscription" content="Inscription@Date" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataDateOfInscription" content="Fecha@inscripción" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataDateOfIssue" content="Issue@Date" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataDateOfIssue" content="Fecha@Emisión" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataDateOfExpiry" content="Expiration@Date" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dataDateOfExpiry" content="Fecha@Caducidad" threshold="0.2" overwrite="false"/>

                    <assignIfValid dst="ln" src="dataFirstSurname" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="dataSecondSurname" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln" src="dataFirstName" offset="-3" overwrite="false"/>
                    <assignIfValid dst="ln2" src="dataSecondSurname" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="dataFirstName" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="dataFirstSurname" offset="3" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataFirstName" offset="1" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataSecondSurname" offset="3" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataFirstSurname" offset="5" overwrite="false"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <rejectIfNotValid src="ln"/>
                    <modifyIfValid dst="ln" op="U"/>
                    <assignField src="ln" field="LastName"/>

                    <rejectIfNotValid src="fn"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <assignIfValid dst="doins2" src="dataDateOfInscription" offset="1" overwrite="false"/>
                    <matchIfValid src="doins2" dst="doins"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="doins" field="DateOfInscription"/>

                    <assignIfValid dst="doi2" src="dataDateOfIssue" offset="1" overwrite="false"/>
                    <matchIfValid src="doi2" dst="doi"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="doi" field="DateOfIssue"/>

                    <assignIfValid dst="doe2" src="dataDateOfExpiry" offset="1" overwrite="false"/>
                    <matchIfValid src="doe2" dst="doe"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <jumpIfValid src="doe" dst="DOE_FOUND"/>
                        <assignIfContent src="doe2" dst="doe" value="31/12/9999"
                            op="distance" param="NO@CADUCA" param_2="0.3"
                            overwrite="false"
                        />
                    <label src="DOE_FOUND"/>
                    <assignField src="doe" field="DateOfExpiry"/>

                    <assignResult src="$_PER/IDCard/2005" field="DocumentModel"/>

                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
<!--
                <PDF417 decode="substring" charset="ISO-8859-1" optional="yes">
                    <field id="Data0"               starts="1" ends="3"/>
                    <field id="DocumentNumber"      starts="3" ends="11"/>
                    <field id="LastName1"           starts="11" ends="51"/>
                    <field id="LastName2"           starts="51" ends="91"/>
                    <field id="FirstName"           starts="91" ends="126"/>
                    <field id="Data5"               starts="126" ends="504"/>
                    <field id="DateOfExpiry"        starts="504" ends="512"/>
                    <field id="Data7"               starts="512" ends="520"/>
                    <field id="Data8"               starts="520" ends="528"/>
                </PDF417>
-->
                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"       data="0"/>
                </BARCODE>

                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <!-- Check if we are scaning the front of version 2013 -->
                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <rejectIfValid src="docNumber"/>
                    <!-- Reject if we find the doc number -->


                    <findLineContent dst="dataDepartment" content="Departamento" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataState" content="Provincia" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataDistrict" content="Distrito" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataAddress" content="Dirección@Home@Address" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataAddress" content="Dirección" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataVoteGroup" content="Grup@@Vot@@Voting@Group#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataVoteGroup" content="Grupo@de@votación#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataObservations" content="Obs@Comments" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataObservations" content="Observaciones" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataCountry" content="País@Country" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dataCity" content="Ciudad@City" threshold="0.3" overwrite="false"/>

                    <rejectIfNotValid4 src="dataDepartment" src2="dataAddress" src3="dataObservations" src4="dataCountry" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="dataDistrict" src2="dataVoteGroup" reason="DocumentNotExpected"/>

                    <assignIfValid dst="addressDepartment" src="dataDepartment" offset="1" overwrite="false"/>
                    <assignIfValid dst="addressState" src="dataState" offset="1" overwrite="false"/>
                    <assignIfValid dst="addressDistrict" src="dataDistrict" offset="1" overwrite="false"/>
                    <assignIfValid dst="address" src="dataAddress" offset="1" overwrite="false"/>
                    <assignIfValid dst="addressCountry" src="dataCountry" offset="1" overwrite="false"/>
                    <assignIfValid dst="addressCity" src="dataCity" offset="1" overwrite="false"/>
                    
                    <modifyIfValid dst="addressDepartment" op="U"/>
                    <modifyIfValid dst="addressState" op="U"/>
                    <modifyIfValid dst="addressDistrict" op="U"/>
                    
                    <matchIfValid dst="voteGroup" src="dataVoteGroup"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="voteGroup" src="dataVoteGroup" offset="1" overwrite="false"/>
                    <matchIfValid dst="voteGroup"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="addressDepartment" field="AddressDepartment"/>
                    <assignField src="addressState" field="AddressState"/>
                    <assignField src="addressDistrict" field="AddressDistrict"/>
                    <assignField src="address" field="Address"/>
                    <assignField src="voteGroup" field="VoteGroup"/>
                    <assignField src="addressCountry" field="AddressCountry"/>
                    <assignField src="addressCity" field="AddressCity"/>

                    <jumpIfValid src="addressDepartment" dst="jumpDocumentFinish"/>
                    <jumpIfValid src="addressState" dst="jumpDocumentFinish"/>
                    <jumpIfValid src="addressDistrict" dst="jumpDocumentFinish"/>
                    <jumpIfValid src="voteGroup" dst="jumpDocumentFinish"/>
                    
                    <rejectIfNotValid src="dummy"/>

                    <label src="jumpDocumentFinish"/>
                </ML>
            </Back>

        </Version>
        <Version id="2013" type="TD1" document_type="IDC">
            <Front>
                <FACE>
                    <region id="Signature" x="0.695" y="0.770" w="0.290" h="0.215"/>
                </FACE>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="CUI"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="dataFirstSurname" content="Primer@Apellido" threshold="0.3"/>
                    <findLineContent dst="dataSecondSurname" content="Segundo@Apellido" threshold="0.3"/>
                    <findLineContent dst="dataFirstName" content="Prenombres" threshold="0.3"/>
                    <findLineContent dst="dataGender" content="Sexo" threshold="0.3"/>
                    <findLineContent dst="dataDateOfBirth" content="Fecha@de@Nacimiento" threshold="0.2"/>
                    <findLineContent dst="dataDateOfIssue" content="Fecha@de@Emisión" threshold="0.2"/>
                    <findLineContent dst="dataVoteGroup" content="Grupo@de@Votación" threshold="0.2"/>

                    <findLineContent dst="dataCivilState" content="Estado@Civil" threshold="0.2"/>
                    <findLineContent dst="dataUbigeoOfBirth" content="Ubigeo@de@Nacimiento" threshold="0.2"/>
                    <findLineContent dst="dataDateOfExpiry" content="Fecha@de@Caducidad" threshold="0.2"/>
                    <findLineContent dst="dataOrganDonor" content="Donación@de@Órganos" threshold="0.2"/>

                    <assignIfValid dst="ln" src="dataFirstSurname" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln" src="dataSecondSurname" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln" src="dataFirstName" offset="-3" overwrite="false"/>
                    <assignIfValid dst="ln2" src="dataSecondSurname" offset="1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="dataFirstName" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="dataFirstSurname" offset="3" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataFirstName" offset="1" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataGender" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataSecondSurname" offset="3" overwrite="false"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <rejectIfNotValid src="ln"/>
                    <modifyIfValid dst="ln" op="U"/>
                    <assignField src="ln" field="LastName"/>

                    <rejectIfNotValid src="fn"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <assignIfValid dst="genderStr" src="dataGender" offset="1" overwrite="false"/>
                    <assignIfValid dst="genderStr" src="dataDateOfBirth" offset="-1" overwrite="false"/>
                    <findLineContent dst="genderStr" content="MASCULINO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="genderStr" content="FEMENINO" threshold="0.3" overwrite="false"/>
                    <assignIfContent src="genderStr" dst="gender" value="M"
                        op="distance" param="MASCULINO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="genderStr" dst="gender" value="F"
                        op="distance" param="FEMENINO" param_2="0.3"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="gender"/>
                    <assignField src="gender" field="Gender"/>

                    <assignIfValid dst="dob2" src="dataDateOfBirth" offset="1" overwrite="false"/>
                    <assignIfValid dst="dob2" src="dataDateOfIssue" offset="-1" overwrite="false"/>
                    <findLineMatch dst="dob"
                        regex="^(?:[0-9oOl]{10})(?:\s)*([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})$"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <matchIfValid src="dob2" dst="dob"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="dob"/>
                    <assignField src="dob" field="DateOfBirth"/>

                    <assignIfValid dst="doi2" src="dataDateOfIssue" offset="1" overwrite="false"/>
                    <assignIfValid dst="doi2" src="dataVoteGroup" offset="-1" overwrite="false"/>
                    <matchIfValid src="doi2" dst="doi"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="doi"/>
                    <assignField src="doi" field="DateOfIssue"/>

                    <assignIfValid dst="voteGroup2" src="dataVoteGroup" offset="1" overwrite="false"/>
                    <matchIfValid src="voteGroup2" dst="voteGroup"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                    />
                    <assignField src="voteGroup" field="VoteGroup"/>

                    <findLineContent dst="civilState2" content="SOLTERO" threshold="0.3"/>
                    <findLineContent dst="civilState2" content="CASADO" threshold="0.3"/>
                    <findLineContent dst="civilState2" content="DIVORCIADO" threshold="0.3"/>
                    <findLineContent dst="civilState2" content="VIUDO" threshold="0.3"/>
                    <assignIfValid dst="civilState2" src="dataCivilState" offset="1" overwrite="false"/>
                    <assignIfValid dst="civilState2" src="dataUbigeoOfBirth" offset="-1" overwrite="false"/>
                    <assignIfContent src="civilState2" dst="civilState" value="SOLTERO(A)"
                        op="distance" param="SOLTERO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="civilState2" dst="civilState" value="CASADO(A)"
                        op="distance" param="CASADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="civilState2" dst="civilState" value="DIVORCIADO(A)"
                        op="distance" param="DIVORCIADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="civilState2" dst="civilState" value="VIUDO(A)"
                        op="distance" param="VIUDO" param_2="0.3"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="civilState"/>
                    <assignField src="civilState" field="CivilStatus"/>

                    <assignIfValid dst="ubigeoOfBirth2" src="dataUbigeoOfBirth" offset="1" overwrite="false"/>
                    <assignIfValid dst="ubigeoOfBirth2" src="dataDateOfExpiry" offset="-1" overwrite="false"/>
                    <matchIfValid src="ubigeoOfBirth2" dst="ubigeoOfBirth"
                        regex="([0-9oOl]{6})"
                        value="([N]$1)"
                    />
                    <assignField src="ubigeoOfBirth" field="UbigeoOfBirth"/>

                    <assignIfValid dst="doe2" src="dataDateOfExpiry" offset="1" overwrite="false"/>
                    <assignIfValid dst="doe2" src="dataVoteGroup" offset="-1" overwrite="false"/>
                    <matchIfValid src="doe2" dst="doe"
                        regex="([0-9oOl]{2})(?:\s)*([0-9oOl]{2})(?:\s)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <jumpIfValid src="doe" dst="DOE_FOUND"/>
                        <assignIfContent src="doe2" dst="doe" value="31/12/9999"
                            op="distance" param="NO@CADUCA" param_2="0.3"
                            overwrite="false"
                        />
                    <label src="DOE_FOUND"/>
                    <rejectIfNotValid src="doe"/>
                    <assignField src="doe" field="DateOfExpiry"/>

                    <assignIfValid dst="organDonor2" src="dataOrganDonor" offset="1" overwrite="false"/>
                    <assignIfContent src="organDonor2" dst="organDonor" value="YES"
                        op="distance" param="SÍ" param_2="0.5"
                        overwrite="false"
                    />
                    <assignIfContent src="organDonor2" dst="organDonor" value="NO"
                        op="distance" param="NO" param_2="0.5"
                        overwrite="false"
                    />
                    <assignField src="organDonor" field="OrganDonor"/>

                    <assignResult src="$_PER/IDCard/2013" field="DocumentModel"/>

                </ML>
            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="PER"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>

                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    <findLineContent dst="dataAddressComplete" content="Departamento@Provincia@Distrito" threshold="0.3"/>
                    <findLineContent dst="dataAddress" content="Dirección" threshold="0.3"/>
                    <findLineContent dst="dataFingerprint" content="Índice@Derecho" threshold="0.3"/>
                    <assignIfValid dst="addressComplete2" src="dataAddressComplete" offset="1" overwrite="false"/>
                    <assignIfValid dst="addressComplete2" src="dataAddress" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="addressComplete2"/>
                    <matchIfValid src="addressComplete2" dst="addressComplete"
                        regex="^([\w\s]+)\/([\w\s]+)\/([\w\s]+)$"
                        value="([U]$1)/([U]$2)/([U]$3)"
                    />

                    <splitIfValid3 src="addressComplete" by="/"
                        dst1="addressDepartment"
                        dst2="addressState"
                        dst3="addressDisctict"
                        overwrite="false"
                    />
                    <assignField src="addressComplete" field="AddressComplete"/>
                    <assignField src="addressDepartment" field="addressDepartment"/>
                    <assignField src="addressState" field="AddressState"/>
                    <assignField src="addressDisctict" field="AddressDisctict"/>

                    <assignIfValid dst="address" src="dataAddress" offset="1" overwrite="false"/>
                    <assignIfValid dst="address" src="dataFingerprint" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="address"/>
                    <assignField src="address" field="Address"/>
                </ML>
            </Back>
        </Version>

        <Version id="2020" type="TD1" document_type="IDC">
            <Front>
                <FACE>
                    <region id="Signature" x="0.005" y="0.770" w="0.300" h="0.220"/>
                </FACE>
                <ML cols="4" split_by="elements" separation="0.04" space_separation="0.04">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="res1" content="REPÚBLICA@DEL@PERÚ" threshold="0.3"/>
                    <findLineContent dst="res2" content="DOCUMENTO@NACIONAL@DE@IDENTIDAD" threshold="0.3"/>
                    <rejectIfNotValid2 src="res1" src2="res2" reason="DocumentNotExpected"/>

                    <findLineMatchMultiple src="cuiStr" regex="([0-9oOl]{8})(?: *)-(?: *)([0-9oOl])"
                        overwrite="false"
                        dst1="cui"
                        value1="([N]$1)-([N]$2)"
                        dst2="cuiNumber"
                        value2="([N]$1)"
                    />
                    <rejectIfNotValid src="cui" reason="DocumentNotExpected"/>

                    <findLineContent dst="ln11" content="Primer@Apellido" threshold="0.3"/>
                    <assignIfValid dst="ln1" src="ln11" offset="+1" overwrite="false"/>
                    <findLineContent dst="ln22" content="Segundo@Apellido" threshold="0.3"/>
                    <assignIfValid dst="ln2" src="ln22" offset="+1" overwrite="false"/>

                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <findLineContent dst="fn1" content="Prenombres" threshold="0.3"/>
                    <assignIfValid dst="fn" src="fn1" offset="+1" overwrite="false"/>

                    <findLineMatch dst="gen"
                        regex="^(M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch src="genStr" dst="gen"
                        regex="(M|F) [A-Za-z]{3}$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch src="genStr" dst="gen"
                        regex="[0-9]{6} (M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch dst="nat"
                        regex="^([A-Za-z]{3})$"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="genStr" dst="nat"
                        regex="([A-Za-z]{3})"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="ecc" content="Estado@Civil" threshold="0.3"/>
                    <assignIfValid dst="ec" src="ecc" offset="+1" overwrite="false"/>
                    <findLineContent dst="cardStr" content="N@@de@Tarjeta" threshold="0.3"/>
                    <findLineMatch dst="cardNum"
                        regex="^([0-9]{9,})$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="cardNum" src="card" offset="+1" overwrite="false"/>

                    <!-- Find NO CADUCA string -->
                    <findLineContent dst="doe2" content="NO@CADUCA" threshold="0.3" overwrite="false"/>
                    <assignIfContent src="doe2" dst="doe" value="31/12/9999"
                        op="distance" param="NO@CADUCA" param_2="0.3"
                        overwrite="false"
                    />
                    <findLineMatch dst="doe" overwrite="false" mode="reverse"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch dst="doi" overwrite="false" mode="reverse"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch dst="dob" overwrite="false" mode="reverse"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />

                    <assignField src="cui" field="CUI"/>
                    <assignField src="cui" field="DocumentNumber"/>
                    <assignField src="cuiNumber" field="DocumentAdditionalNumber"/>
                    <assignField src="ln1" field="LastName1"/>
                    <assignField src="ln2" field="LastName2"/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="fn" field="FirstName"/>
                    <assignField src="gen" field="Gender"/>
                    <assignField src="nat" field="Nationality"/>
                    <assignField src="dob" field="DateOfBirth"/>
                    <assignField src="ec" field="CivilStatus"/>
                    <assignField src="cardNum" field="IDCardNumber"/>
                    <assignField src="doe" field="DateOfExpiry"/>
                    <assignField src="doi" field="DateOfIssue"/>

                    <assignResult src="$_PER/IDCard/2020" field="DocumentModel"/>

                </ML>
            </Front>

            <Back>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.001">
                    <findLineContent dst="dataVoteGroup" content="Grupo@de@Votación" threshold="0.3"/>
                    <assignIfValid dst="voteGroup" src="dataVoteGroup" offset="+1" overwrite="false"/>
                    <findLineMatch dst="ubigeoOfBirth"
                        regex="([0-9]{6})"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent dst="dataOrganDonor" content="Donación@de@Órganos@@@" threshold="0.3"/>
                    <matchIfValid src="dataOrganDonor" dst="organDonor"
                        regex="(SÍ|NO)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent dst="dataAddressComplete" content="Departamento@Provincia@Distrito" threshold="0.3"/>
                    <assignIfValid dst="addressCompletee" src="dataAddressComplete" offset="+1" overwrite="false"/>
                    <!-- <rejectIfNotValid src="addressCompletee"/> -->
                    <matchIfValid src="addressCompletee" dst="addressComplete"
                        regex="^([\w\s]+)\/([\w\s]+)\/([\w\s]+)$"
                        value="([U]$1)/([U]$2)/([U]$3)"
                    />
                    <splitIfValid3 src="addressComplete" by="/"
                        dst1="addressDepartment"
                        dst2="addressState"
                        dst3="addressDisctict"
                        overwrite="false"
                    />
                    <findLineFrom dst="addres1" src="dataOrganDonor" direction="RIGHT" overwrite="false"/>
                    <assignIfValid dst="addres2" src="addres1" offset="1" overwrite="false"/>
                    <assignIfValid dst="address" src="addres1"/>
                    <concatenateIfValid dst="address" src="addres2" prefix=" " suffix=""/>

                    <assignField src="voteGroup" field="VoteGroup"/>
                    <assignField src="ubigeoOfBirth" field="UbigeoOfBirth"/>
                    <assignField src="organDonor" field="OrganDonor"/>
                    <assignField src="address" field="Address"/>
                    <assignField src="addressComplete" field="AddressComplete"/>
                    <assignField src="addressDepartment" field="addressDepartment"/>
                    <assignField src="addressState" field="AddressState"/>
                    <assignField src="addressDisctict" field="AddressDisctict"/>

                    <!-- Let's find MRZ via ML -->
                    <findLineMatch src="mrzStr" dst="mrz1" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <findLineMatch src="mrzStr" dst="mrz2" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <findLineMatch src="mrzStr" dst="mrz3" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <replaceIfValid dst="mrz1" content=" " replace=""/>
                    <replaceIfValid dst="mrz2" content=" " replace=""/>
                    <replaceIfValid dst="mrz3" content=" " replace=""/>
                    <!-- We check if it issuer is PER -->
                    <matchIfValid src="mrz1" dst="isPer" overwrite="false"
                    regex="(I.PER)"
                    value="Y"
                    />
                    <rejectIfNotValid src="isPer"/>

                    <matchIfValidMultiple src="mrz1" regex="(I.)(PER)([0-9OolI]{8})" 
                    overwrite="false"
                    dst1="docCode"
                    value1="I"
                    dst2="issuer"
                    value2="PER"
                    dst3="docNum"
                    value3="([N]$3)"
                    dst4="nfck"
                    value4="([N]$3)&lt;"
                    />
                    <matchIfValidMultiple src="mrz2" regex="([0-9]{2})([0-9]{2})([0-9]{2})[0-9]([MF])([0-9]{2})([0-9]{2})([0-9]{2})[0-9]([A-Z]{3})" 
                    overwrite="false"
                    dst1="dob"
                    value1="($3)/($2)/([YP]$1)"
                    dst2="sex"
                    value2="($4)"
                    dst3="doe"
                    value3="($7)/($6)/([YF]$5)"
                    dst4="nat"
                    value4="($8)"
                    />

                    <assignField src="docCode" field="DocumentCode"/>
                    <assignField src="issuer" field="Issuer"/>
                    <assignField src="docNum" field="DocumentAdditionalNumber"/>
                    <assignField src="nfck" field="NfcKey"/>

                    <assignField src="dob" field="DateOfBirth"/>
                    <assignField src="sex" field="Gender"/>
                    <assignField src="doe" field="DateOfExpiry"/>
                    <assignField src="nat" field="Nationality"/>

                </ML>

                <MRZ optional="yes">
                    <field id="DocumentCode"              line="1" starts="1" count="2"/>
                    <field id="Issuer"                    line="1" starts="3" count="3" regex="PER"/>
                    <field id="DocumentAdditionalNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"                      line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"               line="2" starts="1" count="6"/>
                    <field id="Gender"                    line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"              line="2" starts="9" count="6"/>
                    <field id="Nationality"               line="2" starts="16" count="3"/>
                    <field id="Opt2"                      line="2" starts="19" count="11"/>
                    <field id="LastName"                  line="3" starts="1" count="??"/>
                    <field id="FirstName"                 line="3" starts="??" count="30"/>

                    <field id="NfcKey"                    line="1" starts="6" count="9"/>
                </MRZ>

                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                
            </Back>
        </Version>
    </DocumentID>
    
    <DocumentID id="AR" iso="ARG">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE>
                    <region id="Signature" x="0.305" y="0.440" w="0.250" h="0.170"/>
                </FACE>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="ARG"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineContent dst="ram" content="REPUBLICA@ARGENTINA@@@MERCOSUR" threshold="0.3"/>
                    <findLineContent dst="dni" content="DOCUMENTO@NACIONAL@DE@IDENTIDAD" threshold="0.3"/>
                    <findLineContent dst="rnp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <rejectIfNotValid3 src="ram" src2="dni" src3="rnp" reason="DocumentNotExpected"/>

                    <findLineContent dst="ape" content="APELLIDO@S" threshold="0.3"/>
                    <findLineContent dst="nom" content="NOMBRE@S" threshold="0.3"/>
                    <findLineContent dst="doc" content="NUMERO@DE@DOCUMENTO" threshold="0.3"/>

                    <assignIfValid dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="nom" offset="-1" overwrite="false"/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="doc" offset="-1" overwrite="false"/>

                    <assignIfValid dst="docStr" src="doc" offset="+1" overwrite="false"/>
                    <matchIfValid src="docStr" dst="docNumber"
                        regex="([MF0-9]+)[\.\-:, ]?([0-9]{3})[\.\-:, ]?([0-9]{3})"
                        value="([N]$1)([N]$2)([N]$3)"
                        overwrite="false"
                    />

                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <modifyIfValid dst="ln" op="U"/>
                    <assignField src="ln" field="LastName"/>

                    <assignField src="docNumber" field="DocumentNumber"/>
                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                    <region id="Fingerprint" x="0.644" y="0.020" w="0.276" h="0.571"/>
                </OCR>
                <PDF417 decode="splitBy:@" charset="UTF-8">
                    <!-- Data0 is always empty in this case -->
                    <field id="DocumentNumber"       data="1"/>
                    <field id="Example"              data="2"/>
                    <field id="Data3"                data="3"/>
                    <field id="LastName"             data="4"/>
                    <field id="FirstName"            data="5"/>
                    <field id="NationalityCountry"   data="6"/>
                    <field id="DateOfBirth"          data="7"/>
                    <field id="Gender"               data="8"/>
                    <field id="DateOfIssue"          data="9"/>
                    <field id="NroTramite"           data="10"/>
                    <field id="OfIdent"              data="11"/>
                    <field id="DateOfExpiry"         data="12"/>
                    <field id="Data13"               data="13"/>
                    <field id="Data14"               data="14"/>
                </PDF417>
                <ML cols="6" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineContent dst="addressStr" content="DOMICILIO@#" threshold="0.3"/>
                    <replaceIfValid dst="address" src="addressStr" content="DOMICILIO@" replace="" threshold="0.3"/>
                    <replaceIfValid dst="address" content=":" replace=""/>
                    <rejectIfNotValid src="address"/>

                    <assignIfValid dst="address2" src="addressStr" offset="+1"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" " suffix=""/>
                    <assignField src="address" field="Address"/>

                    <findLineContent dst="pobStr" content="FECHA@Y@LUGAR@DE@NACIMIENTO@#" threshold="0.3"/>
                    <assignIfValid dst="pob" src="pobStr" offset="+1"/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <matchIfValid src="pobStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                </ML>

            </Back>
        </Version>
        
        <Version id="v2" type="TD1" document_type="IDC">
            <Front>
                <FACE>
                    <region id="Signature" x="0.657" y="0.500" w="0.335" h="0.179"/>
                </FACE>
                <PDF417 decode="splitBy:@" charset="UTF-8">
                    <field id="NroTramite"        data="0"/>
                    <field id="LastName"          data="1"/>
                    <field id="FirstName"         data="2"/>
                    <field id="Gender"            data="3"/>
                    <field id="DocumentNumber"    data="4"/>
                    <field id="Example"           data="5"/>
                    <field id="DateOfBirth"       data="6"/>
                    <field id="DateOfIssue"       data="7"/>
                    <field id="CuilCode"          data="8" optional="yes"/>
                </PDF417>
                <ML cols="4" split_by="elements" separation="0.04" space_separation="0.10">
                    
                    <findLineContent dst="ram" content="REPUBLICA@ARGENTINA@@@MERCOSUR" threshold="0.3"/>
                    <findLineContent dst="rnp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <findLineContent dst="mit" content="MINISTERIO@DEL@INTERIOR@Y@TRANSPORTE" threshold="0.3"/>
                    <rejectIfNotValid3 src="ram" src2="rnp" src3="mit" reason="DocumentNotExpected"/>

                    <findLineContent dst="ape" content="Apellido@@@Surname" threshold="0.3"/>
                    <findLineContent dst="nom" content="Nombre@@@Name" threshold="0.3"/>
                    <findLineContent dst="doc" content="Documento@@@Document" threshold="0.3"/>

                    <assignIfValid dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="nom" offset="-1" overwrite="false"/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="ape" offset="+3" overwrite="false"/>

                    <assignIfValid dst="docStr" src="doc" offset="+1" overwrite="false"/>
                    <matchIfValid src="docStr" dst="docNumber"
                        regex="^([1-9MF][0-9]+)[\.\-:, ]?([0-9]{3})[\.\-:, ]?([0-9]{3})"
                        value="($1)([N]$2)([N]$3)"
                        overwrite="false"
                    />
                    <findLineMatch src="docStr" dst="docNumber"
                        regex="^([MF1-9][0-9]+)[\.\-:, ]?([0-9]{3})[\.\-:, ]?([0-9]{3})"
                        value="($1)([N]$2)([N]$3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>

                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <modifyIfValid dst="ln" op="U"/>
                    <assignField src="ln" field="LastName"/>

                    <assignField src="docNumber" field="DocumentNumber"/>
                </ML>
            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="ARG"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>

                    <region id="Fingerprint" x="0.764" y="0.023" w="0.223" h="0.505"/>
                </MRZ>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineContent dst="addressStr" content="DOMICILIO@#" threshold="0.3"/>
                    <replaceIfValid dst="address" src="addressStr" content="DOMICILIO@" replace="" threshold="0.3"/>
                    <replaceIfValid dst="address" content=":" replace=""/>
                    <rejectIfNotValid src="address"/>

                    <assignIfValid dst="address2" src="addressStr" offset="+1"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" " suffix=""/>
                    <assignField src="address" field="Address"/>

                    <findLineContent dst="pobStr" content="LUGAR@DE@NACIMIENTO@#" threshold="4"/>
                    <replaceIfValid dst="pobStr" content="LUGAR" replace="" threshold="0.3"/>
                    <replaceIfValid dst="pobStr" content="DE" replace="" threshold="0.3"/>
                    <replaceIfValid dst="pobStr" content="NACIMIENTO" replace="" threshold="0.3"/>
                    <modifyIfValid src="pobStr" dst="pob" op="T"/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <jumpIfValid src="pob" dst="NO_DOB"/>

                    <findLineContent dst="pobStr" content="FECHA@Y@LUGAR@DE@NACIMIENTO@#" threshold="4"/>
                    <assignIfValid dst="pob" src="pobStr" offset="+1"/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <matchIfValid src="pobStr" dst="DoB"
                        regex="([0-9]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <label src="NO_DOB"/>

                </ML>
            </Back>
        </Version>
    </DocumentID>
        
    <DocumentID id="SV" iso="SLV">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch dst="docNumber"
                        regex="([0-9]{8})-([0-9])"
                        value="($1)-($2)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="rds" content="República@de@El@Salvador" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="rds" content="REPÚBLICA@DE@EL@SALVADOR" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dui" content="Documento@Único@de@Identidad@@@ID" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="dui" content="Documento@Único@de@Identidad" threshold="0.2" overwrite="false"/>

                    <findLineContent dst="as" content="Apellidos@@@Surname" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="ng" content="Nombre@@@Given@Names" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="ng" content="Nombres@@@Given@Names" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="ck" content="Conocido@por@@@Known@by" threshold="0.2"/>

                    <assignIfValid dst="ln" src="ng" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fn" src="ng" offset="+1" overwrite="false"/>

                    <assignIfValid dst="ln" src="ck" offset="-3" overwrite="false"/>
                    <assignIfValid dst="fn" src="ck" offset="-1" overwrite="false"/>

                    <assignIfValid dst="ln" src="as" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="as" offset="+3" overwrite="false"/>

                    <rejectIfNotValid src="ln"/>
                    <rejectIfNotValid src="fn"/>

                    <assignField src="ln" field="LastName"/>
                    <assignField src="fn" field="FirstName"/>

                    <findLineMatch dst="gender"
                        regex="^(M|F)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="gender" field="Gender"/>

                    <findLineContent dst="ggss" content="Género@@@Gender@Salvadoreño@por@@@Salvadorean@by" threshold="0.3" overwrite="false"/>
                    <assignIfValid dst="sby" src="ggss" offset="+1" overwrite="false"/>
                    <assignIfValid dst="sby" src="ggss" offset="+2" overwrite="false"/>
                    <assignField src="sby" field="SalvadoreanBy"/>
                    
                    <findLineContent dst="fln" content="Lugar@y@Fecha@de@Nacimiento@@@Place@and@Date@of@Birth" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="fln" content="Fecha@y@Lugar@de@Nacimiento@@@Date@and@Place@of@Birth" threshold="0.3" overwrite="false"/>
                    <assignIfValid dst="DoBStr" src="fln" offset="+1"/>
                    <matchIfValid dst="DoB" src="DoBStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoB" src="DoBStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth" block="true"/>

                    <findLineContent dst="fle" content="Lugar@y@Fecha@de@Expedición@@@Place@and@Date@of@Issuance" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="fle" content="Fecha@y@lugar@de@expedición@@@Date@and@place@of@issuance" threshold="0.3" overwrite="false"/>
                    <assignIfValid dst="DoIStr" src="fle" offset="+1"/>
                    <matchIfValid dst="DoI" src="DoIStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <jumpIfValid src="DoI" dst="DOI_IN_ISSUANCE_LINE"/>
                        <assignIfValid dst="PoI" src="DoIStr" overwrite="false"/>
                    <label src="DOI_IN_ISSUANCE_LINE"/>
                    <findLineMatch dst="DoI" src="DoIStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue" block="true"/>

                    <findLineContent dst="nui" content="Número@Único@de@Identidad" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Unique@Id@Number" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Firma@o@Huella@del@Titular@Registro@Nacional@de" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Firma@o@Huella@del@Titular" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Holder@s@Signature" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Registradora@Nacional@de@las@Personas@Naturales" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Registro@Nacional@de" threshold="0.3"/>
                    <findLineContent dst="dummy" content="las@Personas@Naturales" threshold="0.3"/>
                    <findLineContent dst="dummy" content="Fecha@de@expiración@@@Date@of@expiration" threshold="0.3"/>

                    <matchIfValid dst="DoE" src="nui"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoE" src="DoEStr"
                        regex="([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry" block="true"/>

                    <matchIfValid dst="PoB" src="DoBStr"
                        regex="(.*) ?([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3}) ?(.*)"
                        value="($1)($5)"
                        overwrite="false"
                    />
                    <assignField src="PoB" field="PlaceOfBirth"/>

                    <matchIfValid dst="PoI" src="DoIStr"
                        regex="(.*) ?([0-9]{2})(?: |1|\/|-|\.)*([0-9]{2})(?: |1|\/|-|\.)*([1-2][0-9]{3}) ?(.*)"
                        value="($1)($5)"
                        overwrite="false"
                    />
                    <assignField src="PoI" field="PlaceOfIssue"/>

                </ML>
            </Front>
            <Back>
                <PDF417 optional="yes" timeout="6" decode="splitBy:||" charset="UTF-8">
                    <field id="DocumentNumber"    data="0"/>
                    <field id="LastName"          data="1"/>
                    <field id="FirstName"         data="2"/>
                    <field id="Data3"             data="3"/>
                    <field id="Data4"             data="4"/>
                    <field id="AddressCity"       data="5"/>
                    <field id="AddressState"      data="6"/>
                    <field id="BloodType"         data="7"/>
                    <field id="Gender"            data="8"/>
                    <field id="DateOfBirth"       data="9"/>
                    <field id="DateOfExpiry"      data="10"/>
                    <field id="Data11"            data="11"/>
                    <field id="MaritalStatus"     data="12"/>
                    <field id="ZipCode"           data="13"/>
                </PDF417>
                <MRZ optional="yes">
                    <field id="DocumentCode"      line="1" starts="1" count="2"/>
                    <field id="Issuer"            line="1" starts="3" count="3" regex="SLV"/>
                    <field id="DocumentNumber"    line="1" starts="6" count="9"/>
                    <field id="NUI_N"             line="1" starts="16" count="1"/>
                    <field id="Opt1"              line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"       line="2" starts="1" count="6"/>
                    <field id="Gender"            line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"      line="2" starts="9" count="6"/>
                    <field id="Nationality"       line="2" starts="16" count="3"/>
                    <field id="Opt2"              line="2" starts="19" count="11"/>
                    <field id="LastName"          line="3" starts="1" count="??"/>
                    <field id="FirstName"         line="3" starts="??" count="30"/>

                    <field id="NfcKey"            line="1" starts="6" count="9"/>
                </MRZ>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="3" split_by="lines" separation="0.04" space_separation="0.10">
                    <findLineContent dst="res" content="Residencia@@@Address" threshold="0.3"/>
                    <findLineContent dst="municipio" content="Municipio@@@City" threshold="0.3"/>
                    <findLineContent dst="departamento" content="Departamento@@@State" threshold="0.3"/>
                    <findLineContent dst="tram" content="Trámite@@@Procedure@Type" threshold="0.3"/>
                    <findLineContent dst="zona" content="Código@de@Zona@@@Zip@Code" threshold="0.3"/>
                    <findLineContent dst="ef" content="Estado@Familiar@@@Marital@Status" threshold="0.3"/>
                    
                    <assignIfValid dst="address" src="res" offset="+1" overwrite="false"/>
                    <assignIfValid dst="address" src="res" offset="+2" overwrite="false"/>
                    <assignField src="address" field="Address"/>

                    <assignIfValid dst="city" src="municipio" offset="+1"/>
                    <assignField src="city" field="City"/>

                    <assignIfValid dst="state" src="departamento" offset="+1"/>
                    <assignField src="state" field="State"/>

                    <assignIfValid dst="procedure" src="tram" offset="+1"/>
                    <assignField src="procedure" field="ProcedureType"/>

                    <findLineMatch dst="zipcode"
                        regex="^([0-9OIlSBA]{9})([A-Za-z]?)$"
                        value="([N]$1)([U]$2)"
                        overwrite="false"
                    />
                    <assignIfValid dst="zipcode" src="zona" offset="+1" overwrite="false"/>
                    <assignField src="zipcode" field="ZipCode"/>

                    <assignIfValid dst="ms" src="ef" offset="+1"/>
                    <assignField src="ms" field="MaritalStatus"/>

                    <findLineContent dst="ndlm" content="Nombre@de@la@Madre@@@Mother@s@Name" threshold="0.3"/>
                    <assignIfValid dst="mother" src="ndlm" offset="+1"/>
                    <assignField src="mother" field="MotherName"/>

                    <findLineContent dst="ndp" content="Nombre@del@Padre@@@Father@s@Name" threshold="0.3"/>
                    <assignIfValid dst="father" src="ndp" offset="+1"/>
                    <assignField src="father" field="FatherName"/>

                    <findLineMatch dst="blood" src="bloodStr"
                        regex="^(AB|A|B|[0Oo]) ?[RPB][HA8] ?([+-])$"
                        value="([U]$1) RH ($2)"
                        overwrite="false"
                    />
                    <assignField src="blood" field="BloodType"/>

                    <findLineMatch dst="proctype"
                        regex="^([A-Za-z]{2})-([0-9OIlSBA])$"
                        value="([U]$1)-([N]$2)"
                        overwrite="false"
                    />
                    <assignField src="proctype" field="ProcedureType"/>

                    <findLineMatch dst="nit"
                        regex="^([0-9OIlSBA]{4})-([0-9OIlSBA]{6})-([0-9OIlSBA]{3})-([0-9OIlSBA])$"
                        value="([N]$1)-([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <assignField src="nit" field="NIT"/>

                    <!-- Let's find MRZ via ML -->
                    <findLineMatch src="mrzStr" dst="mrz1" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <findLineMatch src="mrzStr" dst="mrz2" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <findLineMatch src="mrzStr" dst="mrz3" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <replaceIfValid dst="mrz1" content=" " replace=""/>
                    <replaceIfValid dst="mrz2" content=" " replace=""/>
                    <replaceIfValid dst="mrz3" content=" " replace=""/>
                    <!-- We check the issuer -->
                    <matchIfValid src="mrz1" dst="matchesIssuer" overwrite="false"
                    regex="([Il].SLV)"
                    value="Y"
                    />
                    <rejectIfNotValid src="matchesIssuer"/>

                    <matchIfValidMultiple src="mrz1" overwrite="false"
                    regex="([Il].)([A-Z]{3})([A-Z0-9OolI&lt;]{9})"                         
                    dst1="docCode"
                    value1="($1)"
                    dst2="issuer"
                    value2="($2)"
                    dst3="docNum"
                    value3="($3)"
                    dst4="nfck"
                    value4="($3)"
                    />
                    <matchIfValidMultiple src="mrz2" overwrite="false"
                    regex="([0-9]{2})([0-9]{2})([0-9]{2})[0-9]([MF&lt;])([0-9]{2})([0-9]{2})([0-9]{2})[0-9]([A-Z]{3})"                         
                    dst1="dob"
                    value1="($3)/($2)/([YP]$1)"
                    dst2="sex"
                    value2="($4)"
                    dst3="doe"
                    value3="($7)/($6)/([YF]$5)"
                    dst4="nat"
                    value4="($8)"
                    />

                    <replaceIfValid dst="docNum" content="&lt;" replace=" "/>
                    <replaceIfValid dst="sex" content="&lt;" replace=" "/>

                    <assignField src="docCode" field="DocumentCode"/>
                    <assignField src="issuer" field="Issuer"/>
                    <assignField src="docNum" field="DocumentNumber"/>
                    <assignField src="nfck" field="NfcKey"/>

                    <assignField src="dob" field="DateOfBirth"/>
                    <assignField src="sex" field="Gender"/>
                    <assignField src="doe" field="DateOfExpiry"/>
                    <assignField src="nat" field="Nationality"/>                    

                    <findLineContent dst="csn" content="Cónyuge@@@Spouse@s@Name" threshold="0.3"/>
                    <assignIfValid dst="spouse" src="csn" offset="+1"/>
                    <assignField src="spouse" field="SpouseName"/>

                    <findLineContent dst="prof" content="Profesion@Oficio@@@Profession@Trade" threshold="0.3"/>
                    <assignIfValid dst="profofi" src="prof" offset="+1"/>
                    <assignField src="profofi" field="Profession"/>

                </ML>
            </Back>

        </Version>
    </DocumentID>

    <DocumentID id="EC" iso="ECU">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="4" split_by="lines" separation="0.04" space_separation="0.10">

                    <postProcessImage dst=""
                        nonLinear="true"
                        rMin="0.000" rMax="0.999"
                        gMin="0.000" gMax="0.999"
                        bMin="0.000" bMax="0.999"
                    />

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{9})-([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent dst="dataRepublicaEcuador" content="REPUBLICA@DEL@ECUADOR" threshold="0.3"/>
                    <findLineContent dst="dataDireccionGeneral" content="DIRECCION@GENERAL@DE@REGISTRO@CIVIL" threshold="0.3"/>
                    <findLineContent dst="dataIdentificacionYCedulacion" content="IDENTIFICACION@Y@CEDULACION" threshold="0.3"/>
                    <findLineContent dst="dataCedulaDe" content="CEDULA@DE" threshold="0.3"/>
                    <findLineContent dst="dataSurnameAndName" content="APELLIDOS@Y@NOMBRE" threshold="0.3"/>
                    <findLineContent dst="dataPlaceOfBirth" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent dst="dataDateOfBirth" content="FECHA@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent dst="dataNationality" content="NACIONALIDAD" threshold="0.3"/>
                    <findLineContent dst="dataSign" content="FIRMA@DEL@CEDULADO" threshold="0.3"/>

                    <assignIfValid dst="fn" src="dataSurnameAndName" offset="+2" overwrite="false"/>
                    <assignIfValid dst="fn" src="dataPlaceOfBirth" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="fn"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <assignIfValid dst="ln" src="dataSurnameAndName" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="dataPlaceOfBirth" offset="-2" overwrite="false"/>
                    <rejectIfNotValid src="ln"/>
                    <modifyIfValid dst="ln" op="U"/>
                    <assignField src="ln" field="LastName"/>


                    <findLineMatch src="lineDob" dst="dob"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfNotValid src="dob"/>
                    <assignField src="dob" field="DateOfBirth"/>

                    <assignIfValid dst="pob" src="dataPlaceOfBirth" offset="+1"/>
                    <assignIfValid dst="pob1" src="dataPlaceOfBirth" offset="+2"/>
                    <assignIfValid dst="pob2" src="dataPlaceOfBirth" offset="+3"/>
                    <concatenateIfValid dst="pob" src="pob1" prefix=" - " suffix=""/>
                    <concatenateIfValid dst="pob" src="pob2" prefix=" - " suffix=""/>
                    <rejectIfNotValid src="pob"/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <assignIfValid dst="lineNationality" src="lineDob" offset="+1" overwrite="false"/>
                    <replaceIfValid src="lineNationality" dst="nationality" content="NACIONALIDAD" replace="" threshold="0.3"/>
                    <assignIfContent dst="nationalityJump" src="nationality" value="JUMP"
                        op="not_equal_length" param="$lineNationality" param_2="0.2"
                        overwrite="false"
                    />
                    <jumpIfNotValid src="nationalityJump" dst="jumpNationality"/>
                    <modifyIfValid dst="nationality" op="U"/>
                    <assignField src="nationality" field="Nationality"/>

                    <assignIfValid dst="dataSex" src="lineNationality" offset="+1"/>
                    <assignIfContent src="dataSex" dst="sex" value="M"
                        op="distance" param="SEXO HOMBRE" param_2="0.2"
                        overwrite="false"
                    />
                    <assignIfContent src="dataSex" dst="sex" value="F"
                        op="distance" param="SEXO MUJER" param_2="0.2"
                        overwrite="false"
                    />
                    <assignIfContent3 src="dataSex" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        op3="not_contains" param3="H"
                        overwrite="false"
                    />
                    <assignIfContent2 src="dataSex" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>

                    <label src="jumpNationality"/>

                    <findLineContent dst="civiStatus" content="ESTADO@CIVIL#" threshold="0.3"/>
                    <replaceIfValid dst="civiStatus" content="ESTADO" replace="" threshold="2"/>
                    <replaceIfValid dst="civiStatus" content="CIVIL" replace="" threshold="2"/>
                    <modifyIfValid dst="civiStatus" op="T,U"/>
                    <assignField src="civiStatus" field="CivilStatus"/>
                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>

                    <findLineMatch dst="fingerprint"
                        regex="^([a-zA-Z0-9])([0-9]{4})([a-zA-Z0-9])([0-9]{4})$"
                        value="([U]$1)($2)([U]$3)($4)"
                    />
                    <rejectIfNotValid src="fingerprint"/>
                    <assignField src="fingerprint" field="FingerprintCode"/>

                    <findLineContent dst="ins" content="INSTRUCCIÓN" threshold="0.2"/>
                    <findLineContent dst="prof" content="PROFESIÓN@@@OCUPACIÓN" threshold="0.2"/>
                    <findLineContent dst="ap" content="APELLIDOS@Y@NOMBRES@DEL@PADRE" threshold="0.2"/>
                    <findLineContent dst="am" content="APELLIDOS@Y@NOMBRES@DE@LA@MADRE" threshold="0.2"/>
                    <findLineContent dst="lfi" content="LUGAR@Y@FECHA@DE@EXPEDICIÓN" threshold="0.2"/>
                    <findLineContent dst="fe" content="FECHA@DE@EXPIRACIÓN" threshold="0.2"/>
                    <rejectIfNotValid src="lfi" reason="DocumentNotExpected"/>
                    <rejectIfNotValid src="fe" reason="DocumentNotExpected"/>

                    <assignIfValid dst="poi" src="lfi" offset="+1"/>
                    <matchIfValid dst="poiError"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfValid src="poiError"/>
                    <modifyIfValid dst="poi" op="U"/>
                    <assignField src="poi" field="PlaceOfIssue"/>

                    <assignIfValid dst="doi" src="fe" offset="-1" overwrite="false"/>
                    <assignIfValid dst="doi" src="lfi" offset="+2" overwrite="false"/>
                    <matchIfValid dst="doi"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfNotValid src="doi"/>
                    <assignField src="doi" field="DateOfIssue"/>

                    <assignIfValid dst="doe" src="fe" offset="+1"/>
                    <matchIfValid dst="doe"
                        regex="([1-2l][0-9oOl]{3})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})"
                        value="([N]$3)/([N]$2)/([N]$1)"
                    />
                    <rejectIfNotValid src="doe"/>
                    <assignField src="doe" field="DateOfExpiry"/>
                </ML>
            </Back>
        </Version>

        <Version id="v2" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="2" split_by="elements" separation="0.04" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="rde" content="REPUBLICA@DEL@ECUADOR" threshold="0.3"/>
                    <findLineContent dst="crde" content="CEDULA@REPUBLICA@DEL@ECUADOR" threshold="0.3"/>
                    <findLineContent dst="dgrc" content="DIRECCION@GENERAL@DE@REGISTRO@CIVIL@@IDENTIFICACION@Y@CEDULACION" threshold="0.3"/>
                    <rejectIfNotValid2 src="rde" src2="crde" reason="DocumentNotExpected"/>
                    <rejectIfNotValid src="dgrc" reason="DocumentNotExpected"/>

                    <findLineContent dst="ape" content="APELLIDOS" threshold="0.3"/>
                    <findLineContent dst="nom" content="NOMBRES" threshold="0.3"/>
                    <findLineContent dst="nac" content="NACIONALIDAD" threshold="0.3"/>
                    <findLineContent dst="fdn" content="FECHA@DE@NACIMIENTO" threshold="0.2"/>
                    <findLineContent dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.2"/>
                    <findLineContent dst="fdt" content="FIRMA@DEL@TITULAR" threshold="0.2"/>
                    <findLineContent dst="sex" content="SEXO" threshold="0.3"/>
                    <findLineContent dst="doc" content="No@@DOCUMENTO" threshold="0.3"/>
                    <findLineContent dst="fdv" content="FECHA@DE@VENCIMIENTO" threshold="0.3"/>
                    <findLineContent dst="natcanStr" content="NAT@CAN" threshold="0.3"/>

                    <assignIfValid dst="ln1" src="ape" offset="+1"/>
                    <assignIfValid dst="ln2" src="ape" offset="+2"/>
                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <rejectIfNotValid src="ln"/>
                    <assignField src="ln1" field="LastName1"/>
                    <assignField src="ln2" field="LastName2"/>
                    <assignField src="ln" field="LastName"/>

                    <assignIfValid dst="fn" src="nom" offset="+1"/>
                    <rejectIfNotValid src="fn"/>
                    <assignField src="fn" field="FirstName"/>

                    <assignIfValid dst="nationality" src="nac" offset="+1"/>
                    <assignField src="nationality" field="Nationality"/>

                    <findLineMatch src="DoBStr" dst="DoB"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <assignIfValid dst="pob" src="ldn" offset="+1"/>
                    <assignIfValid dst="pob2" src="ldn" offset="+2"/>
                    <concatenateIfValid dst="pob" src="pob2" prefix=" - " suffix=""/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <findLineContent dst="sexStr" content="HOMBRE" threshold="1" overwrite="false"/>
                    <findLineContent dst="sexStr" content="MUJER" threshold="1" overwrite="false"/>
                    <assignIfContent src="sexStr" dst="sexo" value="M"
                        op="distance" param="HOMBRE" param_2="1"
                        overwrite="false"
                    />
                    <assignIfContent src="sexStr" dst="sexo" value="F"
                        op="distance" param="MUJER" param_2="1"
                        overwrite="false"
                    />
                    <assignField src="sexo" field="Gender"/>

                    <findLineMatch dst="nui"
                        regex="^[a-zA-Z]{3}\.?([0-9]{10})$"
                        value="([N]$1)"
                    />
                    <rejectIfNotValid src="nui"/>
                    <assignField src="nui" field="NUI"/>
    
                    <findLineMatch dst="docNumber"
                        regex="^([0-9]{9})$"
                        value="([N]$1)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="DoEStr" dst="DoE"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <assignIfValid dst="natcan" src="natcanStr" offset="+1"/>
                    <assignField src="natcan" field="NAT_CAN"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="ECU"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="NUI"             line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ> 

                <ML cols="2" split_by="elements" separation="0.10" space_separation="0.10">
                    
                    <findLineMatch dst="fingerprint"
                        regex="^([a-zA-Z0-9])([0-9]{4})([a-zA-Z0-9])([0-9]{4})$"
                        value="([U]$1)($2)([U]$3)($4)"
                    />
                    <rejectIfNotValid src="fingerprint"/>
                    <assignField src="fingerprint" field="FingerprintCode"/>

                    <findLineContent dst="ecivil" content="ESTADO@CIVIL" threshold="0.3"/>
                    <assignIfValid dst="maritalStatus" src="ecivil" offset="+1"/>
                    <assignField src="maritalStatus" field="MaritalStatus"/>

                    <findLineMatch src="DoIStr" dst="DoI"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                </ML>
            </Back>
        </Version>

    </DocumentID>

    <DocumentID id="HN" iso="HND">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <BARCODE optional="yes"/>
                <ML cols="3" split_by="elements" separation="0.10" space_separation="0.02">

                    <postProcessImage dst=""
                        rMin="0.000" rMax="1.000"
                        gMin="0.000" gMax="1.000"
                        bMin="0.150" bMax="0.850"
                        rWeight="0.000"
                        gWeight="0.000"
                        bWeight="1.000"
                    />

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <!-- We check for drivers license -->
                    <findLineContent dst="dndt" content="DIRECCIÓN@NACIONAL@DE@TRÁNSITO" threshold="0.3"/>
                    <findLineContent dst="ldc" content="Licencia@de@Conducir" threshold="0.3"/>
                    <rejectIfValid src="dndt"/>
                    <rejectIfValid src="ldc"/>

                    <findLineMatch dst="docNumber"
                        regex="([a-zA-Z0-9]{4})-([a-zA-Z0-9]{4})-([a-zA-Z0-9]{5})"
                        value="([N]$1)-([N]$2)-([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent dst="rdh" content="REPUBLICA@DE@HONDURAS" threshold="0.3"/>
                    <findLineContent dst="rndlp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <findLineContent dst="tdi" content="TARJETA@DE@IDENTIDAD" threshold="0.3"/>
                    <rejectIfNotValid3 src="rdh" src2="rndlp" src3="tdi" reason="DocumentNotExpected"/>

                    <findLineContent dst="hon_por" content="HONDUREÑ@ POR :#" threshold="0.2"/>
                    <replaceIfValid dst="hon_por" content=":" replace=""/>
                    <replaceIfValid dst="hon_por" content="HONDUREÑ@" replace="" threshold="0.2"/>
                    <replaceIfValid dst="hon_por" content="POR" replace="" threshold="0.2"/>
                    <assignField src="hon_por" field="HonduranBy"/>

                    <findLineContent dst="DoBStr" content="NACIO@EL#" threshold="0.3"/>
                    <matchIfValid src="DoBStr" dst="DoB"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineContent dst="sexStr" content="SEXO#" threshold="1"/>
                    <assignIfContent src="sexStr" dst="sex" value="M"
                        op="distance" param="SEXO@@MASCULINO" param_2="3"
                        overwrite="false"
                    />
                    <assignIfContent src="sexStr" dst="sex" value="F"
                        op="distance" param="SEXO@@FEMENINO" param_2="3"
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>
                    

                    <findLineContent dst="DoIStr" content="EMITIDA@EL#" threshold="0.3"/>
                    <matchIfValid src="DoIStr" dst="DoI"
                        regex="([0-9lIoOSs]{2})(?:,|\.|\/|-| )?([a-zA-Z0-9]{3})(?:[a-zA-Z0-9]*)(?:,|\.|\/|-| )?([0-9lIoOSs]{4})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="fullN" src="tdi" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="hon_por" offset="-1" overwrite="false"/>
                    <splitIfValid2 src="fullN" by="/"
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <splitIfValid2 src="fullN" by=" I "
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <assignField src="fn" field="FirstName"/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="fullN" field="FullName"/>
                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <PDF417 decode="splitBy:," charset="UTF-8">
                    <field id="Barcode"           data="0"/>
                    <field id="Barcode#"          data="1"/>
                    <field id="DocumentNumber#"   data="2"/>
                    <field id="FirstName1"        data="3"/>
                    <field id="FirstName2"        data="4"/>
                    <field id="LastName1"         data="5"/>
                    <field id="LastName2"         data="6"/>
                    <field id="Data7"             data="7"/>
                    <field id="Data8"             data="8"/>
                    <field id="Data9"             data="9"/>
                    <field id="BirthDate"         data="10"/>
                    <field id="FatherLastName1"   data="11"/>
                    <field id="FatherLastName2"   data="12"/>
                    <field id="FatherFirstName1"  data="13"/>
                    <field id="FatherFirstName2"  data="14"/>
                    <field id="FatherFirstName3"  data="15"/>
                    <field id="MotherLastName1"   data="16"/>
                    <field id="MotherLastName2"   data="17"/>
                    <field id="MotherFirstName1"  data="18"/>
                    <field id="MotherFirstName2"  data="19"/>
                    <field id="MotherFirstName3"  data="20"/>
                    <field id="Data21"            data="21"/>
                </PDF417>
                <ML cols="1" split_by="lines" separation="0.10" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch dst="docNumber"
                        regex="([a-zA-Z0-9]{4})-([a-zA-Z0-9]{4})-([a-zA-Z0-9]{5})"
                        value="([N]$1)-([N]$2)-([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <assignIfValid dst="fullN" src="docNumber" offset="-1"/>
                    <splitIfValid2 by="/" dst="fullN"
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <splitIfValid2 by=" I " dst="fullN"
                        dst1="fn"
                        dst2="ln"
                        overwrite="false"
                    />
                    <assignField src="fn" field="FirstName"/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="fullN" field="FullName"/>
                </ML>
            </Back>

        </Version>

        <Version id="v2" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="2" split_by="elements" separation="0.10" space_separation="0.02">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <!-- We check for drivers license -->
                    <findLineContent dst="dndt" content="DIRECCIÓN@NACIONAL@DE@TRÁNSITO" threshold="0.3"/>
                    <findLineContent dst="ldc" content="Licencia@de@Conducir" threshold="0.3"/>
                    <rejectIfValid src="dndt"/>
                    <rejectIfValid src="ldc"/>

                    <findLineMatch dst="docNumber"
                        regex="([a-zA-Z0-9]{4}) ([a-zA-Z0-9]{4}) ([a-zA-Z0-9]{5})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent dst="rdh" content="REPUBLICA@DE@HONDURAS" threshold="0.3"/>
                    <findLineContent dst="rndlp" content="REGISTRO@NACIONAL@DE@LAS@PERSONAS" threshold="0.3"/>
                    <findLineContent dst="dni" content="DOCUMENTO@NACIONAL@DE@IDENTIFICACION" threshold="0.3"/>
                    <rejectIfNotValid2 src="rdh" src2="rndlp" reason="DocumentNotExpected"/>
                    <rejectIfNotValid src="dni" reason="DocumentNotExpected"/>

                    <findLineMatch dst="DoB"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch dst="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineContent dst="nom" content="NOMBRE@@@FORENAME" threshold="0.3"/>
                    <findLineContent dst="ape" content="APELLIDO@@@SURNAME" threshold="0.3"/>
                    <findLineContent dst="fecha_nac" content="FECHA@DE@NACIMIENTO@@@DATE@OF@BIRTH@NUMERO@DE@IDENTIFICACION@@@ID@NUMBER" threshold="0.3"/>
                    <findLineContent dst="fecha_nac" content="FECHA@DE@NACIMIENTO@@@DATE@OF@BIRTH" threshold="0.3" overwrite="false"/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="ape" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln" src="fecha_nac" offset="-1" overwrite="false"/>

                    <assignField src="fn" field="FirstName"/>
                    <assignField src="ln" field="LastName"/>

                    <findLineContent dst="nacionalidad" content="NACIONALIDAD@@@NATIONALITY@FECHA@DE@EXPIRACION@@@DATE@OF@EXPIRY" threshold="0.3"/>
                    <findLineContent dst="nacionalidad" content="NACIONALIDAD@@@NATIONALITY" threshold="0.3" overwrite="false"/>
                    <assignIfValid dst="nat" src="nacionalidad" offset="+1" overwrite="false"/>
                    <assignField src="nat" field="Nationality"/>

                    <findLineContent dst="lugar" content="LUGAR@DE@NACIMIENT@@@PLACE@OF@BIRTH" threshold="0.3"/>
                    <assignIfValid dst="pob" src="lugar" offset="+1" overwrite="false"/>
                    <assignField src="pob" field="PlaceOfBirth"/>

                </ML>
            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="HND"/>
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ> 
                <!-- types: QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <BARCODE types="QRCODE" optional="yes"/>

                <ML cols="1" split_by="lines" separation="0.10" space_separation="0.10">
                    
                    <findLineContent dst="addressStr" content="DOMICILIO@@@ADDRESS" threshold="0.3"/>
                    <rejectIfNotValid src="addressStr"/>

                    <assignIfValid dst="address" src="addressStr" offset="+1" overwrite="false"/>
                    <assignIfValid dst="address2" src="addressStr" offset="+2" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" - " suffix=""/>
                    <assignField src="address" field="Address"/>

                </ML>
            </Back>

        </Version>
    </DocumentID>

    <DocumentID id="CO" iso="COL">
        <Version id="v1" type="TD1" document_type="IDC" priority="PDF417,BARCODE,MRZ,ML,OCR,INPUT">
            <Front>
                <FACE/>
                <ML cols="1" split_by="lines" separation="0.08" space_separation="0.10">

                    <findLineContent dst="rdc" content="REPUBLICA@DE@COLOMBIA" threshold="0.3"/>
                    <findLineContent dst="ip" content="IDENTIFICACION@PERSONAL" threshold="0.3"/>
                    <findLineContent dst="cdc" content="CEDULA@DE@CIUDADANIA" threshold="0.3"/>
                    <rejectIfNotValid src="rdc" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="ip" src2="cdc" reason="DocumentNotExpected"/>

                    <findLineContent dst="num" content="NUMERO" threshold="3"/>

                    <findLineContent dst="ape" content="APELLIDOS" threshold="0.3"/>
                    <findLineContent dst="nom" content="NOMBRES" threshold="0.3"/>

                    <!-- X.XXX.XXX.XXX -->
                    <findLineMatch dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3}).?$"
                        value="([N]$1).([N]$2).([N]$3).([N]$4)"
                    />
                    <!-- XX.XXX.XXX -->
                    <findLineMatch dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3}).?$"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- XX.XXX.XXX (We test again with a space at the end) -->
                    <findLineMatch dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3}) "
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="NUIP"/> <!-- This is DocumentNumber with dots -->
                    <replaceIfValid dst="docNumber" content="." replace=""/>
                    <assignField src="docNumber" field="DocumentNumber"/> <!-- This is DocumentNumber WITHOUT dots -->
                    
                    <assignIfValid dst="ln" src="ape" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fn" src="ape" offset="+1" overwrite="false"/>
                    <rejectIfNotValid src="ln"/>
                    <rejectIfNotValid src="fn"/>

                    <modifyIfValid dst="ln" op="U"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="fn" field="FirstName"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="1" split_by="lines" separation="0.01" space_separation="0.10">

                    <findLineMatchMultiple src="mark" overwrite="false"
                        regex="([A-Z])[- \.]?([0-9OIlSBA]{7})[- \.]?([0-9OIlSBA]{8})[- \.]?([FMX])[- \.]?00([0-9OIlSBA]{8})[- \.]?([1-2][0-9]{3})([0-1][0-9])([0-3][0-9])"
                        dst1="letter" value1="($1)"
                        dst2="number1" value2="($2)"
                        dst3="number2" value3="($3)"
                        dst4="sex" value4="($4)"
                        dst5="docNumber" value5="($5)"
                        dst6="date" value6="($8)/($7)/($6)"
                    />
                    <findLineMatchMultiple src="mark" overwrite="false"
                        regex="([A-Z])[- \.]?([0-9OIlSBA]{7})[- \.]?([0-9OIlSBA]{8})[- \.]?([FMX])[- \.]?0([0-9OIlSBA]{9})[- \.]?([1-2][0-9]{3})([0-1][0-9])([0-3][0-9])"
                        dst1="letter" value1="($1)"
                        dst2="number1" value2="($2)"
                        dst3="number2" value3="($3)"
                        dst4="sex" value4="($4)"
                        dst5="docNumber" value5="($5)"
                        dst6="date" value6="($8)/($7)/($6)"
                    />
                    <findLineMatchMultiple src="mark" overwrite="false"
                        regex="([A-Z])[- \.]?([0-9OIlSBA]{7})[- \.]?([0-9OIlSBA]{8})[- \.]?([FMX])[- \.]?([0-9OIlSBA]{10})[- \.]?([1-2][0-9]{3})([0-1][0-9])([0-3][0-9])"
                        dst1="letter" value1="($1)"
                        dst2="number1" value2="($2)"
                        dst3="number2" value3="($3)"
                        dst4="sex" value4="($4)"
                        dst5="docNumber" value5="($5)"
                        dst6="date" value6="($8)/($7)/($6)"
                    />
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch dst="mark" overwrite="false"
                        regex="([A-Z][- \.]?[0-9OIlSBA]{7,}[- \.]?[0-9OIlSBA]{8,}[- \.]?[A-Z][- \.]?[0-9OIlSBA]{10,}[- \.]?[0-9OIlSBA]{8,})"
                        value="($1)"
                    />
                    <rejectIfNotValid src="mark" reason="DocumentNotExpected"/>

                    <findLineMatch dst="DoB"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineContent dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent dst="est" content="ESTATURA" threshold="0.3"/>
                    <findLineContent dst="gsrh" content="G@S@@RH" threshold="0.3"/>
                    <findLineContent dst="sexo" content="SEXO" threshold="0.3"/>
                    <findLineContent dst="inderecho" content="INDICE@DERECHO" threshold="0.3"/>

                    <assignIfValid dst="PoB1" src="ldn" offset="-2"/>
                    <assignIfValid dst="PoB2" src="ldn" offset="-1"/>
                    <modifyIfValid dst="PoB1" op="U"/>
                    <modifyIfValid dst="PoB2" op="U"/>
                    <assignIfValid dst="PoB" src="PoB1"/>
                    <concatenateIfValid dst="PoB" src="PoB2" prefix=" " suffix=""/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <assignField src="PoB1" field="PlaceOfBirth1"/>
                    <assignField src="PoB2" field="PlaceOfBirth2"/>

                    <findLineMatch dst="height"
                        regex="^([1-2]\.[0-9]{2})$"
                        value="($1)"
                    />
                    <assignField src="height" field="Height"/>

                    <findLineMatch dst="bt"
                        regex="^(A|B|8|0|O|o|AB|A8) ?(\+|\-)$"
                        value="([U]$1)($2)"
                    />
                    <findLineMatch dst="bt"
                        regex=" (A|B|8|0|O|o|AB|A8) ?(\+|\-) "
                        value="([U]$1)($2)"
                        overwrite="false"
                    />
                    <assignField src="bt" field="BloodType"/>

                    <findLineContent dst="fle" content="FECHA@Y@LUGAR@DE@EXPEDICION"/>
                    <assignIfValid dst="doiStr" src="fle" offset="-1"/>
                    <matchIfValid dst="DoI" src="doiStr"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoI"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineMatch dst="sex"
                        regex="^([M|F])$"
                        value="($1)" 
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>

                </ML>
            </Back>

        </Version>

        <Version id="v2" type="TD1" document_type="IDC" priority="PDF417,BARCODE,MRZ,ML,OCR,INPUT">
            <Front>
                <FACE/>
                <ML cols="20" split_by="elements" c_separation="2">

                    <findLineContent dst="rdc" content="REPUBLICA@DE@COLOMBIA" threshold="0.3"/>
                    <findLineContent dst="cd" content="CEDULA@DE" threshold="0.3"/>
                    <findLineContent dst="c" content="CIUDADANIA" threshold="0.3"/>
                    <rejectIfNotValid src="rdc" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="cd" src2="c" reason="DocumentNotExpected"/>

                    <findLineContent dst="ape" content="Apellidos" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nom" content="Nombres" threshold="0.3" overwrite="false"/>

                    <!-- X.XXX.XXX.XXX -->
                    <findLineMatch dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})$"
                        value="([N]$1).([N]$2).([N]$3).([N]$4)"
                    />
                    <!-- XX.XXX.XXX -->
                    <findLineMatch dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3})$"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- XX.XXX.XXX (We test again with a space at the end) -->
                    <findLineMatch dst="docNumber" overwrite="false"
                        regex="([1-9lI]+[0-9OolI]*)(?: |\.|,)?([0-9OolI]{3})(?: |\.|,)?([0-9OolI]{3}) "
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    
                    <assignIfValid dst="ln" src="nom" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <rejectIfNotValid src="ln"/>
                    <rejectIfNotValid src="fn"/>

                    <modifyIfValid dst="ln" op="U"/>
                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="fn" field="FirstName"/>

                    <findLineMatch src="DoBStr" dst="DoB"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineContent dst="ldn" content="Lugar@de@nacimiento" threshold="0.2"/>
                    <findLineContent dst="fle" content="Fecha@y@lugar@de@expedición" threshold="0.2"/>
                    <findLineContent dst="fde" content="Fecha@de@expiración" threshold="0.2"/>
                    <findLineContent dst="est" content="Estatura" threshold="0.2"/>
                    <findLineContent dst="gsrh" content="G@S@" threshold="0.2"/>
                    <findLineContent dst="sexo" content="Sexo" threshold="0.2"/>

                    <assignIfValid dst="PoB1" src="ldn" offset="+1"/>
                    <assignIfValid dst="PoB2" src="ldn" offset="+2"/>
                    <modifyIfValid dst="PoB1" op="U"/>
                    <modifyIfValid dst="PoB2" op="U"/>
                    <assignIfValid dst="PoB" src="PoB1"/>
                    <concatenateIfValid dst="PoB" src="PoB2" prefix=" " suffix=""/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <assignField src="PoB1" field="PlaceOfBirth1"/>
                    <assignField src="PoB2" field="PlaceOfBirth2"/>

                    <findLineMatch dst="height"
                        regex="^([1-2][\.,][0-9]{2})$"
                        value="($1)"
                    />
                    <assignField src="height" field="Height"/>

                    <findLineMatch dst="bt"
                        regex="^(A|B|8|0|O|o|AB|A8) ?(\+|\-)$"
                        value="([U]$1)($2)"
                    />
                    <findLineMatch dst="bt"
                        regex=" (A|B|8|0|O|o|AB|A8) ?(\+|\-) "
                        value="([U]$1)($2)"
                        overwrite="false"
                    />
                    <matchIfValid dst="bt" src="DoBStr"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />
                    <assignField src="bt" field="BloodType"/>

                    <assignIfValid dst="doiStr" src="fle" offset="+1"/>
                    <matchIfValid dst="DoI" src="doiStr"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoI"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineMatch dst="sex"
                        regex="^([M|F])$"
                        value="($1)" 
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>

                    <assignIfValid dst="doeStr" src="fde" offset="+1"/>
                    <matchIfValid dst="DoE" src="doeStr"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <findLineMatch dst="DoE"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3})[A-Z]?(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})"
                        value="($1)/([M]$2)/($3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="COL"/>
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="DocumentNumber"  line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ> 
            </Back>

        </Version>

    </DocumentID>

    <DocumentID id="BR" iso="BRA">
        <Version id="ID-OLD" type="TD1" document_type="IDC">
            <Front>
                <OCR>
                    <region id="Face" x="0.500" y="0.244" w="0.422" h="0.446" r="90"/>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="2" split_by="elements" c_separation="2" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>
                    
                    <findLineContent dst="mrk1" content="ESTADO@D@@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk1" content="GOVERNO@DO@ESTADO@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk1" content="DISTRITO@FEDERAL" threshold="0.2" overwrite="false"/>
                    <assignField src="mrk1" field="State"/>
                    <jumpIfValid src="mrk1" dst="HEADER_FOUND"/>

                    <findLineContent dst="mrk2" content="SECRETARIA@D@@SEGURANÇA@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@ESTADO@DA@SEGURANÇA@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@ESTADO@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@DEFESA@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@JUSTIÇA@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@COORDINADORA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@ESTADO@DA@POLICIA@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="POLICIA@CIVIL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="POLICIA@CIENTIFICA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="INSTITUTO@DE@POLICIA@CIENTIFICA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="INSTITUTO@TECNICO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="POLICIA@TECNICO@CIENTIFICA#" threshold="0.2" overwrite="false"/>
                    <jumpIfValid src="mrk2" dst="HEADER_FOUND"/>

                    <findLineContent dst="mrk3" content="INSTITUTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="INSTITUTO@GERAL@DE@PERÍCIA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="COORDENADORIA@GERAL@DE@PERÍCIA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DEPARTAMENTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DIRETORIA@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="CENTRO@DE@PERÍCIAS#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DETRAN@@@DIRETORIA@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <jumpIfValid src="mrk3" dst="HEADER_FOUND"/>

                    <rejectIfNotValid3 src="mrk1" src2="mrk2" src3="mrk3" reason="DocumentNotExpected"/>

                    <label src="HEADER_FOUND"/>
                    
                    <findLineContent dst="rfb" content="REPÚBLICA@FEDERATIVA@DO@BRASIL" threshold="0.2" overwrite="false"/>
                    <!-- <rejectIfNotValid src="rfb"/> -->

                    <!-- We need to reject if any of these fields appear because it's BRA-NEW -->
                    <findLineContent dst="mrk_rej" content="NOME" threshold="1" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="NOME #" threshold="1" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="FILIAÇÃO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="D@NASCIMENTO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="DATA@NASC" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="DATA@DE@NASCIMENTO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="DATA@NASCIMENTO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="OBSERVAÇÃO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="NATURALIDADE" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="FATOR@RH" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="ÓRGÃO@EXPEDITOR" threshold="0.3" overwrite="false"/>
                    <rejectIfValid src="mrk_rej" reason="DocumentNotExpected"/>
                    <!-- We need to reject if any of these fields appear because it's BRA-NEW-2020 -->
                    <findLineContent dst="mrk_rej" content="Nome@@@Name" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Nome@Social@@@Social@Name" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Registro@Geral@@@CPF#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Data@de@Nascimiento#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Naturalide@@@Place@of@Birth" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Sexo@@@Sex" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Nacionalidade@@@Nationality" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Data@de@Validade@@@Date@of@Expiry" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Filiação@@@Filiation" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Orgao@Expeditor@@@Card@Issuer" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Local@@@Place@of@Issue" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk_rej" content="Data@de@Emissão@@@Issue@Date" threshold="0.3" overwrite="false"/>
                    <rejectIfValid src="mrk_rej" reason="DocumentNotExpected"/>

                    <!-- NNN.NNN.NNN-NN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?- ?([0-9oOl]{1,2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <jumpIfNotValid src="regGeneral" dst="END"/>
                    <assignField src="regGeneral" field="GeneralRegistry"/>
                    <assignField src="regGeneral" field="CPF"/>

                    <label src="END"/>
                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="2" split_by="elements" c_separation="2" separation="0.15" space_separation="0.05"> <!-- 0.05 -->

                <!-- Removed because of names enclosed with << >>
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>
                -->

                    <!-- NNNNNNNNN NN -->
                    <!-- NNNNNNNNN/NN -->
                    <!-- NNNNNNNNN7NN -->
                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{9})[\/7 ]([0-9oOl]{2})"
                        value="([N]$1)/([N]$2)"
                        mode="reverse"
                    />
                    <!-- NNNNNNNNN NN w/spaces -->
                    <!-- NNNNNNNNN/NN w/spaces -->
                    <!-- NNNNNNNNN7NN w/spaces -->
                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?)[\/7 ]([0-9oOl]{2})"
                        value="([N]$1)/([N]$2)"
                        mode="reverse"
                    />
                    <!-- NNN.NNN.NNN-NN -->
                    <!-- NNNNNNNNN-NN -->
                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{3})[\.,:]?([0-9oOl]{3})[\.,:]?([0-9oOl]{3})-([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                        mode="reverse"
                    />
                    <!-- NNN.NNN.NNN-NN -->
                    <!-- NNNNNNNNN-NN -->
                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{3})[\.,:]([0-9oOl]{3})[\.,:]([0-9oOl]{3})-?([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                        mode="reverse"
                    />
                    <findLineContent dst="cpfLine" content="CPF#" threshold="0" overwrite="false"/>
                    <replaceIfValid dst="cpfLine" content=" " replace=""/>
                    <matchIfValid src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{9})[\/7]([0-9oOl]{2})"
                        value="([N]$1)/([N]$2)"
                    />
                    <matchIfValid src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?)[\/7 ]([0-9oOl]{2})"
                        value="([N]$1)/([N]$2)"
                    />
                    <matchIfValid src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{3})[\.,:]?([0-9oOl]{3})[\.,:]?([0-9oOl]{3})-([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <assignField src="cpf" field="CPF"/>

                    <!-- Special cases -->
                    <!-- MG-NN.NNN.NNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^M[G6] ?-? ?([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3})"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- MG-NN.NNN.NNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" M[G6] ?-? ?([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <!-- N.NNN.NNN -ES -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?-? ?ES"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- N.NNN.NNN -ES -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?-? ?ES"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- NNNNNNN-NNNNNNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{7}) ?- ?([0-9oOl]{7})"
                        value="([N]$1)-([N]$2)"
                    />
                    <!-- NNNNNNN-NNNNNNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{7}) ?- ?([0-9oOl]{7})"
                        value="([N]$1)-([N]$2)"
                    />
                    <!-- NNNNNNNNNNNN-N -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{7,12}) ?[\.,-]+ ?([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <!-- NNNNNNNNNNNN-N -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{7,12}) ?[\.,-]+ ?([0-9oOl])"
                        value="([N]$1)-([N]$2)"
                    />
                    <!-- NNN.NNN.NNN-NN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?- ?([0-9oOl]{1,2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <!-- NNN.NNN.NNN-NN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{1,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?- ?([0-9oOl]{1,2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <!-- NNN.NNN.NNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{0,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3})"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- NNN.NNN.NNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{0,3})[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3})"
                        value="([N]$1).([N]$2).([N]$3)"
                    />
                    <!-- NNNNNNNNN NN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{9}) ?([0-9oOl]{2})"
                        value="([N]$1) ([N]$2)"
                    />
                    <!-- NNNNNNNNN NN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{9}) ?([0-9oOl]{2})"
                        value="([N]$1) ([N]$2)"
                    />
                    <!-- NNNNNNNNNNNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="^([0-9oOl]{7,12})"
                        value="([N]$1)"
                    />
                    <!-- NNNNNNNNNNNN -->
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex=" ([0-9oOl]{7,12})"
                        value="([N]$1)"
                    />
                    <assignField src="regGeneral" field="GeneralRegistry"/>

                    <!-- Either CPF or GENERAL REGISTRY must exists at this point -->
                    <rejectIfNotValid2 src="cpf" src2="regGeneral" reason="DocumentNotExpected"/>                    
                    <assignField src="cpf" field="DocumentNumber"/>
                    <jumpIfValid src="cpf" dst="DOCUMENT_NUMBER_CAPTURED"/>
                    <assignField src="regGeneral" field="DocumentNumber"/>

                    <label src="DOCUMENT_NUMBER_CAPTURED"/>

                    <findLineContent dst="nom" content="NOME" threshold="1" overwrite="false"/>
                    <findLineContent dst="nom" content="NOME #" threshold="1" overwrite="false"/>
                    <findLineContent dst="nom" content="OME #" threshold="1" overwrite="false"/>
                    <findLineContent dst="fil" content="FILIAÇÃO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="fil" content="FIUAÇÃO#" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="nac" content="D@NASCIMENTO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="DATA@NASC" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="DATA@DE@NASCIMENTO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="DATA@NASCIMENTO#" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="obs" content="OBSERVAÇÃO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nat" content="NATURALIDADE" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="frh" content="FATOR@RH" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="org" content="ÓRGÃO@EXPEDITOR" threshold="0.3" overwrite="false"/>

                    <matchIfValid src="nom" dst="fullN" overwrite="false"
                        regex="[A-Za-z0-9:\.]+ (.+)"
                        value="($1)"
                    />
                    <assignIfValid dst="fullN" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="nom" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="fullN"/>
                    <replaceIfValid dst="fullN" content="&lt;&lt;" replace=""/>
                    <replaceIfValid dst="fullN" content="&gt;&gt;" replace=""/>
                    <assignField src="fullN" field="FullName"/>

                    <!-- Check for name in filiacao line -->
                    <matchIfValid src="fil" dst="parentsLine1" overwrite="false"
                        regex="[A-Za-z0-9ÇÃ:\.]+ (.+)"
                        value="($1)"
                    />
                    <jumpIfNotValid src="parentsLine1" dst="NO_PARENTS_IN_FILIACAO_LINE"/>
                    <assignIfValid dst="parentsLine2" src="fil" offset="+1" overwrite="false"/>
                    <assignIfValid dst="parentsLines" src="parentsLine1" overwrite="false"/>
                    <concatenateIfValid dst="parentsLines" src="parentsLine2" prefix=" " suffix=""/>
                    <splitIfValid2 src="parentsLines" by=" E "
                        dst1="parent1" dst2="parent2"
                        overwrite="false"
                    />
                    <splitIfValid2 src="parentsLines" by=" e "
                        dst1="parent1" dst2="parent2"
                        overwrite="false"
                    />
                    <jumpIfValid src="parent2" dst="ASSIGN_BOTH_PARENT_VALUES"/>
                        <!-- Assign parents from the 2 lines-->
                        <assignIfValid dst="parent1" src="parentsLine1" overwrite="false"/>
                        <assignIfValid dst="parent2" src="parentsLine2" overwrite="false"/>
                    <jump dst="ASSIGN_PARENT_VALUES"/>
                    <label src="ASSIGN_BOTH_PARENT_VALUES"/>
                    <assignField src="parent1" field="FatherName"/>
                    <assignField src="parent2" field="MotherName"/>
                    <jump dst="PARENTS_END"/>

                    <label src="NO_PARENTS_IN_FILIACAO_LINE"/>
                    <assignIfValid dst="parent1" src="fil" offset="+1" overwrite="false"/>
                    <assignIfValid dst="parent2" src="fil" offset="+2" overwrite="false"/>
                    <label src="ASSIGN_PARENT_VALUES"/>
                    <jumpIfNotValid src="parent2" dst="NO_FATHER"/>
                        <assignField src="parent1" field="FatherName"/>
                        <assignField src="parent2" field="MotherName"/>
                        <jump dst="PARENTS_END"/>
                    <label src="NO_FATHER"/>
                        <assignField src="parent1" field="MotherName"/>
                        <assignField src="parent2" field="FatherName"/> <!-- Empty string -->
                    <label src="PARENTS_END"/>

                    <!-- Find dates in reverse order -->
                    <matchIfValid src="nac" dst="dob" overwrite="false"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([0O][1-9lIií]|1[0-2])(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <matchIfValid src="nac" dst="dob" overwrite="false"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([A-Za-z0]{3})(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <matchIfValid src="nac" dst="dob" overwrite="false"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*(0O[1-9lIií]|1[0-2])(?:[ \/\.,:\-7I])*4([8-9][0-9]{2})"
                        value="([N]$1)/([N]$2)/1([N]$3)"
                    />
                    <findLineMatch src="lineDob" dst="dob" overwrite="false" mode="reverse"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([0O][1-9lIií]|1[0-2])(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <findLineMatch src="lineDob" dst="dob" overwrite="false" mode="reverse"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([A-Za-z0]{3})(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <findLineMatch src="lineDob" dst="dob" overwrite="false" mode="reverse"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([0O][1-9lIií]|1[0-2])(?:[ \/\.,:\-7I])*4([8-9][0-9]{2})"
                        value="([N]$1)/([N]$2)/1([N]$3)"
                    />
                    <rejectIfNotValid src="dob"/>
                    <assignField src="dob" field="DateOfBirth"/>

                    <matchIfValid src="regGeneralStr" dst="DoI" overwrite="false"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*(0[1-9]|1[0-2])(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <matchIfValid src="regGeneralStr" dst="DoI" overwrite="false"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([A-Za-z0]{3})(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <findLineMatch src="doi" dst="DoI" overwrite="false" mode="reverse"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*(0[1-9]|1[0-2])(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <findLineMatch src="doi" dst="DoI" overwrite="false" mode="reverse"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*([A-Za-z0]{3})(?:[ \/\.,:\-7I])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <!-- Special case for dates DD/MM/YY -->
                    <findLineMatch src="doi" dst="DoI" overwrite="false" mode="reverse"
                        regex="([0O][1-9lIB]|[1-2IlZ][0-9OolI]|3[0-1OolI])(?:[ \/\.,:\-7I])*(0[1-9]|1[0-2])(?:[ \/\.,:\-7I])*([0-5lIií][0-9])"
                        value="([N]$1)/([N]$2)/20([N]$3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <!-- 
                    <assignIfValid dst="rem" src="obs" offset="+1"/>
                    <assignField src="rem" field="Remarks"/>
                    -->

                    <assignIfValid dst="PoB" src="nat" offset="+1"/>
                    <!-- <assignIfValid dst="PoB2" src="nat" offset="+2"/> -->
                    <!-- <concatenateIfValid dst="PoB" src="PoB2" prefix=" " suffix=""/> -->
                    <assignField src="PoB" field="PlaceOfBirth"/>

                </ML>
            </Back>

        </Version>

        <Version id="ID-NEW" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="2" split_by="elements" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>
                    
                    <findLineContent dst="mrk1" content="ESTADO@D#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk1" content="RIO@GRANDE@DO@SUL#" threshold="0.2" overwrite="false"/>
                    <assignField src="mrk1" field="State"/>
                    <jumpIfValid src="mrk1" dst="HEADER_FOUND"/>

                    <findLineContent dst="mrk2" content="SECRETARIA@DA@SEGURANÇA@PÚBLICA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@ESTADO@DA@SEGURANÇA@PÚBLICA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="VICE@@@GOVERNADORIA@DO@ESTADO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@ESTADO@DA@POLICIA@CIVIL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="POLICIA@CIVIL@DO@ESTADO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@ESTADO@DE@JUSTIÇA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="POLICIA@CIVIL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="SECRETARIA@DE@DEFESA@SOCIAL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk2" content="GOVERNO@DO@ESTADO@D#" threshold="0.2" overwrite="false"/>
                    <jumpIfValid src="mrk2" dst="HEADER_FOUND"/>

                    <findLineContent dst="mrk3" content="INSTITUTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DETRAN@@@DIRETORIA@DE@IDENTIFICAÇÃO@CIVIL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DEI@@@DEPARTAMENTO@DE@IDENTIFICAÇÃO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="POLICIA@CIVIL@DO@ESTADO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="E@ADMINISTRAÇAO@PENITENCIARIA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="INSTITUTO@TÉCNICO@CIENTIFICO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="COORDINADORIA@GERAL@DE@PERICIAS#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="PERICIA@OFICIAL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="PERICIA@FORENSE@DO@ESTADO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="INSTITUTO@GERAL@DE@PERICIAS#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="POLICIA@CIVIL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DELEGACIA@GERAL@DE@POLICIA@CIVIL#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="INSTITUTO@DE@POLICIA@CIENTÍFICA#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="INSTITUTO@GERAL@DE@PERICIAS#" threshold="0.2" overwrite="false"/>
                    <jumpIfValid src="mrk3" dst="HEADER_FOUND"/>

                    <findLineContent dst="mrk4" content="INSTITUTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk4" content="DEPARTAMENTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk4" content="II@@@INSTITUTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk4" content="COORDINADORIA@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk4" content="DEI@@@DEPARTAMENTO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk4" content="NÚCLEO@DE@IDENTIFICAÇAO#" threshold="0.2" overwrite="false"/>
                    <jumpIfValid src="mrk4" dst="HEADER_FOUND"/>
                    
                    <rejectIfNotValid4 src="mrk1" src2="mrk2" src3="mrk3" src4="mrk4" reason="DocumentNotExpected"/>

                    <label src="HEADER_FOUND"/>

                    <findLineContent dst="rfb" content="REPÚBLICA@FEDERATIVA@DO@BRASIL" threshold="0.2" overwrite="false"/>
                    <!-- <rejectIfNotValid src="rfb"/> -->

                    <findLineContent dst="nom" content="NOME" threshold="1" overwrite="false"/>
                    <findLineContent dst="nom" content="NOME #" threshold="1" overwrite="false"/>
                    <findLineContent dst="fil" content="FILIAÇÃO#" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="nac" content="D@NASCIMENTO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="DATA@NASC" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="DATA@DE@NASCIMENTO#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="DATA@NASCIMENTO#" threshold="0.3" overwrite="false"/>

                    <findLineContent dst="obs" content="OBSERVAÇÃO" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nat" content="NATURALIDADE" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="frh" content="FATOR@RH" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="org" content="ÓRGÃO@EXPEDITOR" threshold="0.3" overwrite="false"/>

                    <matchIfValid src="nom" dst="fullN" overwrite="false"
                        regex="[A-Za-z0-9:\.]+ (.+)"
                        value="($1)"
                    />
                    <assignIfValid dst="fullN" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="nom" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="fullN"/>
                    <assignField src="fullN" field="FullName"/>

                    <!-- Check for name in filiacao line -->
                    <matchIfValid src="fil" dst="parentsLine1" overwrite="false"
                        regex="[A-Za-z0-9ÇÃ:\.]+ (.+)"
                        value="($1)"
                    />
                    <jumpIfNotValid src="parentsLine1" dst="NO_PARENTS_IN_NOME_LINE"/>
                    <assignIfValid dst="parentsLine2" src="fil" offset="+1" overwrite="false"/>
                    <concatenateIfValid dst="parentsLine1" src="parentsLine2" prefix=" " suffix=""/>
                    <splitIfValid2 src="parentsLine1" by=" E "
                        dst1="parent1"
                        dst2="parent2"
                        overwrite="false"
                    />
                    <splitIfValid2 src="parentsLine1" by=" e "
                        dst1="parent1"
                        dst2="parent2"
                        overwrite="false"
                    />
                    <assignField src="parent1" field="FatherName"/>
                    <assignField src="parent2" field="MotherName"/>
                    <jump dst="PARENTS_END"/>

                    <label src="NO_PARENTS_IN_NOME_LINE"/>
                    <assignIfValid dst="parent1" src="fil" offset="+1" overwrite="false"/>
                    <assignIfValid dst="parent2" src="fil" offset="+2" overwrite="false"/>
                    <jumpIfNotValid src="parent2" dst="NO_FATHER"/>
                        <assignField src="parent1" field="FatherName"/>
                        <assignField src="parent2" field="MotherName"/>
                        <jump dst="PARENTS_END"/>
                    <label src="NO_FATHER"/>
                        <assignField src="parent1" field="MotherName"/>
                        <assignField src="parent2" field="FatherName"/> <!-- Empty string -->
                    <label src="PARENTS_END"/>

                    <matchIfValid src="nac" dst="dob"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <findLineMatch src="lineDob" dst="dob"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="dob"/>
                    <assignField src="dob" field="DateOfBirth"/>

                    <!-- 
                    <assignIfValid dst="rem" src="obs" offset="+1"/>
                    <assignField src="rem" field="Remarks"/>
                    -->

                    <assignIfValid dst="PoB" src="nat" offset="+1"/>
                    <!-- <assignIfValid dst="PoB2" src="nat" offset="+2"/> -->
                    <!-- <concatenateIfValid dst="PoB" src="PoB2" prefix=" " suffix=""/> -->
                    <assignField src="PoB" field="PlaceOfBirth"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="7" split_by="elements" separation="0.07" space_separation="0.20">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{9})[\/7 ]([0-9oOl]{2})$"
                        value="([N]$1)/([N]$2)"
                    />
                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{3})[\.,:]?([0-9oOl]{3})[\.,:]?([0-9oOl]{3})-([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <findLineContent dst="cpfLine" content="CPF#" threshold="0" overwrite="false"/>
                    <replaceIfValid dst="cpfLine" content=" " replace=""/>
                    <matchIfValid src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{9})[\/7]([0-9oOl]{2})"
                        value="([N]$1)/([N]$2)"
                    />
                    <matchIfValid src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{3})[\.,:]?([0-9oOl]{3})[\.,:]?([0-9oOl]{3})-([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <assignField src="cpf" field="CPF"/>

                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="([0-9oOl]+)[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?[\.,-]+ ?([0-9oOl]+)$"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <findLineMatch src="regGeneralStr" dst="regGeneral" overwrite="false"
                        regex="([0-9oOl]+)[\.,:]? ?([0-9oOl]{3})[\.,:]? ?([0-9oOl]{3}) ?[\.,-]+ ?([0-9oOl]+) "
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <assignField src="regGeneral" field="GeneralRegistry"/>

                    <!-- Either CPF or GENERAL REGISTRY must exists at this point -->
                    <rejectIfNotValid2 src="cpf" src2="regGeneral" reason="DocumentNotExpected"/>                    
                    <assignField src="cpf" field="DocumentNumber"/>
                    <jumpIfValid src="cpf" dst="DOCUMENT_NUMBER_CAPTURED"/>
                    <assignField src="regGeneral" field="DocumentNumber"/>

                    <label src="DOCUMENT_NUMBER_CAPTURED"/>

                    <findLineMatch src="doi" dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([A-Z0]{3})(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})$"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <findLineMatch src="doi" dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})$"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <findLineMatch src="doi" dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*([A-Z0]{3})(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <findLineMatch src="doi" dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <matchIfValid src="regGeneralStr" dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineContent dst="teleitorLine" content="T@ELEITOR" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nispisLine" content="NIS@PIS@PASEP#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="certmilLine" content="CERT@@MILITAR" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="cnhLine" content="CNH" threshold="0" overwrite="false"/>
                    <findLineContent dst="ctpsLine" content="CTPS" threshold="1" overwrite="false"/>
                    <findLineContent dst="serieLine" content="SÉRIE" threshold="1" overwrite="false"/>
                    <findLineContent dst="ufLine" content="UF" threshold="0" overwrite="false"/>
                    <findLineContent dst="ctpsLine" content="CTPS" threshold="1" overwrite="false"/>

                    <assignIfValid dst="teleitorNum" src="teleitorLine" offset="+1" overwrite="false"/>
                    <matchIfValidMultiple src="teleitorNum" overwrite="false"
                        regex="([0-9]{3,}) ([0-9]{3,}) ([0-9]{3,}) ([A-Z]+)"
                        dst1="teleitor"
                        value1="($1)"
                        dst2="ctps"
                        value2="($2)"
                        dst3="serie"
                        value3="($3)"
                        dst4="uf"
                        value4="($4)"
                    />
                    <matchIfValid src="teleitorNum" overwrite="false"
                        regex="^([0-9]{3,}) "
                        dst="teleitor"
                        value="($1)"
                    />
                    <matchIfValid src="teleitorNum" overwrite="false"
                        regex="^([0-9]{3,})$"
                        dst="teleitor"
                        value="($1)"
                    />
                    <assignField src="teleitor" field="VoterID"/>

                    <assignIfValid dst="nispisNum" src="nispisLine" offset="+1" overwrite="false"/>
                    <matchIfValid src="nispisNum" dst="nispis" overwrite="false"
                        regex="([0-9]{3,})$"
                        value="($1)"
                    />
                    <assignField src="nispis" field="PIS"/>

                    <assignIfValid dst="certmilNum" src="certmilLine" offset="+1" overwrite="false"/>
                    <matchIfValid src="certmilNum" dst="certmil" overwrite="false"
                        regex="([0-9]{3,})$"
                        value="($1)"
                    />
                    <assignField src="certmil" field="MilitaryCertificate"/>

                    <assignIfValid dst="cnhNum" src="cnhLine" offset="+1" overwrite="false"/>
                    <matchIfValid src="cnhNum" dst="cnh" overwrite="false"
                        regex="([0-9]{3,})$"
                        value="($1)"
                    />
                    <assignField src="cnh" field="CNH"/>

                    <assignIfValid dst="ctpsNum" src="ctpsLine" offset="+1" overwrite="false"/>
                    <matchIfValid src="ctpsNum" dst="ctps" overwrite="false"
                        regex="([0-9]{3,})$"
                        value="($1)"
                    />
                    <assignField src="ctps" field="CTPS"/>

                </ML>
            </Back>
        </Version>

        <Version id="ID-NEW-2020" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="2" split_by="elements" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>
                    
                    <findLineContent dst="mrk1" content="REPÚBLICA@FEDERATIVA@DO@BRASIL" threshold="0.2" overwrite="false"/>

                    <findLineContent dst="mrk2" content="GOVERNO@FEDERAL" threshold="0.2" overwrite="false"/>

                    <findLineContent dst="mrk3" content="Estado@d@@@#" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk3" content="DISTRITO@FEDERAL" threshold="0.2" overwrite="false"/>
                    <assignField src="mrk3" field="State"/>

                    <findLineContent dst="mrk4" content="SECRETARIA@DE@SEGURANÇA@PUBLICA" threshold="0.2" overwrite="false"/>
                    <findLineContent dst="mrk4" content="Secretaria@de@Segurança@Publica" threshold="0.2" overwrite="false"/>
                    
                    <rejectIfNotValid4 src="mrk1" src2="mrk2" src3="mrk3" src4="mrk4" reason="DocumentNotExpected"/>

                    <label src="HEADER_FOUND"/>

                    <findLineContent dst="nom" content="Nome@@@Name" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nom_soc" content="Nome@Social@@@Social@Name" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="reg" content="Registro@Geral@@@CPF#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nac" content="Data@de@Nascimiento#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="pob" content="Naturalide@@@Place@of@Birth" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="sexStr" content="Sexo@@@Sex" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nat" content="Nacionalidade@@@Nationality" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="does" content="Data@de@Validade@@@Date@of@Expiry" threshold="0.3" overwrite="false"/>

                    <findLineMatch src="cpfLine" dst="cpf" overwrite="false"
                        regex="([0-9oOl]{3})[\.,:]?([0-9oOl]{3})[\.,:]?([0-9oOl]{3})-([0-9oOl]{2})"
                        value="([N]$1).([N]$2).([N]$3)-([N]$4)"
                    />
                    <rejectIfNotValid src="cpf"  reason="DocumentNotExpected"/>
                    <assignField src="cpf" field="CPF"/>
                    <assignField src="cpf" field="DocumentNumber"/>

                    <assignIfValid dst="fullN" src="nom" offset="+1" overwrite="false"/>
                    <rejectIfNotValid src="fullN"/>
                    <assignField src="fullN" field="FullName"/>

                    <findLineMatch src="dobStr" dst="dob"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="dob"/>
                    <assignField src="dob" field="DateOfBirth"/>

                    <findLineMatch src="doeStr" dst="doe"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="doe"/>
                    <assignField src="doe" field="DateOfExpiry"/>

                    <assignIfValid dst="PoB" src="pob" offset="+1"/>
                    <assignField src="PoB" field="PlaceOfBirth"/>

                    <assignIfValid dst="sexVal" src="sexStr" offset="+1"/>
                    <assignIfContent dst="sex" value="M" src="sexVal" op="starts_with" param="M"/>
                    <assignIfContent dst="sex" value="F" src="sexVal" op="starts_with" param="F"/>
                    <assignField src="sex" field="Gender"/>

                    <assignIfValid dst="nati" src="nat" offset="+1"/>
                    <assignField src="nati" field="Nationality"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <BARCODE types="QRCODE" decode="custom:BRA-IDC-2020-CIN" optional="yes"/>
                <ML cols="7" split_by="elements" separation="0.07" space_separation="0.20">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="fil" content="Filiação@@@Filiation" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="iss" content="Orgao@Expeditor@@@Card@Issuer" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="poi" content="Local@@@Place@of@Issue" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dois" content="Data@de@Emissão@@@Issue@Date" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid4 src="fil" src2="iss" src3="poi" src4="dois" reason="DocumentNotExpected"/>

                    <findLineMatch src="doi" dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:[1lIií][8-9]|2[0-2])[0-9]{2})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="par1" src="fil" offset="+1"/>
                    <assignIfValid dst="par2" src="fil" offset="+2"/>
                    <assignField src="par1" field="Parent1Name"/>
                    <assignField src="par2" field="Parent2Name"/>

                    <assignIfValid dst="issuer" src="iss" offset="+1"/>
                    <assignField src="issuer" field="IssuingAuthority"/>

                    <assignIfValid dst="PoI" src="poi" offset="+1"/>
                    <assignField src="PoI" field="PlaceOfIssue"/>

                </ML>
            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="PY" iso="PRY">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="docNumberV1" dst="docNumberV1" overwrite="false"
                        regex="^([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl])$"
                        value="([N]$1)"
                    />
                    <!-- There are document numbers with only 6 digits -->
                    <findLineMatch src="docNumberV1" dst="docNumberV1" overwrite="false" mode="reverse"
                        regex="^([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl])$"
                        value="([N]$1)"
                    />
                    <!-- There are document numbers with only 5 digits -->
                    <findLineMatch src="docNumberV1" dst="docNumberV1" overwrite="false" mode="reverse"
                        regex="^([0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl] ?[0-9oOl])$"
                        value="([N]$1)"
                    />

                    <findLineMatch src="docNumberV2" dst="docNumberV2" overwrite="false"
                        regex="^([0-9oOl]+)[,\.\:]([0-9oOl]{3})[,\.\:]([0-9oOl]{3})$"
                        value="([N]$1)([N]$2)([N]$3)"
                    />
                    <!-- There are document numbers with only 6 digits -->
                    <findLineMatch src="docNumberV2" dst="docNumberV2" overwrite="false"
                        regex="^([0-9oOl]{3})[,\.\:]([0-9oOl]{3})$"
                        value="([N]$1)([N]$2)"
                    />
                    <!-- There are document numbers with only 5 digits -->
                    <findLineMatch src="docNumberV2" dst="docNumberV2" overwrite="false"
                        regex="^([0-9oOl]{2})[,\.\:]([0-9oOl]{3})$"
                        value="([N]$1)([N]$2)"
                    />
                    <rejectIfNotValid2 src="docNumberV1" src2="docNumberV2" reason="DocumentNotExpected"/>

                    <!-- IMPORTANT: We reject the oldest version --> 
                    <rejectIfValid src="docNumberV2"/>


                    <jumpIfNotValid src="docNumberV1" dst="go_version2"/>
                    
                    <!-- Version 1 -->
                        <replaceIfValid dst="docNumberV1" content=" " replace=""/>
                        <assignField src="docNumberV1" field="DocumentNumber"/>

                        <findLineContent dst="dataRepublicaParaguay" content="REPUBLICA@DEL@PARAGUAY" threshold="0.3"/>
                        <findLineContent dst="dataCedulaDe" content="Cédula@de@Identidad@Civil" threshold="0.3"/>
                        <findLineContent dst="dataSurnameAndName" content="APELLIDOS@@NOMBRES" threshold="0.3"/>
                        <findLineContent dst="dataDateOfBirth" content="FECHA@DE@NACIMIENTO" threshold="0.3"/>
                        <findLineContent dst="dataPlaceOfBirth" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                        <findLineContent dst="dataDateOfExpiry" content="FECHA@DE@VENCIMIENTO" threshold="0.3"/>
                        <findLineContent dst="dataSex" content="SEXO" threshold="0.3"/>
                        <rejectIfNotValid src="dataRepublicaParaguay" reason="DocumentNotExpected"/>

                        <assignIfValid dst="fn" src="dataSurnameAndName" offset="+2" overwrite="false"/>
                        <assignIfValid dst="fn" src="dataDateOfBirth" offset="-1" overwrite="false"/>
                        <rejectIfNotValid src="fn"/>
                        <modifyIfValid dst="fn" op="U"/>
                        <assignField src="fn" field="FirstName"/>

                        <assignIfValid dst="ln" src="dataSurnameAndName" offset="+1" overwrite="false"/>
                        <assignIfValid dst="ln" src="dataDateOfBirth" offset="-2" overwrite="false"/>
                        <rejectIfNotValid src="ln"/>
                        <modifyIfValid dst="ln" op="U"/>
                        <assignField src="ln" field="LastName"/>

                        <findLineMatch src="lineDob" dst="dob"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([N]$2)/([N]$3)"
                        />
                        <rejectIfNotValid src="dob"/>
                        <assignField src="dob" field="DateOfBirth"/>

                        <assignIfValid dst="pob" src="dataPlaceOfBirth" offset="+1" overwrite="false"/>
                        <assignIfValid dst="pob" src="dataDateOfExpiry" offset="-1" overwrite="false"/>
                        <rejectIfNotValid src="pob"/>
                        <assignField src="pob" field="PlaceOfBirth"/>

                        <assignIfValid dst="sexRaw" src="dataSex" offset="+1"/>
                        <findLineContent dst="sexRaw" content="Masculino" threshold="2" overwrite="false"/>
                        <findLineContent dst="sexRaw" content="Femenino" threshold="2" overwrite="false"/>
                        <assignIfContent src="sexRaw" dst="sex" value="M"
                            op="distance" param="Masculino" param_2="0.3"
                            overwrite="false"
                        />
                        <assignIfContent src="sexRaw" dst="sex" value="F"
                            op="distance" param="Femenino" param_2="0.3"
                            overwrite="false"
                        />
                        <assignField src="sex" field="Gender"/>

                        <findLineMatch src="lineDoe" dst="doe"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([0-9oOl]{2})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([N]$2)/([N]$3)"
                        />
                        <rejectIfNotValid src="doe"/>
                        <assignField src="doe" field="DateOfExpiry"/>
                        
                        <jump dst="end_document"/>

                    <label src="go_version2"/>
                    <!-- Version 2 -->
                        <assignField src="docNumberV2" field="DocumentNumber"/>

                        <findLineContent dst="dataRepublicaParaguay" content="REPUBLICA@DEL@PARAGUAY" threshold="0.3"/>
                        <findLineContent dst="dataCedulaDe" content="Cédula@de@Identidad@Civil" threshold="0.3"/>
                        <findLineContent dst="dataSurnameAndName" content="APELLIDOS@@NOMBRES@@@SURNAMES@@GIVEN@NAMES" threshold="0.3"/>
                        <findLineContent dst="dataDateOfBirth" content="FECHA@DE@NACIMIENTO@@@BIRTH@DATE" threshold="0.3"/>
                        <findLineContent dst="dataPlaceOfBirth" content="LUGAR@DE@NACIMIENTO@@@PLACE@OF@BIRTH" threshold="0.3"/>
                        <findLineContent dst="dataDateOfExpiry" content="FECHA@DE@VENCIMIENTO@@@EXPIRY@DATE" threshold="0.3"/>
                        <findLineContent dst="dataSex" content="SEXO@@@SEX" threshold="0.3"/>
                        <rejectIfNotValid src="dataRepublicaParaguay" reason="DocumentNotExpected"/>

                        <assignIfValid dst="fn" src="dataSurnameAndName" offset="+2" overwrite="false"/>
                        <assignIfValid dst="fn" src="dataDateOfBirth" offset="-1" overwrite="false"/>
                        <rejectIfNotValid src="fn"/>
                        <modifyIfValid dst="fn" op="U"/>
                        <assignField src="fn" field="FirstName"/>

                        <assignIfValid dst="ln" src="dataSurnameAndName" offset="+1" overwrite="false"/>
                        <assignIfValid dst="ln" src="dataDateOfBirth" offset="-2" overwrite="false"/>
                        <rejectIfNotValid src="ln"/>
                        <modifyIfValid dst="ln" op="U"/>
                        <assignField src="ln" field="LastName"/>

                        <findLineMatch src="lineDob" dst="dob"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3}).?.?.?(?:[a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([M]$2)/([N]$3)"
                        />
                        <rejectIfNotValid src="dob"/>
                        <assignField src="dob" field="DateOfBirth"/>

                        <assignIfValid dst="pob" src="dataPlaceOfBirth" offset="+1" overwrite="false"/>
                        <assignIfValid dst="pob" src="dataDateOfExpiry" offset="-1" overwrite="false"/>
                        <rejectIfNotValid src="pob"/>
                        <assignField src="pob" field="PlaceOfBirth"/>

                        <assignIfValid dst="sexRaw" src="dataSex" offset="+1"/>
                        <modifyIfValid dst="sexRaw" op="T,U"/>
                        <findLineMatch dst="sex" regex="^(M)$" value="($1)" overwrite="false"/>
                        <findLineMatch dst="sex" regex="^(F)$" value="($1)" overwrite="false"/>
                        <assignField src="sex" field="Gender"/>

                        <findLineMatch src="lineDoe" dst="doe"
                            regex="([0-9oOl]{2})(?: |[^A-Za-z0-9])*([a-zA-Z0-9]{3}).?.?.?(?:[a-zA-Z0-9]{3})(?: |[^A-Za-z0-9])*([1-2l][0-9oOl]{3})"
                            value="([N]$1)/([M]$2)/([N]$3)"
                        />
                        <rejectIfNotValid src="doe"/>
                        <assignField src="doe" field="DateOfExpiry"/>

                    <label src="end_document"/>

                </ML>
            </Front>

            <Back>
                <MRZ allow_special_chars="true">
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="PRY"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
                <!-- <PDF417/> -->
            </Back>
        </Version>

        <Version id="v2-2023" type="TD1" document_type="IDC" document_id="PRY-00-IDC-2023-000-01-01">
          <Front>
            <ML>
              <calculateOffset x="0.270" y="0.054" w="0.561" h="0.047" content="REPUBLICA@DEL@PARAGUAY" threshold="0.3"/>
              
              <findElementsIntersecting dst="var0" x="0.270" y="0.054" w="0.561" h="0.047"/>
              <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="REPUBLICA@DEL@PARAGUAY" param_2="0.3"/>
              <rejectIfNotValid reason="DocumentNotExpected" src="found0"/>
              
              <calculateOffset x="0.269" y="0.122" w="0.310" h="0.044" content="Cédula de Identidad Civíl" threshold="0.3"/>
              
              <findElementsIntersecting dst="var1" x="0.269" y="0.122" w="0.310" h="0.044"/>
              <assignIfContent overwrite="false" src="var1" dst="found1" value="Y" op="distance" param="Cédula de Identidad Civíl" param_2="0.3"/>
              <rejectIfNotValid reason="DocumentNotExpected" src="found1"/>
              
              <!-- <calculateOffset x="0.709" y="0.232" w="0.192" h="0.023" content="FECHA@DE@VENCIMIENTO" threshold="0.3"/> -->
              
              <findElementsIntersecting dst="match_var4" x="0.733" y="0.290" w="0.167" h="0.005"/>
              <matchIfValid overwrite="false" src="match_var4" regex="([0-9oOI]{2})-?([0-9oOI]{2})-?([0-9oOI]{4})" value="([N]$1)/([N]$2)/([N]$3)" dst="var4"/>
              <rejectIfNotValid src="var4"/>
              <assignField src="var4" field="DateOfExpiry"/>
              
              <calculateOffset x="0.328" y="0.236" w="0.091" h="0.022" content="APELLIDOS" threshold="0.3"/>
              
              <findElementsIntersecting dst="var5" x="0.330" y="0.292" w="0.376" h="0.005"/>
              <rejectIfNotValid src="var5"/>
              <assignField src="var5" field="LastName"/>
              
              <findElementsIntersecting dst="var6" x="0.333" y="0.336" w="0.378" h="0.006"/>
              <assignField src="var6" field="LastName2"/>
              
              <calculateOffset x="0.767" y="0.376" w="0.076" h="0.023" content="DONANTE" threshold="0.3"/>
              
              <findElementsIntersecting dst="match_var9" x="0.769" y="0.428" w="0.097" h="0.006"/>
              <matchIfValid overwrite="false" src="match_var9" regex="([S5][Il1])" value="Yes" dst="var9"/>
              <matchIfValid overwrite="false" src="match_var9" regex="(N[O0o])" value="No" dst="var9"/>
              <assignField src="var9" field="BloodDonor"/>
              
              <calculateOffset x="0.328" y="0.378" w="0.085" h="0.022" content="NOMBRES" threshold="0.3"/>
              
              <findElementsIntersecting dst="var10" x="0.328" y="0.433" w="0.392" h="0.004"/>
              <rejectIfNotValid src="var10"/>
              <assignField src="var10" field="FirstName"/>
              
              <findElementsIntersecting dst="var11" x="0.331" y="0.490" w="0.396" h="0.004"/>
              <assignField src="var11" field="FirstName2"/>

              <!-- <calculateOffset x="0.327" y="0.764" w="0.188" h="0.022" content="FECHA@DE@NACIMIENTO" threshold="0.3"/> -->
              
              <findElementsIntersecting dst="match_var14" x="0.325" y="0.816" w="0.164" h="0.005"/>
              <matchIfValid overwrite="false" src="match_var14" regex="([0-9oOI]{2})-?([0-9oOI]{2})-?([0-9oOI]{4})" value="([N]$1)/([N]$2)/([N]$3)" dst="var14"/>
              <rejectIfNotValid src="var14"/>
              <assignField src="var14" field="DateOfBirth"/>
              
              <calculateOffset x="0.558" y="0.760" w="0.041" h="0.026" content="SEXO" threshold="0.3"/>
              
              <findElementsIntersecting dst="match_var15" x="0.558" y="0.817" w="0.235" h="0.004"/>
              <matchIfValid overwrite="false" src="match_var15" regex="(F)" value="F" dst="var15"/>
              <matchIfValid overwrite="false" src="match_var15" regex="(M)" value="M" dst="var15"/>
              <assignField src="var15" field="Gender"/>
              
              <findElementsIntersecting dst="match_var17" x="0.061" y="0.869" w="0.226" h="0.006"/>
              <matchIfValid overwrite="false" src="match_var17" regex="([0-9oOI]{5,})" value="([N]$1)" dst="var17"/>
              <rejectIfNotValid src="var17"/>
              <assignField src="var17" field="DocumentNumber"/>
              
              <calculateOffset x="0.327" y="0.861" w="0.193" h="0.024" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
              
              <findElementsIntersecting dst="var18" x="0.324" y="0.914" w="0.627" h="0.006"/>
              <assignField src="var18" field="PlaceOfBirth"/>

              <assignResult src="$_PRY/IDCard/2023" field="DocumentModel"/>

            </ML>
            <FACE/>
            <CROP>
              <region id="Signature" x="0.477" y="0.543" w="0.241" h="0.191"/>
            </CROP>
          </Front>
          <Back>
            <MRZ>
                <field id="DocumentCode"              line="1" starts="1" count="2"/>
                <field id="Issuer"                    line="1" starts="3" count="3" regex="PRY"/>
                <field id="DocumentAdditionalNumber"  line="1" starts="6" count="9"/>
                <field id="DocumentNumber"            line="1" starts="16" count="8"/>
                <field id="Opt1"                      line="1" starts="16" count="15"/>
                <field id="DateOfBirth"               line="2" starts="1" count="6"/>
                <field id="Gender"                    line="2" starts="8" count="1"/>
                <field id="DateOfExpiry"              line="2" starts="9" count="6"/>
                <field id="Nationality"               line="2" starts="16" count="3"/>
                <field id="Opt2"                      line="2" starts="19" count="11"/>
                <field id="LastName"                  line="3" starts="1" count="??"/>
                <field id="FirstName"                 line="3" starts="??" count="30"/>

                <field id="NfcKey"                    line="1" starts="6" count="9"/>
            </MRZ>
            <BARCODE optional="yes" types="CODE128" decode="splitBy: ">
                <field id="DocumentAdditionalNumber"  data="0"/>
            </BARCODE>
            <ML>
              <calculateOffset x="0.467" y="0.034" w="0.150" h="0.028" content="FECHA@DE@EMISIÓN" threshold="0.3"/>
              
              <findElementsIntersecting dst="var0" x="0.467" y="0.034" w="0.150" h="0.028"/>
              <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="FECHA@DE@EMISIÓN" param_2="0.3"/>
              
              <findElementsIntersecting dst="match_var2" x="0.468" y="0.098" w="0.165" h="0.003"/>
              <matchIfValid overwrite="false" src="match_var2" regex="([0-9oOI]{2})-?([0-9oOI]{2})-?([0-9oOI]{4})" value="([N]$1)/([N]$2)/([N]$3)" dst="var2"/>
              <rejectIfNotValid src="var2"/>
              <assignField src="var2" field="DateOfIssue"/>
              
              <calculateOffset x="0.128" y="0.039" w="0.105" h="0.023" content="ESTADO@CIVIL" threshold="0.3"/>
              
              <findElementsIntersecting dst="var1" x="0.128" y="0.039" w="0.105" h="0.023"/>
              <assignIfContent overwrite="false" src="var1" dst="found1" value="Y" op="distance" param="ESTADO@CIVIL" param_2="0.3"/>
              
              <findElementsIntersecting dst="var3" x="0.135" y="0.099" w="0.102" h="0.005"/>
              <assignField src="var3" field="CivilStatus"/>
              
              <calculateOffset x="0.129" y="0.140" w="0.117" h="0.024" content="NACIONALIDAD" threshold="0.3"/>
              
              <findElementsIntersecting dst="var4" x="0.129" y="0.140" w="0.117" h="0.024"/>
              <assignIfContent overwrite="false" src="var4" dst="found4" value="Y" op="distance" param="NACIONALIDAD" param_2="0.3"/>
              
              <findElementsIntersecting dst="var5" x="0.130" y="0.195" w="0.267" h="0.004"/>
              <assignField src="var5" field="NationalityDemonym"/>
              
              <findElementsIntersecting dst="var6" x="0.725" y="0.561" w="0.154" h="0.007"/>
              <assignField src="var6" field="DocumentAdditionalNumber"/>
            </ML>
          </Back>
        </Version>

    </DocumentID>

    <DocumentID id="MX" iso="MEX">
        
        <Version id="PresetId" type="TD1" document_type="IDC">
            <Front>
                <BLINKID>
                    <ML>
                        <field id="LastName1" move="FatherName"/>
                        <field id="LastName2" move="MotherName"/>
                        <field id="LastName" join="FatherName,MotherName" separator=" "/>
                        <field id="FirstName" move="FullName"/>
                        <field id="FullName" join="FullName,FatherName,MotherName" separator=" "/>
                        <field id="ElectorKey" move="DocumentAdditionalNumber"/>
                        <field id="CURP" copy="DocumentNumber"/>
                        <field id="RegistrationYear" move="DocumentOptionalAdditionalNumber"/>
                    </ML>
                </BLINKID>
            </Front>
            <Back>
                <BLINKID>
                    <ML>
                        <field id="OCRNumber" move="DocumentNumber"/>
                    </ML>
                    <MRZ>
                        <field id="DocNumberMRZ" move="DocumentNumber"/>
                    </MRZ>
                </BLINKID>
            </Back>
        </Version>

        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="10" split_by="elements" separation="0.08" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="ine" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="4"/>
                    <findLineContent dst="ife" content="INSTITUTO@FEDERAL@ELECTORAL" threshold="4"/>
                    <findLineContent dst="rfe" content="REGISTRO@FEDERAL@DE@ELECTORES" threshold="0.3"/>
                    <findLineContent dst="cpv" content="CREDENCIAL@PARA@VOTAR" threshold="0.3"/>

                    <rejectIfNotValid2 src="cpv" src2="ife" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="cpv" src2="rfe" reason="DocumentNotExpected"/>
                    <!-- In this case we reject this scan if it's NOT present -->
                    <rejectIfNotValid src="rfe" reason="DocumentNotExpected"/>

                    <findLineContent dst="nom" content="NOMBRE" threshold="2"/>
                    <findLineMatch dst="nom"
                        regex="^([NnMm][Oo0D][MnNn][B8D3][RnrB][EB])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent dst="domi" content="DOMICILIO" threshold="3"/>
                    <findLineMatch dst="domi"
                        regex="^([DOo0][Oo0D][MnNn][Il1]?[CcOo0][Il1]?[LUu][Il1]?[Oo0D])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="domi"/>

                    <assignIfValid dst="fn" src="domi" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln1" src="domi" offset="-2" overwrite="false"/>
                    <assignIfValid dst="ln2" src="domi" offset="-3" overwrite="false"/>

                    <jumpIfNotValid src="ln2" dst="no_swap"/>
                        <assignIfValid dst="temp" src="ln2"/>
                        <assignIfValid dst="ln2" src="ln1"/>
                        <assignIfValid dst="ln1" src="temp"/>
                    <label src="no_swap"/>

                    <modifyIfValid dst="fn" op="U"/>
                    <modifyIfValid dst="ln1" op="U"/>
                    <modifyIfValid dst="ln2" op="U"/>

                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>

                    <assignField src="fn" field="FirstName" block="true"/>
                    <assignField src="ln1" field="LastName1" block="true"/>
                    <assignField src="ln2" field="LastName2" block="true"/>
                    <assignField src="ln" field="LastName"/>

                    <findLineMatch src="lineElectorKey" dst="elecKey"
                        regex="([A-Za-z]{6})([0-9oOlBASsG]{8})([A-Za-z]{1})([0-9oOlBASsG]{3})"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineElectorKey" dst="elecKey"
                        regex="(?:[cCOoD][LUu][A4][VvYy][EB8].*|.*[EB8][LUu][EB8][cC][TIl1][oO0][RnBH]) ([A-Z0-9]+)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="elecKey"/>
                    <assignField src="elecKey" field="ElectorKey"/>

                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(O)(\d)"
                        value="($1)0($3)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(4)(\d)"
                        value="($1)A($3)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Za-z0-9]{4})([0-9A-Za-z]{6})([A-Za-z]{6})([A-Za-z0-9])([0-9A-Za-z])"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)([N]$5)"
                        overwrite="false"
                    />

                    <findLineMatch src="lineCURP" dst="curp"
                        regex="(?:[cCO0o][uU][RnBH][PRp]) ?([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch dst="CURPstr"
                        regex="^([cCO0o][uU][RnBH][PRp])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="lineCURP" src="CURPstr" offset="1" overwrite="false"/>
                    <matchIfValid src="lineCURP" dst="curp"
                        regex="([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <!-- We check for the last time if the CURP is well-formed -->
                    <matchIfValid src="curp" dst="validCurp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="validCurp"/>
                    <assignField src="validCurp" field="CURP"/>
                    <!-- We use CURP as DocumentNumber -->
                    <assignField src="validCurp" field="DocumentNumber"/>

                    <findLineMatch src="lineFolio" dst="folio"
                        regex="(?:[FP][Oo0D]L?[LUu][Il1]?[Oo0D]) ?([A-Z0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="lineFolio" content="FOLIO#" threshold="0.2" overwrite="false"/>
                    <replaceIfValid dst="lineFolio" content="FOLIO" replace="" threshold="0.2" overwrite="false"/>
                    <matchIfValid src="lineFolio" dst="folio"
                        regex="([A-Z0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="folio" field="Folio"/>

                    <assignIfValid dst="address1" src="lineFolio" offset="-3" overwrite="false"/>
                    <assignIfValid dst="address2" src="lineFolio" offset="-2" overwrite="false"/>
                    <assignIfValid dst="address3" src="lineFolio" offset="-1" overwrite="false"/>

                    <assignIfValid dst="address1" src="lineElectorKey" offset="-3" overwrite="false"/>
                    <assignIfValid dst="address2" src="lineElectorKey" offset="-2" overwrite="false"/>
                    <assignIfValid dst="address3" src="lineElectorKey" offset="-1" overwrite="false"/>

                    <assignIfValid dst="address" src="address1" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" - " suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix=" - " suffix=""/>

                    <assignIfContent dst="address1" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignField src="address1" field="Address1" block="true"/>
                    <assignField src="address2" field="Address2" block="true"/>
                    <assignField src="address3" field="Address3" block="true"/>
                    <assignField src="address" field="Address"/>

                    <findLineContent dst="es_mun_loc" content="ESTADO @@ MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid3 src="es_mun_loc" dst="estado" dst2="municipio" dst3="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="loc_emi_vig" content="LOCALIDAD @@@@ EMISIÓN @@@@ VIGENCIA @@@@" threshold="0.2"/>
                    <matchIfValid3 src="loc_emi_vig" dst="local" dst2="emision" dst3="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineContent dst="es_mun" content="ESTADO @@ MUNICIPIO @@@" threshold="0.2"/>
                    <matchIfValid2 src="es_mun" dst="estado" dst2="municipio"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="mun_sec" content="MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 src="mun_sec" dst="municipio" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="es" content="ESTADO @@" threshold="0.2"/>
                    <matchIfValid src="es" dst="estado"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="loc_sec" content="LOCALIDAD @@@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 src="loc_sec" dst="local" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="emi_vig" content="EMISIÓN @@@@ VIGENCIA HASTA @@@@" threshold="0.3"/>
                    <matchIfValid2 src="emi_vig" dst="emision" dst2="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineMatch src="line_dob_sec_vig" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_dob_sec_vig" dst="seccion"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?([0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_dob_sec_vig" dst="emision"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?([1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_dob_sec_vig" dst="vigencia"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <concatenateIfValid dst="DoI" src="emision" prefix="01/01/" suffix=""/>
                    <concatenateIfValid dst="DoE" src="vigencia" prefix="31/12/" suffix=""/>

                    <assignField src="estado" field="Estado" block="true"/>
                    <assignField src="municipio" field="Municipio" block="true"/>
                    <assignField src="local" field="Localidad" block="true"/>
                    <assignField src="seccion" field="Seccion" block="true"/>
                    <assignField src="DoI" field="DateOfIssue" block="true"/>
                    <assignField src="DoE" field="DateOfExpiry" block="true"/>
                    <assignField src="DoB" field="DateOfBirth" block="true"/>

                    <findLineContent dst="edad" content="EDAD @@" threshold="2"/>
                    <matchIfValid src="edad" dst="age"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="age" field="Age"/>

                    <findLineContent dst="sex" content="SEXO @" threshold="2"/>
                    <matchIfValid src="sex" dst="gender"
                        regex="(H|M)"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="gender" field="Gender"/>

                    <!-- We try again with the date of birth -->
                    <findLineMatch dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid src="curp" dst="DoB"
                        regex="^(?:[A-Za-z0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})(?:[A-Za-z0-9]{8})$"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                        overwrite="false"
                    />
                    <assignField src="DoB" field="DateOfBirth" block="true"/>

                    <!-- We try to find Registration year and emision number -->
                    <matchIfValid src="lineFolio" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="lineCURP" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="regYearIssueStr" dst="regYear"
                        regex="^([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="regYear" field="RegistrationYear"/>

                    <matchIfValid src="lineFolio" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="lineCURP" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="regYearIssueStr" dst="issueNumber"
                        regex="^(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <assignField src="issueNumber" field="IssueNumber"/>

                    <!-- We try again with Seccion and Vigencia -->
                    <findLineMatch src="line_sec_vig" dst="seccion2"
                        regex="^([0-9]{4}) [0-9]{4} ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_sec_vig" dst="emision2"
                        regex="^[0-9]{4} ([0-9]{4}) ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_sec_vig" dst="vigencia2"
                        regex="^[0-9]{4} [0-9]{4} ?-? ?([0-9]{4})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <concatenateIfValid dst="DoI2" src="emision2" prefix="01/01/" suffix=""/>
                    <concatenateIfValid dst="DoE2" src="vigencia2" prefix="31/12/" suffix=""/>
                    <assignIfValid dst="DoI" src="DoI2" overwrite="false"/>
                    <assignIfValid dst="DoE" src="DoE2" overwrite="false"/>
                    <rejectIfNotValid src="DoI"/>
                    <rejectIfNotValid src="DoE"/>

                    <assignField src="seccion2" field="Seccion" block="true"/>
                    <assignField src="DoI2" field="DateOfIssue" block="true"/>
                    <assignField src="DoE2" field="DateOfExpiry" block="true"/>

                </ML>
            </Front>

            <Back>
                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="MEX"/>
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
                <BARCODE optional="yes"/>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="10" split_by="lines" separation="0.20" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <!-- <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/> -->

                    <findLineContent dst="mark" content="ESTE@DOCUMENTO@ES@INTRANSFERIBLE" threshold="0.3"/>
                    <findLineContent dst="mark2" content="EL@TITULAR@ESTA@OBLIGADO@A@NOTI-" threshold="0.3"/>
                    <findLineContent dst="inst_nac_elect" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="0.3"/>
                    <findLineContent dst="efle" content="ELECCIONES@FEDERALES@LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="efle" content="ELECCIONES@FEDERALES" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="efle" content="LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>

                </ML>
                <ML-90 cols="10" split_by="lines" separation="0.20" space_separation="0.05">
                    <findLineMatch dst="OCRNumber"
                        regex="([0-9A-Za-z]{13})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch dst="OCRNumber"
                        regex="((?:[0-9A-Za-z] ?){13})"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineMatch dst="OCRNumber"
                        regex="^([0-9A-Za-z]{10,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch dst="OCRNumber"
                        regex="^((?:[0-9A-Za-z] ?){10,})=?$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <replaceIfValid dst="OCRNumber" content=" " replace=""/>
                    <!--<rejectIfNotValid src="OCRNumber"/>-->
                    <assignField src="OCRNumber" field="OCRNumber"/>
                </ML-90>
            </Back>
    
        </Version>

        <Version id="v2" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="10" split_by="elements" separation="0.08" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="ine" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="4"/>
                    <findLineContent dst="ife" content="INSTITUTO@FEDERAL@ELECTORAL" threshold="4"/>
                    <findLineContent dst="rfe" content="REGISTRO@FEDERAL@DE@ELECTORES" threshold="0.3"/>
                    <findLineContent dst="cpv" content="CREDENCIAL@PARA@VOTAR" threshold="0.3"/>

                    <rejectIfNotValid2 src="cpv" src2="ine" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="cpv" src2="rfe" reason="DocumentNotExpected"/>
                    <!-- In this case we reject this scan if IT'S present -->
                    <rejectIfValid src="rfe" reason="DocumentNotExpected"/>


                    <findLineContent dst="nom" content="NOMBRE" threshold="2"/>
                    <findLineMatch dst="nom"
                        regex="^([NnMm][Oo0D][MnNn][B8D3][RnrB][EB])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineContent dst="domi" content="DOMICILIO" threshold="3"/>
                    <findLineMatch dst="domi"
                        regex="^([DOo0][Oo0D][MnNn][Il1]?[CcOo0][Il1]?[LUu][Il1]?[Oo0D])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="domi"/>

                    <assignIfValid dst="fn" src="domi" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln1" src="domi" offset="-2" overwrite="false"/>
                    <assignIfValid dst="ln2" src="domi" offset="-3" overwrite="false"/>

                    <jumpIfNotValid src="ln2" dst="no_swap"/>
                        <assignIfValid dst="temp" src="ln2"/>
                        <assignIfValid dst="ln2" src="ln1"/>
                        <assignIfValid dst="ln1" src="temp"/>
                    <label src="no_swap"/>

                    <modifyIfValid dst="fn" op="U"/>
                    <modifyIfValid dst="ln1" op="U"/>
                    <modifyIfValid dst="ln2" op="U"/>
                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>

                    <assignField src="fn" field="FirstName" block="true"/>
                    <assignField src="ln1" field="LastName1" block="true"/>
                    <assignField src="ln2" field="LastName2" block="true"/>
                    <assignField src="ln" field="LastName"/>

                    <findLineMatch src="lineElectorKey" dst="elecKey"
                        regex="([A-Za-z]{6})([0-9oOlBASsG]{8})([A-Za-z]{1})([0-9oOlBASsG]{3})"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineElectorKey" dst="elecKey"
                        regex="(?:[cCOoD][LUu][A4][VvYy][EB8].*|.*[EB8][LUu][EB8][cC][TIl1][oO0][RnBH]) ([A-Z0-9]+)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="elecKey"/>
                    <assignField src="elecKey" field="ElectorKey"/>

                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(O)(\d)"
                        value="($1)0($3)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3})(4)(\d)"
                        value="($1)A($3)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch src="lineCURP" dst="curp"
                        regex="([A-Za-z]{4})([0-9A-Za-z]{6})([A-Za-z]{6})([A-Za-z0-9])([0-9A-Za-z])"
                        value="([U]$1)([N]$2)([U]$3)([N]$4)([N]$5)"
                        overwrite="false"
                    />

                    <findLineMatch src="lineCURP" dst="curp"
                        regex="(?:[cCO0o][uU][RnBH][PRp]) ?([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch dst="CURPstr"
                        regex="^([cCO0o][uU][RnBH][PRp])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="lineCURP" src="CURPstr" offset="1" overwrite="false"/>
                    <matchIfValid src="lineCURP" dst="curp"
                        regex="([A-Z0-9]{18})"
                        value="($1)"
                        overwrite="false"
                    />
                    <!-- We check for the last time if the CURP is well-formed -->
                    <matchIfValid src="curp" dst="validCurp"
                        regex="([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0[1-9]|1[0-2])(?:0[1-9]|[12]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d]\d)"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="validCurp"/>
                    <assignField src="validCurp" field="CURP"/>
                    <!-- We use CURP as DocumentNumber -->
                    <assignField src="validCurp" field="DocumentNumber"/>

                    <findLineMatch src="lineFolio" dst="folio"
                        regex="(?:[FP][Oo0D]L?[LUu][Il1]?[Oo0D]) ?([A-Z0-9]+)"
                        value="([N]$1)"
                    />
                    <assignField src="folio" field="Folio"/>

                    <assignIfValid dst="address1" src="lineFolio" offset="-3" overwrite="false"/>
                    <assignIfValid dst="address2" src="lineFolio" offset="-2" overwrite="false"/>
                    <assignIfValid dst="address3" src="lineFolio" offset="-1" overwrite="false"/>

                    <assignIfValid dst="address1" src="lineElectorKey" offset="-3" overwrite="false"/>
                    <assignIfValid dst="address2" src="lineElectorKey" offset="-2" overwrite="false"/>
                    <assignIfValid dst="address3" src="lineElectorKey" offset="-1" overwrite="false"/>

                    <assignIfValid dst="address" src="address1" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" - " suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix=" - " suffix=""/>

                    <assignIfContent dst="address1" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignField src="address1" field="Address1" block="true"/>
                    <assignField src="address2" field="Address2" block="true"/>
                    <assignField src="address3" field="Address3" block="true"/>
                    <assignField src="address" field="Address"/>

                    <findLineContent dst="es_mun_loc" content="ESTADO @@ MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid3 src="es_mun_loc" dst="estado" dst2="municipio" dst3="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="loc_emi_vig" content="LOCALIDAD @@@@ EMISIÓN @@@@ VIGENCIA @@@@" threshold="0.2"/>
                    <matchIfValid3 src="loc_emi_vig" dst="local" dst2="emision" dst3="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineContent dst="es_mun" content="ESTADO @@ MUNICIPIO @@@" threshold="0.2"/>
                    <matchIfValid2 src="es_mun" dst="estado" dst2="municipio"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="mun_sec" content="MUNICIPIO @@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 src="mun_sec" dst="municipio" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="es" content="ESTADO @@" threshold="0.2"/>
                    <matchIfValid src="es" dst="estado"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="loc_sec" content="LOCALIDAD @@@@ SECCION @@@@" threshold="0.2"/>
                    <matchIfValid2 src="loc_sec" dst="local" dst2="seccion"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineContent dst="emi_vig" content="EMISIÓN @@@@ VIGENCIA HASTA @@@@" threshold="0.3"/>
                    <matchIfValid2 src="emi_vig" dst="emision" dst2="vigencia"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <findLineMatch src="line_dob_sec_vig" dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_dob_sec_vig" dst="seccion"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?([0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_dob_sec_vig" dst="emision"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?([1-2l][0-9oOl]{3}) ?- ?(?:[1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_dob_sec_vig" dst="vigencia"
                        regex="(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[0-9oOl]{2})(?: |-|\.|\/)*(?:[1-2l][0-9oOl]{3}) ?(?:[0-9]{4}) ?(?:[1-2l][0-9oOl]{3}) ?- ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <concatenateIfValid dst="DoI" src="emision" prefix="01/01/" suffix=""/>
                    <concatenateIfValid dst="DoE" src="vigencia" prefix="31/12/" suffix=""/>

                    <assignField src="estado" field="Estado" block="true"/>
                    <assignField src="municipio" field="Municipio" block="true"/>
                    <assignField src="local" field="Localidad" block="true"/>
                    <assignField src="seccion" field="Seccion" block="true"/>
                    <assignField src="DoI" field="DateOfIssue" block="true"/>
                    <assignField src="DoE" field="DateOfExpiry" block="true"/>
                    <assignField src="DoB" field="DateOfBirth" block="true"/>

                    <findLineContent dst="edad" content="EDAD @@" threshold="2"/>
                    <matchIfValid src="edad" dst="age"
                        regex="(?:[A-Za-z]+ ?)([0-9]+)"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="age" field="Age"/>

                    <findLineContent dst="sex" content="SEXO @" threshold="2"/>
                    <matchIfValid src="sex" dst="gender"
                        regex="(H|M)"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="gender" field="Gender"/>

                    <!-- We try again with the date of birth -->
                    <findLineMatch dst="DoB"
                        regex="([0-9oOl]{2})(?: |-|\.|\/)*([0-9oOl]{2})(?: |-|\.|\/)*([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid src="curp" dst="DoB"
                        regex="^(?:[A-Za-z0-9]{4})([0-9]{2})([0-9]{2})([0-9]{2})(?:[A-Za-z0-9]{8})$"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                        overwrite="false"
                    />
                    <assignField src="DoB" field="DateOfBirth" block="true"/>

                    <!-- We try to find Registration year and emision number -->
                    <matchIfValid src="lineFolio" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="lineCURP" dst="regYear"
                        regex="(?:[A-Za-z]+) ?([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="regYearIssueStr" dst="regYear"
                        regex="^([1-2][0-9]{3}) (?:[0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="regYear" field="RegistrationYear"/>

                    <matchIfValid src="lineFolio" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="lineCURP" dst="issueNumber"
                        regex="(?:[A-Za-z]+) ?(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="regYearIssueStr" dst="issueNumber"
                        regex="^(?:[1-2][0-9]{3}) ([0-9]{2})$"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <assignField src="issueNumber" field="IssueNumber"/>

                    <!-- We try again with Seccion and Vigencia -->
                    <findLineMatch src="line_sec_vig" dst="seccion2"
                        regex="^([0-9]{4}) [0-9]{4} ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_sec_vig" dst="emision2"
                        regex="^[0-9]{4} ([0-9]{4}) ?-? ?[0-9]{4}$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <matchIfValid src="line_sec_vig" dst="vigencia2"
                        regex="^[0-9]{4} [0-9]{4} ?-? ?([0-9]{4})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <concatenateIfValid dst="DoI2" src="emision2" prefix="01/01/" suffix=""/>
                    <concatenateIfValid dst="DoE2" src="vigencia2" prefix="31/12/" suffix=""/>
                    <assignIfValid dst="DoI" src="DoI2" overwrite="false"/>
                    <assignIfValid dst="DoE" src="DoE2" overwrite="false"/>
                    <rejectIfNotValid src="DoI"/>
                    <rejectIfNotValid src="DoE"/>

                    <assignField src="seccion2" field="Seccion" block="true"/>
                    <assignField src="DoI2" field="DateOfIssue" block="true"/>
                    <assignField src="DoE2" field="DateOfExpiry" block="true"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="MEX"/>
                    <field id="DocNumberMRZ"    line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
                <BARCODE optional="yes"/>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="10" split_by="lines" separation="0.20" space_separation="0.05">

                    <findLineContent dst="ine" content="INE" threshold="0.1"/>
                    <findLineContent dst="efle" content="ELECCIONES@FEDERALES@LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="efle" content="ELECCIONES@FEDERALES" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="efle" content="LOCALES@Y@EXTRAORDINARIAS" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="inst_nac_elect" content="INSTITUTO@NACIONAL@ELECTORAL" threshold="0.3"/>
                    <rejectIfNotValid3 src="ine" src2="efle" src3="inst_nac_elect" reason="DocumentNotExpected"/>

                </ML>
            </Back>

        </Version>
    </DocumentID>
     
    <DocumentID id="CR" iso="CRI">
        <Version id="All" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="6" split_by="elements" separation="0.20" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="cdidm" content="TARJETA@DE@IDENTIDAD@DE@MENORES@DE@EDAD" threshold="0.3"/>
                    <rejectIfValid src="cdidm" reason="DocumentNotExpected"/>

                    <findLineContent dst="rdc" content="REPÚBLICA@DE@COSTA@RICA" threshold="0.3"/>
                    <findLineContent dst="tse" content="Tribunal@Supremo@de@Elecciones" threshold="0.3"/>
                    <findLineContent dst="cdi" content="Cédula@de@Identidad" threshold="0.3"/>

                    <rejectIfNotValid3 src="rdc" src2="tse" src3="cdi" reason="DocumentNotExpected"/>

                    <findLineMatch src="dataDocNumber" dst="docNumber"
                        regex="([0-9]+) ?([0-9]{4}) ?([0-9]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="dataCC" dst="cc"
                        regex="^(?:[cC][\. ]?[cC]\:?)(.*)"
                        value="([U]$1)"
                    />
                    <jumpIfValid src="cc" dst="ccFound"/>
                    <findLineContent dst="cc" content="C.C:" threshold="2"/>
                    <replaceIfValid dst="cc" content="C.C:" replace="" threshold="2"/>
                    <label src="ccFound"/>
                    <rejectIfNotValid src="cc"/>
                    <assignField src="cc" field="CC"/>

                    <assignIfValid dst="ln2" src="dataCC" offset="-1" overwrite="false"/>
                    <assignIfValid dst="ln1" src="dataCC" offset="-2" overwrite="false"/>
                    <assignIfValid dst="fn"  src="dataCC" offset="-3" overwrite="false"/>

                    <replaceIfValid dst="ln2" content="Apellido" replace="" threshold="3"/>
                    <replaceIfValid dst="ln2" content="2P" replace=""/>
                    <replaceIfValid dst="ln2" content="2" replace=""/>
                    <replaceIfValid dst="ln2" content="°" replace=""/>
                    <replaceIfValid dst="ln2" content=":" replace=""/>
                    <replaceIfValid dst="ln2" content="&quot;" replace=""/>
                    <modifyIfValid dst="ln2" op="T,U"/>
                    <assignField src="ln2" field="LastName2"/>

                    <replaceIfValid dst="ln1" content="Apellido" replace="" threshold="3"/>
                    <replaceIfValid dst="ln1" content="1P" replace=""/>
                    <replaceIfValid dst="ln1" content="1" replace=""/>
                    <replaceIfValid dst="ln1" content="°" replace=""/>
                    <replaceIfValid dst="ln1" content=":" replace=""/>
                    <replaceIfValid dst="ln1" content="&quot;" replace=""/>
                    <modifyIfValid dst="ln1" op="T,U"/>
                    <assignField src="ln1" field="LastName1"/>

                    <matchIfValid src="fn" dst="name"
                        regex="(?:[nN][oO0][mM][b6]re:? ?)([A-Z0-9 ]+)"
                        value="([U]$1)"
                    />
                    <modifyIfValid dst="name" op="T,U"/>
                    <jumpIfValid src="name" dst="nameFound"/>

                    <replaceIfValid dst="name" content=":" replace=""/>
                    <replaceIfValid dst="name" content="Nombre" replace="" threshold="3"/>
                    <modifyIfValid dst="name" op="T,U"/>
                    <assignIfContent dst="name_not_empty" src="name" value="yes"
                        op="not_equals" param=""
                        overwrite="false"
                    />
                    <jumpIfValid src="name_not_empty" dst="nameFound"/>

                    <findLineMatch src="nameStr" dst="name"
                        regex="^([A-ZÑ ]+)$"
                        value="([U]$1)"
                    />
                    <jumpIfValid src="nameStr" dst="nameFound"/>

                    <rejectIfNotValid src="nameNotFound"/>

                    <label src="nameFound"/>
                    <assignField src="name" field="FirstName"/>

                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <assignField src="ln" field="LastName"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <!-- <PDF417/> --> <!-- PDF417 Contains binary information. Unable to decode -->

                <ML cols="2" split_by="elements" separation="0.05" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="dataDocNumber" dst="docNumber"
                        regex="([0-9]+) ?([0-9]{4}) ?([0-9]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="dataDoB" dst="DoB"
                        regex="([0-9]{2}) ?([0-9]{2}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch src="dataDoE" dst="DoE"
                        regex="([0-9]{2}) ?([0-9]{2}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineContent dst="PoB" content="Lugar@de@Nac#" threshold="0.3"/>
                    <findLineContent dst="fatherName" content="Nombre@del@Padre#" threshold="0.3"/>
                    <findLineContent dst="motherName" content="Nombre@de@la@Madre#" threshold="0.3"/>
                    <findLineContent dst="domElectoral" content="Domicilio@Electoral#" threshold="0.3"/>

                    <replaceIfValid dst="PoB" content="Lugar" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content="de Nacimiento" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content="de Nac" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <modifyIfValid dst="PoB" op="T"/>
                    <assignField src="PoB" field="PlaceOfBirth" block="true"/>

                    <replaceIfValid dst="fatherName" content="Nombre" replace="" threshold="0.3"/>
                    <replaceIfValid dst="fatherName" content="del" replace="" threshold="0.3"/>
                    <replaceIfValid dst="fatherName" content="Padre" replace="" threshold="0.3"/>
                    <replaceIfValid dst="fatherName" content=":" replace=""/>
                    <modifyIfValid dst="fatherName" op="T,U"/>
                    <assignField src="fatherName" field="FatherName" block="true"/>

                    <replaceIfValid dst="motherName" content="Nombre" replace="" threshold="0.3"/>
                    <replaceIfValid dst="motherName" content="de" replace="" threshold="0.3"/>
                    <replaceIfValid dst="motherName" content="la" replace="" threshold="0.3"/>
                    <replaceIfValid dst="motherName" content="Madre" replace="" threshold="0.3"/>
                    <replaceIfValid dst="motherName" content=":" replace=""/>
                    <modifyIfValid dst="motherName" op="T,U"/>
                    <assignField src="motherName" field="MotherName" block="true"/>

                    <replaceIfValid dst="domElectoral" content="Domicilio" replace="" threshold="0.3"/>
                    <replaceIfValid dst="domElectoral" content="Electoral" replace="" threshold="0.3"/>
                    <replaceIfValid dst="domElectoral" content=":" replace=""/>
                    <modifyIfValid dst="domElectoral" op="T"/>
                    <assignField src="domElectoral" field="ElectoralAddress" block="true"/>

                    <findLineContent dst="sexStr" content="Sexo: @" threshold="2"/>
                    <assignIfContent2 src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>

                </ML>
            </Back>

            
        </Version>

        <Version id="Menores" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="1" split_by="elements" separation="0.20" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="tse" content="TRIBUNAL@SUPREMO@DE@ELECCIONES" threshold="0.3"/>
                    <rejectIfNotValid src="tse" reason="DocumentNotExpected"/>
                    <findLineContent dst="cdidm" content="TARJETA@DE@IDENTIDAD@DE@MENORES@DE@EDAD" threshold="0.3"/>
                    <rejectIfNotValid src="cdidm" reason="DocumentNotExpected"/>

                    <findLineMatch src="dataDocNumber" dst="docNumber"
                        regex="([0-9]+) ?([0-9]{4}) ?([0-9]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="ape1" content="PRIMER@APELLIDO" threshold="0.3"/>
                    <findLineContent dst="ape2" content="SEGUNDO@APELLIDO" threshold="0.3"/>
                    <findLineContent dst="nom" content="NOMBRE" threshold="0.3"/>
                    <findLineContent dst="cc" content="CC" threshold="0.3"/>

                    <assignIfValid dst="ln1" src="ape1" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln1" src="ape2" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="ln1"/>

                    <assignIfValid dst="ln2" src="ape2" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="nom" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="ln2"/>

                    <assignIfValid dst="ln" src="ln1" overwrite="false"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="ln1" field="LastName1"/>
                    <assignField src="ln2" field="LastName2"/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="cc" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="fn"/>
                    <assignField src="fn" field="FirstName"/>
                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <!-- <PDF417/> --> <!-- PDF417 Contains binary information. Unable to decode -->

                <ML cols="2" split_by="elements" separation="0.05" space_separation="0.05">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="dataDocNumber" dst="docNumber"
                        regex="([0-9]+) ?([0-9]{4}) ?([0-9]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="dataDoB" dst="DoB"
                        regex="([0-9oOl]{2}) ?([0-9oOl]{2}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch src="dataDoE" dst="DoE"
                        regex="([0-9oOl]{2}) ?([0-9oOl]{2}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineContent dst="PoB" content="Lugar@de@Nac#" threshold="0.3"/>
                    <findLineContent dst="fatherName" content="Padre#" threshold="0.3"/>
                    <findLineContent dst="motherName" content="Madre#" threshold="0.3"/>
                    <findLineContent dst="domElectoral" content="Domicilio#" threshold="0.3"/>

                    <replaceIfValid dst="PoB" content="Lugar" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content="de Nacimiento" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content="de Nac" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <modifyIfValid dst="PoB" op="T"/>
                    <assignField src="PoB" field="PlaceOfBirth" block="true"/>

                    <replaceIfValid dst="fatherName" content="Padre" replace="" threshold="0.3"/>
                    <replaceIfValid dst="fatherName" content=":" replace=""/>
                    <modifyIfValid dst="fatherName" op="T,U"/>
                    <assignField src="fatherName" field="FatherName" block="true"/>

                    <replaceIfValid dst="motherName" content="Madre" replace="" threshold="0.3"/>
                    <replaceIfValid dst="motherName" content=":" replace=""/>
                    <modifyIfValid dst="motherName" op="T,U"/>
                    <assignField src="motherName" field="MotherName" block="true"/>

                    <replaceIfValid dst="domElectoral" content="Domicilio" replace="" threshold="0.3"/>
                    <replaceIfValid dst="domElectoral" content=":" replace=""/>
                    <modifyIfValid dst="domElectoral" op="T"/>
                    <assignField src="domElectoral" field="Address" block="true"/>

                    <findLineContent dst="sexStr" content="Sexo: @" threshold="2"/>
                    <assignIfContent2 src="sexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="sexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>
                </ML>
            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="GT" iso="GTM">
        <Version id="All" type="TD1" document_type="IDC" priority="PDF417,BARCODE,ML,MRZ,OCR,INPUT">
            <Front>
                <FACE/>
                <ML cols="4" split_by="elements" separation="0.035" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <!-- We try to find if ID is a driver's license to reject it -->
                    <findLineContent dst="ddt" content="DEPARTAMENTO@DE@TRÁNSITO" threshold="5"/>
                    <rejectIfValid src="ddt"/>

                    <findLineContent dst="exdo" content="EXTRANJERO@DOMICILIADO" threshold="5"/>
                    <jumpIfValid src="exdo" dst="Extranjeria"/>
                        <assignResult src="$_GTM/IDCard" field="DocumentModel"/>
                        <jump dst="IDCard"/>
                    <label src="Extranjeria"/>
                        <assignResult src="$_GTM/ForeignCard" field="DocumentModel"/>
                    <label src="IDCard"/>

                    <findLineMatch dst="cui" src="cuiStr"
                        regex="([0-9oOl]{4}) ?([0-9oOl]{5}) ?([0-9oOl]{4})"
                        value="([N]$1) ([N]$2) ([N]$3)"
                    />
                    <matchIfValid dst="docNumber" src="cuiStr"
                        regex="([0-9oOl]{4}) ?([0-9oOl]{5}) ?([0-9oOl]{4})"
                        value="([N]$1)([N]$2)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    <assignField src="cui" field="CUI"/>

                    <findLineContent dst="rdg" content="REPÚBLICA@DE@GUATEMALA@@CENTROAMÉRICA" threshold="0.3"/>
                    <findLineContent dst="rnp_dpi_dpi" content="Registro@Nacional@de@las@Personas@@@Documento@Personal@de@Identificación@@@DPI" threshold="0.3"/>
                    <findLineContent dst="rnp_dpi" content="Registro@Nacional@de@las@Personas" threshold="0.3"/>
                    <findLineContent dst="dpi" content="Documento@Personal@de@Identificación" threshold="0.3"/>
                    <findLineContent dst="cui" content="CÓDIGO@ÚNICO@DE@IDENTIFICACIÓN" threshold="0.3"/>

                    <rejectIfNotValid3 src="rnp_dpi_dpi" src2="rnp_dpi" src3="dpi" reason="DocumentNotExpected"/>

                    <findLineContent dst="nom" content="NOMBRE" threshold="0.33"/>
                    <findLineContent dst="ape" content="APELLIDO" threshold="0.33"/>

                    <rejectIfNotValid src="nom"/>
                    <rejectIfNotValid src="ape"/>

                    <!-- We block the line "SEXO" early to prevent reading "SEXO" as the second last name -->
                    <findLineContent dst="sexo" content="SEXO" threshold="1"/>
                    <findLineContent dst="sexMstr" content="MASCULINO" threshold="0.33"/>
                    <findLineContent dst="sexFstr" content="FEMENINO" threshold="0.33"/>

                    <!-- We block the line "NACIONALIDAD" to prevent reading it as second last name -->
                    <findLineContent dst="nacionalidad" content="NACIONALIDAD" threshold="4"/>
                    <rejectIfNotValid src="nacionalidad"/> <!-- We reject to prevent capturing the LastName wrong -->
                    <assignIfValid dst="nat" src="nacionalidad" offset="+1" overwrite="false"/>
                    <assignField src="nat" field="Nationality" block="true"/>

                    <assignIfValid dst="fn1" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn2" src="nom" offset="+2" overwrite="false"/>
                    <modifyIfValid dst="fn1" op="U"/>
                    <modifyIfValid dst="fn2" op="U"/>
                    <assignIfValid dst="fn" src="fn1"/>
                    <concatenateIfValid dst="fn" src="fn2" prefix=" " suffix=""/>
                    <assignField src="fn1" field="FirstName1" block="true"/>
                    <assignField src="fn2" field="FirstName2" block="true"/>
                    <assignField src="fn" field="FirstName" block="true"/>

                    <assignIfValid dst="ln1" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="ape" offset="+2" overwrite="false"/>
                    <assignIfValid dst="ln3" src="ape" offset="+3" overwrite="false"/>
                    <modifyIfValid dst="ln1" op="U"/>
                    <modifyIfValid dst="ln2" op="U"/>
                    <modifyIfValid dst="ln3" op="U"/>
                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>
                    <concatenateIfValid dst="ln" src="ln3" prefix=" " suffix=""/>
                    <assignField src="ln1" field="LastName1" block="true"/>
                    <assignField src="ln2" field="LastName2" block="true"/>
                    <assignField src="ln3" field="LastName3" block="true"/>
                    <assignField src="ln" field="LastName" block="true"/>

                    <assignIfContent src="sexMstr" dst="sex" value="M"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfContent src="sexFstr" dst="sex" value="F"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfValid dst="sex" src="sexo" offset="+1" overwrite="false"/>
                    <assignField src="sex" field="Gender" block="true"/>

                    <findLineMatch dst="dob" overwrite="false"
                        regex="([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <assignField src="dob" field="DateOfBirth"/>

                    <findLineMatch dst="doi" overwrite="false"
                        regex="([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />
                    <assignField src="doi" field="DateOfIssue"/>

                    <findLineContent dst="no_sign" content="NO@FIRMA" threshold="2"/>
                    <assignIfContent src="no_sign" dst="signed" value="NO"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfContent src="no_sign" dst="signed" value="YES"
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignField src="signed" field="Signed"/>

                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="GTM"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="9"/>
                    <field id="Opt1"            line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>
                <ML cols="5" split_by="lines" separation="0.01" space_separation="0.10">

                    <findLineMatch dst="mrzLine1" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <findLineMatch dst="mrzLine2" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <findLineMatch dst="mrzLine3" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <rejectIfNotValid3 src="mrzLine1" src2="mrzLine2" src3="mrzLine3" reason="DocumentNotExpected"/>
                    <replaceIfValid dst="mrzLine1" content=" " replace=""/>
                    <replaceIfValid dst="mrzLine2" content=" " replace=""/>
                    <replaceIfValid dst="mrzLine3" content=" " replace=""/>

                    <findLineContent dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.33" overwrite="false"/>
                    <findLineContent dst="vec" content="VECINDAD" threshold="0.33" overwrite="false"/>
                    <findLineContent dst="vec" content="@@VECINDAD" threshold="0.33" overwrite="false"/>
                    <findLineContent dst="pub" content="PUEBLO" threshold="0.33" overwrite="false"/>
                    <rejectIfNotValid2 src="ldn" src2="vec" reason="DocumentNotExpected"/>

                    <findLineMatch dst="pobCode"
                        regex="L ?[:\-\.]? ?([0-9A-Z\-\/\| ]+) ?F ?[:\-\.]? ?([0-9]+) ?P ?[:\-\.]? ?([0-9]+)"
                        value="L:($1) F:([N]$2) P:([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="pobCode" field="PlaceOfBirthCode"/>

                    <!-- We read Pueblo field -->
                    <assignIfValid dst="vil" src="pub" offset="1" overwrite="false"/>
                    <assignField src="vil" field="Village" block="true"/>

                    <!-- We read Vecindad field -->
                    <assignIfValid dst="nei1" src="vec" offset="1" overwrite="false"/>
                    <assignIfValid dst="nei2" src="vec" offset="2" overwrite="false"/>

                    <assignIfValid dst="nei" src="nei1" overwrite="false"/>
                    <concatenateIfValid dst="nei" src="nei2" prefix=" - " suffix=""/>

                    <assignField src="nei1" field="Neighbourhood1" block="true"/>
                    <assignField src="nei2" field="Neighbourhood2" block="true"/>
                    <assignField src="nei" field="Neighbourhood"/>

                    <!-- We read Lugar de nacimiento field -->
                    <assignIfValid dst="pob1" src="ldn" offset="1" overwrite="false"/>
                    <assignIfValid dst="pob2" src="ldn" offset="2" overwrite="false"/>
                    <assignIfValid dst="pob3" src="ldn" offset="3" overwrite="false"/>

                    <assignIfValid dst="pob" src="pob1" overwrite="false"/>
                    <concatenateIfValid dst="pob" src="pob2" prefix=" - " suffix=""/>
                    <concatenateIfValid dst="pob" src="pob3" prefix=" - " suffix=""/>

                    <assignIfContent dst="pob1" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignIfContent dst="pob2" value=""
                        op="not_exists"
                        overwrite="false"
                    />

                    <assignField src="pob1" field="PlaceOfBirth1" block="true"/>
                    <assignField src="pob2" field="PlaceOfBirth2" block="true"/>
                    <assignField src="pob3" field="PlaceOfBirth3" block="true"/>
                    <assignField src="pob" field="PlaceOfBirth"/>


                    <findLineMatch dst="doe" overwrite="false"
                        regex="^([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})$"
                        value="([N]$1)/([M]$2)/([N]$3)"
                    />

                    <findLineContent dst="ec" content="ESTADO@CIVIL" threshold="0.33"/>
                    <assignIfValid dst="maritalStatusStr" src="ec" offset="1" overwrite="false"/>
                    <modifyIfValid dst="maritalStatusStr" op="U"/>

                    <assignFromList src="maritalStatusStr" dst="maritalStatus"
                        list="SOLTERO,CASADO,VIUDO,DIVORCIADO,SEPARADO"
                        threshold="0.3"
                     />
                    <assignField src="maritalStatus" field="MaritalStatus"/>

                    <findLineMatch dst="serial"
                        regex="^([0-9oOlBASsG]{13})$"
                        value="([N]$1)"
                        overwrite="false"
                    />

                    <!-- We try to read MRZ -->
                    <matchIfValid src="mrzLine2" dst="doe"
                        regex="(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])[0-9](?:[MF])([0-9]{2})([0-1][0-9])([0-3][0-9])"
                        value="([N]$3)/([N]$2)/([YF]$1)"
                        overwrite="false"
                    />
                    <assignField src="doe" field="DateOfExpiry"/>

                    <matchIfValid src="mrzLine2" dst="dob"
                        regex="([0-9]{2})([0-1][0-9])([0-3][0-9])[0-9](?:[MF])(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])"
                        value="([N]$3)/([N]$2)/([YP]$1)"
                        overwrite="false"
                    />
                    <assignField src="dob" field="DateOfBirth"/>

                    <matchIfValid src="mrzLine2" dst="gender"
                        regex="(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])[0-9]([MF])(?:[0-9]{2})(?:[0-1][0-9])(?:[0-3][0-9])"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="gender" field="Gender"/>

                    <!-- We test again for Serial number -->
                    <findLineMatch dst="serial"
                        regex="^([0-9oOlBASsG]{13})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="serial" field="SerialNumber"/>

                </ML>
            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="CL" iso="CHL">
        <Version id="All" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="4" split_by="lines" separation="0.01" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineMatch src="docNumberStr" dst="docNumber"
                        regex="[R8] ?[uU] ?[nN] ?([0-9]+)[ \-\.]?([0-9]{3})[ \-\.]?([0-9]{3})[-\.]([0-9A-Z])"
                        value="([N]$1).([N]$2).([N]$3)-($4)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="rdc" content="REPÚBLICA@DE@CHILE" threshold="0.3"/>
                    <findLineContent dst="srcei" content="SERVICIO@DE@REGISTRO@CIVIL@E@IDENTIFICACIÓN" threshold="0.3"/>

                    <findLineContent dst="nom" content="NOMBRES" threshold="0.33"/>
                    <findLineContent dst="ape" content="APELLIDOS" threshold="0.33"/>

                    <rejectIfNotValid2 src="nom" src2="ape"/>

                    <findLineContent dst="nac" content="NACIONALIDAD" threshold="0.33"/>
                    <findLineContent dst="sexo" content="SEXO" threshold="1"/>

                    <findLineContent dst="fdn" content="FECHA@DE@NACIMIENTO" threshold="0.33"/>
                    <findLineContent dst="nd" content="NUMERO@DOCUMENTO" threshold="0.33"/>

                    <findLineContent dst="fde" content="FECHA@DE@EMISION" threshold="0.33"/>
                    <findLineContent dst="fdv" content="FECHA@DE@VENCIMIENTO" threshold="0.33"/>

                    <findLineMatch src="dobStr" dst="dob"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="dob" field="DateOfBirth"/>

                    <findLineMatch dst="idcard"
                        regex="([0-9]{3})[ \-\.]([0-9]{3})[ \-\.]([0-9]{3})$"
                        value="([N]$1).([N]$2).([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid dst="idcard" src="dobStr"
                        regex="([0-9]{3})[ \-\.]([0-9]{3})[ \-\.]([0-9]{3})$"
                        value="([N]$1).([N]$2).([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="idcard" field="IDCardNumber"/>

                    <findLineMatch2 src="doiStr" dst="doi" dst2="doe"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="doi" field="DateOfIssue"/>

                    <findLineMatch dst="doe"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <matchIfValid dst="doe" src="docNumberStr"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <assignField src="doe" field="DateOfExpiry"/>

                    <assignIfValid dst="ln1" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln2" src="ape" offset="+2" overwrite="false"/>
                    <assignIfValid dst="ln1" src="nom" offset="-2" overwrite="false"/>
                    <assignIfValid dst="ln2" src="nom" offset="-1" overwrite="false"/>
                    <modifyIfValid dst="ln1" op="U"/>
                    <modifyIfValid dst="ln2" op="U"/>

                    <assignIfValid dst="ln" src="ln1"/>
                    <concatenateIfValid dst="ln" src="ln2" prefix=" " suffix=""/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="ape" offset="+4" overwrite="false"/>
                    <modifyIfValid dst="fn" op="U"/>

                    <rejectIfNotValid src="ln"/>
                    <rejectIfNotValid src="fn"/>

                    <assignField src="ln1" field="LastName1"/>
                    <assignField src="ln2" field="LastName2"/>
                    <assignField src="ln" field="LastName"/>
                    <assignField src="fn" field="FirstName"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"                                   line="1" starts="1" count="2"/>
                    <field id="Issuer"                                         line="1" starts="3" count="3" regex="CHL"/>
                    <field id="DocumentCode==ID?DocumentNumber:IDCardNumber"   line="1" starts="6" count="9"/>
                    <field id="Opt1"                                           line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"                                    line="2" starts="1" count="6"/>
                    <field id="Gender"                                         line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"                                   line="2" starts="9" count="6"/>
                    <field id="Nationality"                                    line="2" starts="16" count="3"/>
                    <field id="DocumentCode==ID?Opt2:DocumentNumber"           line="2" starts="19" count="11"/>
                    <field id="LastName"                                       line="3" starts="1" count="??"/>
                    <field id="FirstName"                                      line="3" starts="??" count="30"/>

                    <field id="NfcKey"                                         line="1" starts="6" count="9"/>
                </MRZ>

                <ML cols="1" split_by="lines" separation="0.3" space_separation="0.10">

                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <findLineMatch dst="mrzCleaner" regex="(.*\&lt;\s?\&lt;.*)" value="($1)"/>
                    <rejectIfNotValid src="mrzCleaner" reason="DocumentNotExpected"/>

                    <findLineContent dst="nacioStr" content="Nació@en#" threshold="3"/>
                    <replaceIfValid dst="nacio" src="nacioStr" content="Nació@en" replace="" threshold="3"/>
                    <replaceIfValid dst="nacio" content=":" replace=""/>
                    <assignField src="nacio" field="PlaceOfBirth"/>

                    <findLineContent dst="visaStr" content="Visa#" threshold="1"/>
                    <replaceIfValid dst="visa" src="visaStr" content="Visa" replace="" threshold="1"/>
                    <replaceIfValid dst="visa" content=":" replace=""/>
                    <assignField src="visa" field="Visa"/>

                    <findLineContent dst="profStr" content="Profesión#" threshold="3"/>
                    <replaceIfValid dst="prof" src="profStr" content="Profesión" replace="" threshold="3"/>
                    <replaceIfValid dst="prof" content=":" replace=""/>
                    <assignField src="prof" field="Profession"/>

                </ML>

            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="UY" iso="URY">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>

                <ML cols="16" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="rodu" content="REPUBLICA@ORIENTAL@DEL@URUGUAY" threshold="0.3"/>
                    <findLineContent dst="ro" content="REPUBLICA@ORIENTAL" threshold="0.3"/>
                    <findLineContent dst="du" content="DEL@URUGUAY" threshold="0.3"/>
                    <findLineContent dst="dn" content="DIRECCION@NACIONAL" threshold="0.3"/>
                    <findLineContent dst="dic" content="DE@IDENTIFICACION@CIVIL" threshold="0.3"/>
                    <findLineContent dst="cdi" content="Cédula@de@Identidad" threshold="0.3"/>
                    <findLineContent dst="fir" content="Firma" threshold="1"/>
                    <rejectIfNotValid2 src="dn" src2="dic" reason="DocumentNotExpected"/>

                    <findLineMatch src="docStr" dst="docNumber"
                        regex="([0-9]+)[\.:, ]?([0-9]{3})[\.:, ]?([0-9]{3})[\.\-:, ]?([0-9])$"
                        value="([N]$1)([N]$2)([N]$3)([N]$4)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    <assignField src="docNumber" field="NfcKey"/>

                    <findLineMatch src="fnStr" dst="fn"
                        regex="[NH][oO0]i?[mMn]i?[bh][rt][e] ?(.+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="fn2" src="fn" offset="+1"/>
                    <concatenateIfValid dst="fn" src="fn2" prefix=" " suffix=""/>
                    <modifyIfValid dst="fn" op="U"/>

                    <assignField src="fn" field="FirstName"/>
                    <assignField src="fn" field="FullName"/>

                </ML>
            </Front>
            
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"       data="0"/>
                    
                    <field id="NfcKey"               data="0"/>
                </BARCODE>

                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <postProcessImage dst=""
                        rMin="0.000" rMax="0.000"
                        gMin="0.250" gMax="0.900"
                        bMin="0.000" bMax="0.000"
                        rWeight="0.000"
                        gWeight="1.000"
                        bWeight="0.000"
                    />

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="mrk1" content="Observaciones@@@Observaçoes" threshold="0.3"/>
                    <findLineContent dst="mrk2" content="Firma@Autorizada@@@Assinatura@Autorizada" threshold="0.3"/>
                    <rejectIfValid src="mrk1" reason="DocumentNotExpected"/>
                    <rejectIfValid src="mrk2" reason="DocumentNotExpected"/>

                    <findLineContent dst="ldn" content="Lugar@de@Nacimiento" threshold="0.3"/>
                    <findLineContent dst="obs" content="Observaciones" threshold="0.3"/>
                    <findLineContent dst="dir" content="Director" threshold="0.3"/>
                    <findLineContent dst="nac" content="Nacional" threshold="0.3"/>
                    <rejectIfNotValid2 src="ldn" src2="obs" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="dir" src2="nac" reason="DocumentNotExpected"/>

                    <findLineMatch dst="DoB"
                        regex="([0-3oOl]?[0-9oOl])[ ,:;\-\.]?([0-1oOl]?[0-9oOl])[ ,:;\-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch dst="DoI"
                        regex="([0-3oOl]?[0-9oOl])[ ,:;\-\.]?([0-1oOl]?[0-9oOl])[ ,:;\-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineMatch dst="DoE"
                        regex="([0-3oOl]?[0-9oOl])[ ,:;\-\.]?([0-1oOl]?[0-9oOl])[ ,:;\-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineMatch src="fsiStr" dst="fsi"
                        regex="^[A-Za-z\.\-\,]* ?([0-9OolzZBHSsGq]{6})$"
                        value="([N]$1)"
                    />
                    <matchIfValid src="fsiStr" dst="serie"
                        regex="^([A-Za-z\.\-\,]+) ?[0-9OolzZBHSsGq]{6}$"
                        value="($1)"
                    />
                    <rejectIfNotValid src="fsi"/>
                    <assignField src="fsi" field="FSI"/>
                    <assignField src="serie" field="Serie"/>

                </ML>
            </Back>
        </Version>
        
        <Version id="v2" type="TD1" document_type="IDC">
            <Front>
                <FACE/>

                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="rodu" content="REPÚBLICA@ORIENTAL@DEL@URUGUAY" threshold="0.3"/>
                    <findLineContent dst="roduddi" content="REPÚBLICA@ORIENTAL@DEL@URUGUAY@Documento@de@Identidad" threshold="0.3"/>
                    <findLineContent dst="dndic" content="DIRECCION@NACIONAL@DE@IDENTIFICACION@CIVIL" threshold="0.3"/>
                    <findLineContent dst="dndiccdi" content="DIRECCION@NACIONAL@DE@IDENTIFICACION@CIVIL@Carteira@de@Identidade" threshold="0.3"/>
                    <rejectIfNotValid2 src="rodu" src2="roduddi" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="dndic" src2="dndiccdi" reason="DocumentNotExpected"/>

                    <findLineMatch src="docStr" dst="docNumber"
                        regex="([0-9]+)[\.:, ]?([0-9]{3})[\.:, ]?([0-9]{3})[\.\-:, ]?([0-9])$"
                        value="([N]$1)([N]$2)([N]$3)([N]$4)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    
                    <findLineContent dst="ape" content="Apellido@@@Sobrenome" threshold="0.3"/>
                    <findLineContent dst="nom" content="Nombre@@@Nome" threshold="0.3"/>
                    <findLineContent dst="nac" content="Nacionalidad@@@Nacionalidade" threshold="0.3"/>

                    <assignIfValid dst="ln" src="ape" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="nom" offset="-1" overwrite="false"/>

                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="nac" offset="-1" overwrite="false"/>
                                      
                    <assignIfValid dst="nat" src="nac" offset="+1" overwrite="false"/>

                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <modifyIfValid dst="ln" op="U"/>
                    <assignField src="ln" field="LastName"/>

                    <modifyIfValid dst="nat" op="U"/>
                    <assignField src="nat" field="Nationality"/>

                    <findLineMatch dst="DoB"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch dst="DoI"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineMatch dst="DoE"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoE" field="DateOfExpiry"/>

                </ML>

            </Front>
            
            <Back>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="URY"/>
                    <field id="DocumentData"    line="1" starts="6" count="9"/>
                    <field id="DocumentNumber"  line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <!-- <field id="Gender"          line="2" starts="8" count="1"/> -->
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="11"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <field id="NfcKey"          line="1" starts="6" count="9"/>
                </MRZ>

                <!-- types: QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentData"       data="0"/>

                    <!-- <field id="NfcKey"             data="0"/> -->
                </BARCODE>

                <ML cols="2" split_by="lines" separation="0.04" space_separation="0.10">
                    <findLineContent dst="mrk1" content="Observaciones@@@Observaçoes" threshold="0.3"/>
                    <findLineContent dst="mrk2" content="Firma@Autorizada@@@Assinatura@Autorizada" threshold="0.3"/>
                    <rejectIfNotValid2 src="mrk1" src2="mrk2" reason="DocumentNotExpected"/>
                </ML>

            </Back>
        </Version>

    </DocumentID>

    <DocumentID id="BO" iso="BOL">
        <Version id="All" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <BARCODE types="CODE39" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"       data="0"/>
                </BARCODE>

                <ML cols="3" split_by="lines" separation="0.10" space_separation="0.15">
                    <!--
                    <postProcessImage dst=""
                        rMin="0.200" rMax="0.250"
                        gMin="0.200" gMax="0.900"
                        bMin="0.200" bMax="0.250"
                        rWeight="0.500"
                        gWeight="1.000"
                        bWeight="0.500"
                    />
                    -->
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="epb" content="ESTADO@PLURINACIONAL@DE@BOLIVIA" threshold="0.3"/>
                    <findLineContent dst="cdi" content="CÉDULA@DE@IDENTIDAD" threshold="0.3"/>
                    <findLineContent dst="ser" content="serie" threshold="0.3"/>
                    <findLineContent dst="sec" content="sección" threshold="0.3"/>
                    <rejectIfNotValid2 src="epb" src2="cdi" reason="DocumentNotExpected"/>

                    <findLineContent dst="fdn" content="FECHA@@DE@@NACIMIENTO" threshold="0.3"/>
                    <rejectIfValid src="fdn" reason="DocumentNotExpected"/>

                    <findLineMatch dst="serie"
                        regex="^([0-9oOlBASsG]{5})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch dst="seccion"
                        regex="^([0-9oOlBASsG]{5})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="serie" src="ser" offset="+1" overwrite="false"/>
                    <assignIfValid dst="seccion" src="sec" offset="+1" overwrite="false"/>
                    <assignField src="serie" field="Serie"/>
                    <assignField src="seccion" field="Section"/>

                    <findLineMatch src="codeStr" dst="codeNumber"
                        regex="([A-Za-z0-9]{8}) ?([0-9oOlBASsG]{7})"
                        value="([U]$1)([N]$2)"
                        overwrite="false"
                    />
                    <findLineMatch src="codeStr" dst="codeNumber"
                        regex="([A-Za-z0-9]{8}) ?- ?([0-9oOlBASsG]{7})"
                        value="($1)-([N]$2)"
                        overwrite="false"
                    />
                    <assignField src="codeNumber" field="CodeNumber"/>

                    <findLineMatch src="doeStr" dst="doe"
                        regex="([0-9oOlBASsG]{1,2}) ?de ?([A-Za-z]{3})[A-Za-z]+ ?de ?([1-2Il][0-9oOIlBASsG]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <!-- Special case where 2 dates are present in the document. 1st one is issue date, 2nd one is expiry date -->
                    <findLineMatch src="doeStr" dst="doe"
                        regex="([Expira]{6})+ ?el ?([0-9]{1,2}) ?de ?([A-Za-z]{3})[A-Za-z]+ ?de ?([1-2Il][0-9oOIlBASsG]{3})"
                        value="([N]$2)/([M]$3)/([N]$4)"
                        overwrite="true"
                    />
                    <!-- Special case for Indefinite DoE -->
                    <jumpIfValid src="doe" dst="DOE_FOUND"/>
                        <findLineContent dst="noCaduca" content="Válida@hasta@el@INDEFINIDO" threshold="0.3" overwrite="false"/>
                        <findLineContent dst="noCaduca" content="#INDEFINIDO" threshold="0.3" overwrite="false"/>
                        <assignIfContent dst="doe" value="31/12/9999"
                            src="noCaduca"
                            op="exists"
                            overwrite="false"
                        />
                    <label src="DOE_FOUND"/>
                    <assignField src="doe" field="DateOfExpiry"/>

                    <findLineMatch src="docStr" dst="docNumber"
                        regex="([0-9oOlBASsG]{6,}) "
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="docStr" dst="docNumber"
                        regex="([0-9oOlBASsG]{6,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="de" content="de" threshold="0.3"/>
                    <assignIfValid dst="placeOfExped" src="de" offset="+1" overwrite="false"/>
                    <assignField src="placeOfExped" field="PlaceOfExpedition"/>
                    <assignIfValid dst="placeOfExpedSecond" src="seccion" offset="+1" overwrite="false"/>
                    <assignField src="placeOfExpedSecond" field="PlaceOfExpedition"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <ML cols="2" split_by="lines" separation="0.10" space_separation="0.10">
                    <postProcessImage dst=""
                        rMin="0.200" rMax="0.250"
                        gMin="0.200" gMax="0.900"
                        bMin="0.200" bMax="0.250"
                        rWeight="0.250"
                        gWeight="0.500"
                        bWeight="0.250"
                    />

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="sip" content="EL@SERVICIO@GENERAL@DE@IDENTIFICACION@PERSONAL" threshold="0.3"/>
                    <findLineContent dst="cff" content="CERTIFICA@@Que@la@firma@@fotografia" threshold="0.3"/>
                    <findLineContent dst="eip" content="e@impresion@pertenece" threshold="5"/>
                    <rejectIfNotValid2 src="sip" src2="cff" reason="DocumentNotExpected"/>

                    <matchIfValid src="eip" dst="docNumber"
                        regex="((?:[0-9oOlBASsG] ?){6,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="docStr" dst="docNumber"
                        regex="((?:[0-9oOlBASsG] ?){6,})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <replaceIfValid dst="docNumber" content=" " replace=""/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch dst="DoB" src="DoBStr"
                        regex="([0-9oOlBASsG]{1,2}) ?de ?([A-Za-z]{3})[A-Za-z]+ ?de ?([1-2Il][0-9oOIlBASsG]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch src="aStr" dst="fln"
                        regex="A: (.+)"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="aStr" dst="a"
                        regex="^(A:?)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignIfValid dst="fln" src="a" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fln" src="a" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fln" src="DoBStr" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="fln"/>
                    <assignField src="fln" field="FullName"/>
                    <assignField src="fln" field="FirstName"/>

                    <findLineMatch src="enStr" dst="pob"
                        regex="^En ?(.+)$"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="enStr" dst="pob"
                        regex="En (.+)$"
                        value="([U]$1)"
                        overwrite="false"
                    />
                    <assignField src="pob" field="PlaceOfBirth"/>

                    <assignIfValid src="enStr" dst="maritalStatus" offset="+1"/>
                    <replaceIfValid dst="maritalStatus" content="Estado" replace="" threshold="0.2"/>
                    <replaceIfValid dst="maritalStatus" content="Civil" replace="" threshold="0.2"/>
                    <assignField src="maritalStatus" field="MaritalStatus"/>

                    <findLineMatch src="domi" dst="address"
                        regex="^[DOo][oO0][mMnN][iIl]?[cCd][iIl]?[liI]?[iIl][oO0] ?(.+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <findLineMatch src="domi" dst="address"
                        regex="[DOo][oO0][mMnN][iIl]?[cCd][iIl]?[liI]?[iIl][oO0] ?(.+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="address" field="Address"/>

                </ML>
            </Back>
        </Version>
        <Version id="2024" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="1" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="epdb" content="ESTADO@PLURINACIONAL@DE@BOLIVIA" threshold="0.3"/>
                    <findLineContent dst="sgdip" content="SERVICIO@GENERAL@DE@IDENTIFICACION@PERSONAL" threshold="0.5"/>
                    <rejectIfNotValid2 src="epdb" src2="sgdip" reason="DocumentNotExpected"/>

                    <findLineContent dst="ser" content="SERIE" threshold="0.3"/>
                    <findLineContent dst="sec" content="SECCION" threshold="0.3"/>
                    <findLineMatch dst="serie"
                        regex="^([0-9oOlBASsG]{5})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="serie" field="Serie"/>
                    <findLineMatch dst="seccion"
                        regex="^([0-9oOlBASsG]{5})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="seccion" field="Section"/>


                    <findLineMatch src="docStr" dst="docNumber"
                        regex="([0-9oOlBASsG]{6,}) "
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <findLineMatch src="docStr" dst="docNumber"
                        regex="([0-9oOlBASsG]{6,})$"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineMatch src="codeStr" dst="codeNumber"
                        regex="([A-Za-z0-9]{7}) ?- ?(LA)"
                        value="([U]$1)([N]$2)"
                        overwrite="false"
                    />
                    <findLineMatch src="codeStr" dst="codeNumber"
                        regex="([A-Za-z0-9]{7}) ?- ?(LA)"
                        value="($1)-([N]$2)"
                        overwrite="false"
                    />
                    <assignField src="codeNumber" field="CodeNumber"/>

                    <findLineContent dst="nom" content="NOMBRES" threshold="0.3"/>
                    <findLineContent dst="ape" content="APELLIDOS" threshold="0.3"/>
                    
                    <findLineContent dst="fdn" content="FECHA@@DE@@NACIMIENTO" threshold="0.3"/>
                    <rejectIfNotValid src="fdn" reason="DocumentNotExpected"/>
                    
                    <assignIfValid dst="fn" src="nom" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="ape" offset="+1" overwrite="false"/>

                    <modifyIfValid dst="fn" op="U"/>
                    <assignField src="fn" field="FirstName"/>

                    <assignField src="ln" field="LastName"/>

                    <findLineMatch dst="DoB"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineMatch dst="DoI"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoI" field="DateOfIssue"/>

                    <findLineMatch dst="DoE"
                        regex="([0-3oOl][0-9oOl])[ ,:;\-\.\/]?([0-1oOl][0-9oOl])[ ,:;\-\.\/]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([N]$2)/([N]$3)"
                    />
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineMatch dst="data2"
                        regex="([0-9oOl]{1}) ([0-9oOl]{3}) ([0-9oOl]{3}) (H5-P1)"
                        value="([N]$1)([N]$2)([N]$3)($4)"
                    />

                    <assignField src="data2" field="Data2"/>




                </ML>

            </Front>

            <Back>
                <!-- types: QRCODE,EAN8,EAN13,CODE39,CODE128 -->
                <!--<BARCODE types="QRCODE" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="DocumentData"       data="0"/>
                </BARCODE>>-->
                <MRZ optional="yes">
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3"/>
                    <field id="DocumentNumber"    line="1" starts="6" count="7"/>
                    <field id="DocumentData"  line="1" starts="15" count="1"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <!--<field id="Opt2"            line="2" starts="19" count="11"/>-->
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>

                    <!--<field id="NfcKey"          line="1" starts="6" count="9"/>-->
                </MRZ>

                <ML cols="1" split_by="lines" separation="0.04" space_separation="0.10">
                    <findLineContent dst="ldn" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent dst="dom" content="DOMICILIO" threshold="0.3"/>
                    <findLineContent dst="pro" content="PROFESION" threshold="0.3"/>
                    <findLineContent dst="ocu" content="OCUPACION" threshold="0.3"/>
                    <findLineContent dst="eci" content="ESTADO@CIVIL" threshold="0.3"/>
                    <findLineContent dst="gsa" content="GRUPO@SANGUINEO" threshold="0.3"/>
                    <rejectIfNotValid src="eci" reason="DocumentNotExpected"/>>

                    <!-- We read Lugar de nacimiento field -->
                    <assignIfValid dst="pob1" src="ldn" offset="1" overwrite="false"/>
                    <assignIfValid dst="pob2" src="ldn" offset="2" overwrite="false"/>

                    <assignIfValid dst="pob" src="pob1" overwrite="false"/>
                    <concatenateIfValid dst="pob" src="pob2" prefix=" " suffix=""/>

                    <assignField src="pob" field="PlaceOfBirth"/>

                    <!--Address-->
                    <assignIfValid dst="dom1" src="dom" offset="1" overwrite="false"/>
                    <assignIfValid dst="dom2" src="dom" offset="2" overwrite="false"/>
                    <assignIfValid dst="adr" src="dom1" overwrite="false"/>
                    <concatenateIfValid dst="adr" src="dom2" prefix=" " suffix=""/>
                    <assignField src="adr" field="Address"/>

                    <assignIfValid dst="prf" src="pro" offset="1" overwrite="false"/>
                    <assignIfValid dst="ocp" src="ocu" offset="1" overwrite="false"/>
                    <assignField src="prf" field="Profession"/>
                    <assignField src="ocp" field="Occupation"/>

                    <!--civilState-->
                    <findLineContent dst="civilState2" content="SOLTERO" threshold="0.3"/>
                    <findLineContent dst="civilState2" content="CASADO" threshold="0.3"/>
                    <findLineContent dst="civilState2" content="DIVORCIADO" threshold="0.3"/>
                    <findLineContent dst="civilState2" content="VIUDO" threshold="0.3"/>
                    <assignIfValid dst="civilState2" src="dataCivilState" offset="1" overwrite="false"/>
                    <assignIfValid dst="civilState2" src="dataUbigeoOfBirth" offset="-1" overwrite="false"/>
                    <assignIfContent src="civilState2" dst="civilState" value="SOLTERO(A)"
                        op="distance" param="SOLTERO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="civilState2" dst="civilState" value="CASADO(A)"
                        op="distance" param="CASADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="civilState2" dst="civilState" value="DIVORCIADO(A)"
                        op="distance" param="DIVORCIADO" param_2="0.3"
                        overwrite="false"
                    />
                    <assignIfContent src="civilState2" dst="civilState" value="VIUDO(A)"
                        op="distance" param="VIUDO" param_2="0.3"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="civilState"/>
                    <assignField src="civilState" field="CivilStatus"/>

                    <!-- <assignIfValid dst="bdt" src="gsa" offset="1" overwrite="false"/>
                     <assignField src="bdt" field="BloodType"/> -->

                </ML>

            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="DO" iso="DOM">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="1" split_by="lines" separation="0.04" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="drd" content="REPUBLICA@DOMINICANA" threshold="0.3"/>
                    <findLineContent dst="djce" content="JUNTA@CENTRAL@ELECTORAL" threshold="0.3"/>
                    <findLineContent dst="dcie" content="CEDULA@DE@IDENTIDAD@Y@ELECTORAL" threshold="0.3"/>

                    <findLineMatch dst="docNumber"
                        regex="([0-9oOl]{3})-([0-9oOl]{7,8})-([0-9oOl]{1})"
                        value="([N]$1)-([N]$2)-([N]$3)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="docNumber" field="DocumentNumber"/>

                    <findLineContent dst="pob" content="LUGAR@DE@NACIMIENTO" threshold="0.3"/>
                    <findLineContent dst="dob" content="FECHA@DE@NACIMIENTO" threshold="1.5"/>
                    <findLineContent dst="doe" content="FECHA@DE@EXPIRACION" threshold="0.3"/>

                    <assignIfValid dst="pobF" src="pob" offset="+1" overwrite="false"/>
                    <assignField src="pobF" field="PlaceOfBirth"/>

                    <assignIfValid dst="dobF" src="dob" offset="+1" overwrite="false"/>
                    <findLineMatch src="dob1" dst="dobF"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="true"
                    />
                    <assignField src="dobF" field="DateOfBirth"/>

                    <findLineContent dst="nat" content="NACIONALIDAD:#" threshold="0.3"/>
                    <jumpIfNotValid src="nat" dst="noNationality"/>
                    <replaceIfValid dst="nat" content="NACIONALIDAD" replace="" threshold="0.2"/>
                    <replaceIfValid dst="nat" content=":" replace=""/>
                    <assignField src="nat" field="Nationality"/>
                    <label src="noNationality"/>

                    <!--If the line Gender BloodType is read-->
                    <findLineContent dst="g_bt" content="SEXO@@@@SANGRE" threshold="0.3"/>
                    <matchIfValid src="g_bt" dst="BT"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="false"
                    />
                    <replaceIfValid dst="maybeSexStr" src="g_bt" content="SANGRE" replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignIfContent dst="BT" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <!--If the entire line is read-->
                    <findLineContent dst="g_bt_cs" content="SEXO@@@@SANGRE@@@@ESTADO@CIVIL@" threshold="0.4"/>
                    <matchIfValid src="g_bt_cs" dst="BT"
                        regex="(A|B|8|0|O|o|AB|A8) ?(\+|\-)"
                        value="([U]$1)($2)"
                        overwrite="true"
                    />
                    <replaceIfValid dst="maybeSexStr" src="g_bt_cs" content="SANGRE" replace="" threshold="0.2"/>
                    <replaceIfValid dst="maybeSexStr" content="ESTADO CIVIL" replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="M"
                        op="contains" param="M"
                        op2="not_contains" param2="F"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="sex" value="F"
                        op="contains" param="F"
                        op2="not_contains" param2="M"
                        overwrite="false"
                    />
                    <assignIfContent dst="BT" value=""
                        op="not_exists"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="civilState" value="S"
                        op="contains" param="SOLTER"
                        op2="not_contains" param2="CASAD"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeSexStr" dst="civilState" value="C"
                        op="contains" param="CASAD"
                        op2="not_contains" param2="SOLTER"
                        overwrite="false"
                    />

                    <!--If CivilStatus is separated-->
                    <findLineContent dst="only_cs" content="ESTADO@CIVIL@" threshold="0.5"/>
                    <replaceIfValid dst="maybeCivilStatus" src="only_cs" content="ESTADO CIVIL" replace="" threshold="0.2"/>
                    <replaceIfValid dst="maybeCivilStatus" content=":" replace="" threshold="0.2"/>
                    <assignIfContent2 src="maybeCivilStatus" dst="civilState" value="S"
                        op="contains" param="SOLTER"
                        op2="not_contains" param2="CASAD"
                        overwrite="false"
                    />
                    <assignIfContent2 src="maybeCivilStatus" dst="civilState" value="C"
                        op="contains" param="CASAD"
                        op2="not_contains" param2="SOLTER"
                        overwrite="false"
                    />

                    <assignField src="BT" field="BloodType"/>
                    <assignField src="sex" field="Gender"/>
                    <assignField src="civilState" field="CivilStatus"/>

                    <findLineContent dst="ocu" content="OCUPACION:#" threshold="0.3"/>
                    <jumpIfNotValid src="ocu" dst="noOccupation"/>
                    <replaceIfValid dst="ocu" content="OCUPACION" replace="" threshold="0.2"/>
                    <replaceIfValid dst="ocu" content=":" replace=""/>
                    <assignField src="ocu" field="Occupation"/>
                    <label src="noOccupation"/>

                    <assignIfValid dst="doeF" src="ocu" offset="+2" overwrite="false"/>
                    <findLineMatch src="doe1" dst="doeF"
                        regex="([0-9oOl]{2})[ \-\.]?([A-Z]{2,})[ \-\.]?([1-2][0-9oOl]{3})"
                        value="([N]$1)/([M]$2)/([N]$3)"
                        overwrite="true"
                    />
                    <assignField src="doeF" field="DateOfExpiry"/>

                    <assignIfValid dst="nom" src="doe" offset="+2" overwrite="false"/>
                    <assignIfValid dst="nom" src="doeF" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ape" src="doe" offset="+3" overwrite="false"/>
                    <assignIfValid dst="ape" src="doeF" offset="+2" overwrite="false"/>
                    <!--To avoid name lastname issues if Signature is read as another field-->
                    <assignIfValid dst="ape2" src="doeF" offset="+3" overwrite="false"/>
                    <jumpIfNotValid src="ape2" dst="else_apellidos2"/>
                        <assignIfValid dst="nom2" src="ape2" offset="-1" overwrite="false"/>
                        <assignIfValid dst="ape" src="ape2" overwrite="true"/>
                        <assignIfValid dst="nom" src="nom2" overwrite="true"/>
                    <label src="else_apellidos2"/>
                    <assignIfValid dst="ape3" src="doeF" offset="+4" overwrite="false"/>
                    <jumpIfNotValid src="ape3" dst="else_apellidos3"/>
                        <assignIfValid dst="nom3" src="ape3" offset="-1" overwrite="false"/>
                        <assignIfValid dst="ape" src="ape3" overwrite="true"/>
                        <assignIfValid dst="nom" src="nom3" overwrite="true"/>
                    <label src="else_apellidos3"/>
                    <assignField src="nom" field="Name"/>
                    <assignField src="ape" field="LastName"/>
                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <!-- types: QRCODE,EAN8,EAN13,CODE39,CODE128 -->

                <!--<BARCODE types="CODE128,QRCODE,CODABAR" decode="splitBy: " charset="UTF-8" optional="yes">-->
                <BARCODE types="CODE128" decode="splitBy: " charset="UTF-8" optional="yes">
                    <field id="SerialNumber"       data="0"/>
                </BARCODE>

                <ML cols="2" split_by="lines" separation="0.10" space_separation="0.10">

                    <findLineContent dst="cia" content="CEDULA@ANT" threshold="2"/>
                    <findLineContent dst="coe" content="COLEGIO@ELECTORAL" threshold="2"/>
                    <findLineContent dst="uco" content="UBICACION@DEL@COLEGIO" threshold="2"/>
                    <findLineContent dst="dir" content="DIRECCION@DE@RESIDENCIA" threshold="5"/>

                    <assignIfValid dst="ciOld" src="cia" offset="+1"/>
                    <assignIfValid dst="electoralC" src="coe" offset="+1"/>
                    <assignField src="ciOld" field="OldDocumentNumber"/>
                    <assignField src="electoralC" field="ElectoralCollege"/>

                    <assignIfValid dst="electoralA" src="uco" offset="+1"/>
                    <assignIfValid dst="ea2" src="uco" offset="+2"/>
                    <assignIfValid dst="ea3" src="uco" offset="+3"/>
                    <concatenateIfValid dst="electoralA" src="ea2" prefix="\n" suffix=""/>
                    <concatenateIfValid dst="electoralA" src="ea3" prefix="\n" suffix=""/>
                    <assignField src="electoralA" field="ElectoralAddress"/>

                    <findLineContent dst="sec" content="SECTOR" threshold="2"/>
                    <findLineContent dst="mun" content="MUNICIPIO" threshold="3"/>

                    <assignIfValid dst="address" src="dir" offset="1"/>
                    <assignIfValid dst="address2" src="sec" offset="1"/>
                    <assignIfValid dst="address3" src="mun" offset="1"/>

                    <jumpIfNotValid src="address" dst="endCapture"/>
                    <jumpIfNotValid src="address2" dst="endCapture"/>
                    <jumpIfNotValid src="address3" dst="endCapture"/>

                    <concatenateIfValid dst="address" src="address2" prefix="\n" suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix="\n" suffix=""/>
                    <assignField src="address" field="Address"/>
                    <label src="endCapture"/>

                    <findLineContent dst="regN" content="REGISTRO@DE@NACIMIENTO" threshold="3"/>
                    <findLineContent dst="postC" content="CODIGO@POSTAL" threshold="3"/>
                    <findLineFrom dst="tryDocNumberBack" src="regN" direction="TOP" overwrite="false"/>
                    <assignIfValid dst="docNumberBack" src="tryDocNumberBack"/>
                    <assignIfValid dst="docNumberBack" src="mun" offset="+5" overwrite="false"/>
                    <assignField src="docNumberBack" field="DocumentNumber"/>

                    <assignIfValid dst="birthReg" src="regN" offset="+1" overwrite="false"/>
                    <assignIfValid dst="postalC" src="postC" offset="+1" overwrite="false"/>
                    <assignField src="birthReg" field="BirthRegistry"/>
                    <assignField src="postalC" field="PostalCode"/>


                </ML>
                <MRZ>
                    <field id="DocumentCode"    line="1" starts="1" count="2"/>
                    <field id="Issuer"          line="1" starts="3" count="3" regex="DOM"/>
                    <field id="DocumentNumber"  line="1" starts="6" count="12"/>
                    <field id="Opt1"            line="1" starts="18" count="12"/>
                    <field id="DateOfBirth"     line="2" starts="1" count="6"/>
                    <field id="Gender"          line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"    line="2" starts="9" count="6"/>
                    <field id="Nationality"     line="2" starts="16" count="3"/>
                    <field id="Opt2"            line="2" starts="19" count="12"/>
                    <field id="LastName"        line="3" starts="1" count="??"/>
                    <field id="FirstName"       line="3" starts="??" count="30"/>
                </MRZ>

            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="NG" iso="NGA">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="1" split_by="elements" separation="0.15" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="frn" content="FEDERAL@REPUBLIC@OF@NIGERIA" threshold="0.3"/>
                    <findLineContent dst="inec" content="INDEPENDENT@NATIONAL@ELECTORAL@COMMISSION" threshold="0.3"/>
                    <findLineContent dst="vcard" content="VOTER@S@CARD" threshold="0.3"/>
                    <rejectIfNotValid src="frn" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="inec" src2="vcard" reason="DocumentNotExpected"/>

                    <!-- Find VIN -->
                    <findLineMatch src="vinStr" dst="vin"
                        regex="([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{3})"
                        value="($1)($2)($3)($4)($5)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="vin" reason="DocumentNotExpected"/>
                    <assignField src="vin" field="VIN"/>
                    <assignField src="vin" field="DocumentNumber"/>

                    <!-- Find CODE -->
                    <findLineMatch src="codeStr" dst="code"
                        regex="([0-9]{2})-([0-9]{2})-([0-9]{2})-([0-9]{3})"
                        value="($1)-($2)-($3)-($4)"
                        overwrite="false"
                    />
                    <!-- Find CODE in VIN str -->
                    <matchIfValid src="vinStr" dst="code"
                        regex="([0-9]{2})-([0-9]{2})-([0-9]{2})-([0-9]{3})"
                        value="($1)-($2)-($3)-($4)"
                        overwrite="false"
                    />
                    <assignField src="code" field="Code"/>

                    <findLineContent dst="dobStr" content="DATE@OF@BIRTH" threshold="0.3"/>

                    <!-- Assign the full name right before the DATE OF BIRTH string -->
                    <assignIfValid dst="fullN" src="DoBStr" offset="-1" overwrite="false"/>
                    <splitIfValid2 src="fullN" by=","
                        dst1="ln"
                        dst2="fn"
                        overwrite="false"
                    />
                    <jumpIfNotValid src="fn" dst="no_decomposed_name"/>
                        <assignField src="fn" field="FirstName"/>
                        <assignField src="ln" field="LastName"/>
                        <assignIfValid dst="fullN" src="fn"/>
                        <concatenateIfValid dst="fullN" src="ln" prefix=" " suffix=""/>
                    <label src="no_decomposed_name"/>
                    <assignField src="fullN" field="FullName"/>

                    <findLineMatch dst="DoB"
                        regex="^([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineContent dst="maleStr" content="MALE" threshold="1" overwrite="false"/>
                    <findLineContent dst="femaleStr" content="FEMALE" threshold="1" overwrite="false"/>
                    <assignIfContent src="maleStr" dst="gender" value="M"
                        op="exists"
                        overwrite="false"
                    />
                    <assignIfContent src="femaleStr" dst="gender" value="F"
                        op="exists"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="gender"/>
                    <assignField src="gender" field="Gender"/>

                </ML>
            </Front>

            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <PDF417 optional="yes">
                </PDF417>

                <BARCODE optional="yes">
                </BARCODE>

                <ML cols="5" split_by="lines" separation="0.04" space_separation="0.10">

                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>
                    
                    <!-- Find VIN -->
                    <findLineMatch src="vinStr" dst="vin"
                        regex="([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{4}) ([A-Z0-9]{3})$"
                        value="($1)($2)($3)($4)($5)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="vin" reason="DocumentNotExpected"/>
                    <assignField src="vin" field="VIN"/>
                    <assignField src="vin" field="DocumentNumber"/>

                    <findLineContent dst="DoIStr" content="DATE@OF@REG @@@ @@,@@@@" threshold="0.3" overwrite="false"/>
                    <matchIfValid src="DoIStr" dst="DoI"
                        regex="([A-Z]{3}) ?([0-3][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($2)/([M]$1)/($3)"
                        overwrite="false"
                    />
                    <assignField src="DoI" field="DateOfIssue"/>

                </ML>

            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="NI" iso="NIC">
        <Version id="v1" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="1" split_by="elements" separation="0.15" space_separation="0.10">
                    
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="rdn" content="#REPÚBLICA@DE@NICARAGUA" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="rdn" content="REPÚBLICA@DE@NICARAGUA" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="rdn" content="@@REPÚBLICA@DE@NICARAGUA" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="rdn" content="@@@@REPÚBLICA@DE@NICARAGUA" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="rdn" content="@@@@@@REPÚBLICA@DE@NICARAGUA" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="cse" content="CONSEJO@SUPREMO@ELECTORAL" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="cdi" content="CÉDULA@DE@IDENTIDAD" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid src="rdn" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="cse" src2="cdi" reason="DocumentNotExpected"/>

                    <findLineMatchMultiple src="docNumStr" overwrite="false"
                        regex="([0-9]{3})-?([0-9]{2})([0-9]{2})([0-9]{2})-?([0-9]{4}) ?([A-Z])"
                        dst1="fullDocNumber"
                        value1="([N]$1)-([N]$2)([N]$3)([N]$4)-([N]$5)([U]$6)"
                        dst2="docNumber"
                        value2="([N]$1)([N]$5)([U]$6)"
                        dst3="addDocNumber"
                        value3="([N]$4)([N]$3)([N]$2)"
                    />
                    <rejectIfNotValid src="docNumber" reason="DocumentNotExpected"/>
                    <assignField src="fullDocNumber" field="FullDocumentNumber"/>
                    <assignField src="docNumber" field="DocumentNumber"/>
                    <assignField src="addDocNumber" field="DocumentAdditionalNumber"/>

                    <findLineContent dst="nomStr" content="Nombres" threshold="0.3"/>
                    <findLineContent dst="apeStr" content="Apellidos" threshold="0.3"/>
                    <findLineContent dst="nacStr" content="Fecha@de@Nacimiento@Lugar@de@Nacimiento" threshold="0.3"/>
                    <findLineContent dst="sexStr" content="Sexo" threshold="0.3"/>
                    <findLineContent dst="emiexpStr" content="Director@General@Emision@@@@@@@@@@@@Expiracion@@@@@@@@@@@" threshold="0.3"/>

                    <assignIfValid dst="fn" src="nomStr" offset="+1" overwrite="false"/>
                    <assignIfValid dst="fn" src="apeStr" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="fn"/>
                    <assignField src="fn" field="FirstName"/>

                    <assignIfValid dst="ln" src="apeStr" offset="+1" overwrite="false"/>
                    <assignIfValid dst="ln" src="nacStr" offset="-1" overwrite="false"/>
                    <rejectIfNotValid src="ln"/>
                    <assignField src="ln" field="LastName"/>

                    <assignIfValid dst="fullN" src="fn"/>
                    <concatenateIfValid dst="fullN" src="ln" prefix=" " suffix=""/>
                    <assignField src="fullN" field="FullName"/>

                    <findLineMatch src="dobStr" dst="DoB" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})$"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatchMultiple src="dobStr" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3}) (.+)$"
                        dst1="DoB"
                        value1="($1)/($2)/($3)"
                        dst2="PoB"
                        value2="([U]$4)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <findLineFrom dst="PoB" src="dobStr" direction="RIGHT" overwrite="false"/>
                    <assignField src="PoB" field="PlaceOfBirth"/>

                    <matchIfValid2 src="emiexpStr" dst="DoI" dst2="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch2 dst="DoI" dst2="DoE"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoI"/>
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoI" field="DateOfIssue"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineMatch dst="sex"
                        regex="^([M|F])$"
                        value="($1)"
                        overwrite="false"
                    />
                    <assignField src="sex" field="Gender"/>

                </ML>
            </Front>

            <Back>
                <MRZ>
                    <field id="DocumentCode"                 line="1" starts="1" count="2"/>
                    <field id="Issuer"                       line="1" starts="3" count="3" regex="NIC"/>
                    <field id="DocumentNumber"               line="1" starts="6" count="9"/>
                    <field id="Opt1"                         line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"                  line="2" starts="1" count="6"/>
                    <field id="DocumentAdditionalNumber"     line="2" starts="1" count="6"/>
                    <field id="Gender"                       line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"                 line="2" starts="9" count="6"/>
                    <field id="Nationality"                  line="2" starts="16" count="3"/>
                    <field id="Opt2"                         line="2" starts="19" count="11"/>
                    <field id="LastName"                     line="3" starts="1" count="??"/>
                    <field id="FirstName"                    line="3" starts="??" count="30"/>

                    <field id="NfcKey"                       line="1" starts="6" count="9"/>
                </MRZ>

                <PDF417 optional="yes">
                </PDF417>

                <BARCODE optional="yes">
                </BARCODE>

                <ML cols="4" split_by="elements" c_separation="3" space_separation="0.10">

                    <findLineContent dst="domStr" content="Domicilio" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="munStr" content="Municipio" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="depStr" content="Departamento" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="repStr" content="Rep@@@" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid2 src="domStr" src2="munStr" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="domStr" src2="depStr" reason="DocumentNotExpected"/>
                    <rejectIfNotValid2 src="depStr" src2="munStr" reason="DocumentNotExpected"/>

                    <assignIfValid dst="dep" src="depStr" offset="+1" overwrite="false"/>
                    <assignField src="dep" field="State"/>
                    
                    <assignIfValid dst="mun" src="munStr" offset="+1" overwrite="false"/>
                    <assignField src="dep" field="City"/>
                    
                    <assignIfValid dst="dom" src="domStr" offset="+1" overwrite="false"/>
                    <assignIfValid dst="dom2" src="domStr" offset="+2" overwrite="false"/>
                    <assignIfValid dst="dom3" src="domStr" offset="+3" overwrite="false"/>

                    <concatenateIfValid dst="dom" src="dom2" prefix=" " suffix=""/>
                    <concatenateIfValid dst="dom" src="dom3" prefix=" " suffix=""/>
                    <assignField src="dom" field="Address"/>

                </ML>

            </Back>
        </Version>
    </DocumentID>

    <DocumentID id="KR" iso="KOR">
        <Version id="ID" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML-KR cols="1" split_by="elements" separation="0.20" space_separation="0.15">
                    
                    <findLineContent dst="idStr" content="주민둥록증" threshold="2" overwrite="false"/>
                    <rejectIfNotValid src="idStr" reason="DocumentNotExpected"/>

                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?- ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?[^A-Za-z0-9]* ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <replaceIfValid dst="docNum" content=" " replace=""/>
                    <rejectIfNotValid src="docNum" reason="DocumentNotExpected"/>
                    <assignField src="docNum" field="DocumentNumber" mask="-6"/>

                    <replaceIfValid dst="DoB" content=" " replace=""/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <matchIfValid src="sexStr" dst="sex" regex="([02468])" value="F" overwrite="false"/>
                    <matchIfValid src="sexStr" dst="sex" regex="([13579])" value="M" overwrite="false"/>
                    <assignField src="sex" field="Gender"/>

                    <findLineMatch src="doiStr" dst="DoI"
                        regex="^([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9])"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="fullN" src="docNum" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="idStr" offset="+1" overwrite="false"/>
                    <matchIfValid src="fullN" dst="fullName"
                        regex="^([^ ]*) ?\(.*\)?"
                        value="($1)"
                        overwrite="false"
                    />
                    <matchIfValid src="fullN" dst="fullName"
                        regex="^(.{3})"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="fullName"/>
                    <assignField src="fullName" field="FullName"/>

                    <assignIfValid dst="address" src="docNum" offset="+1" overwrite="false"/>
                    <assignIfValid dst="address2" src="docNum" offset="+2" overwrite="false"/>
                    <assignIfValid dst="address3" src="docNum" offset="+3" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" " suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix=" " suffix=""/>
                    <rejectIfNotValid src="address"/>
                    <assignField src="address" field="Address"/>

                    <matchIfValid src="address" dst="cityStr"
                        regex="([^ ]*)[시사]"
                        value="($1)시"
                    />
                    <assignFromList dst="city" src="cityStr" threshold="1"
                        list="서울특별시,부산광역시,대구광역시,인천광역시,광주광역시,대전광역시,울산광역시,세종특별자치시,수원시,성남시,의정부시,안양시,부천시,광명시,평택시,동두천시,안산시,고양시,과천시,구리시,남양주시,오산시,시흥시,군포시,의왕시,하남시,용인시,파주시,이천시,안성시,김포시,화성시,광주시,양주시,포천시,여주시,춘천시,원주시,강릉시,동해시,태백시,속초시,삼척시,청주시,충주시,제천시,천안시,공주시,보령시,아산시,서산시,논산시,계룡시,당진시,전주시,군산시,익산시,정읍시,남원시,김제시,목포시,여수시,순천시,나주시,광양시,포항시,경주시,김천시,안동시,구미시,영주시,영천시,상주시,문경시,경산시,창원시,진주시,통영시,사천시,김해시,밀양시,거제시,양산시,제주시,서귀포시"
                    />
                    <assignField src="city" field="City"/>

                    <matchIfValid src="address" dst="districtStr"
                        regex="([^ ]*)[구쿠꾸]"
                        value="($1)구"
                    />
                    <assignFromList dst="district" src="districtStr" threshold="1"
                        list="장안구,권선구,팔달구,영통구,수정구,중원구,분당구,만안구,동안구,상록구,단원구,덕양구,일산동구,일산서구,처인구,기흥구,수지구,상당구,서원구,흥덕구,청원구,동남구,서북구,완산구,덕진구,남구,북구,의창구,성산구,마산합포구,마산회원구,진해구,종로구,중구,용산구,성동구,광진구,동대문구,중랑구,성북구,강북구,도봉구,노원구,은평구,서대문구,마포구,양천구,강서구,구로구,금천구,영등포구,동작구,관악구,서초구,강남구,송파구,강동구,서구,동구,영도구,부산진구,동래구,해운대구,사하구,금정구,연제구,수영구,사상구,수성구,달서구,미추홀구,연수구,남동구,부평구,계양구,광산구,유성구,대덕구"
                    />
                    <assignField src="district" field="District"/>

                    <matchIfValid src="address" dst="townStr"
                        regex="([^ ]*)[군쿤꾼]"
                        value="($1)군"
                    />
                    <assignFromList dst="town" src="townStr" threshold="1"
                        list="연천군,가평군,양평군,홍천군,횡성군,영월군,평창군,정선군,철원군,화천군,양구군,인제군,고성군,양양군,보은군,옥천군,영동군,증평군,진천군,괴산군,음성군,단양군,금산군,부여군,서천군,청양군,홍성군,예산군,태안군,완주군,진안군,무주군,장수군,임실군,순창군,고창군,부안군,담양군,곡성군,구례군,고흥군,보성군,화순군,장흥군,강진군,해남군,영암군,무안군,함평군,영광군,장성군,완도군,진도군,신안군,군위군,의성군,청송군,영양군,영덕군,청도군,고령군,성주군,칠곡군,예천군,봉화군,울진군,울릉군,의령군,함안군,창녕군,남해군,하동군,산청군,함양군,거창군,합천군,달성군,강화군,옹진군,울주군,기장군"
                    />
                    <assignField src="town" field="Town"/>

                    <matchIfValid src="address" dst="provinceStr"
                        regex="([^ ]*)[도됴툐]"
                        value="($1)도"
                    />
                    <assignFromList dst="province" src="provinceStr" threshold="1"
                        list="경기도,강원도,충청북도,충청남도,전라북도,전라남도,경상북도,경상남도,제주특별자치도"
                    />
                    <assignField src="province" field="Province"/>

                    <replaceIfValid dst="address" content="$cityStr" replace="$city"/>
                    <replaceIfValid dst="address" content="$districtStr" replace="$district"/>
                    <replaceIfValid dst="address" content="$townStr" replace="$town"/>
                    <replaceIfValid dst="address" content="$provinceStr" replace="$province"/>

                </ML-KR>

            </Front>
        </Version>

        <Version id="DL" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML-KR cols="5" split_by="elements" separation="0.10" space_separation="0.10">
                    
                    <postProcessImage dst=""
                        rMin="0.000" rMax="0.999"
                        gMin="0.000" gMax="0.999"
                        bMin="0.000" bMax="0.750"
                        rWeight="0.000"
                        gWeight="0.000"
                        bWeight="0.999"
                    />

                    <findLineContent dst="dlStr" content="자동차운전면허증#" threshold="3" overwrite="false"/>
                    <rejectIfNotValid src="dlStr" reason="DocumentNotExpected"/>

                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([0-9OolI]{2})-([0-9OolI]{2})-([0-9OolI]{6})-([0-9OolI]{2})"
                        value="([N]$1)-([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([0-9OolI]{2})(?: |[^A-Za-z0-9])*([0-9OolI]{2})(?: |[^A-Za-z0-9])*([0-9OolI]{6})(?: |[^A-Za-z0-9])*([0-9OolI]{2})"
                        value="([N]$1)-([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([^ ]+) ?([0-9OolI]{2})-([0-9OolI]{6})-([0-9OolI]{2})"
                        value="($1) ([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <findLineMatch src="dlNumStr" dst="dlNum"
                        regex="([^ ]+) ?([0-9OolI]{2})(?: |[^A-Za-z0-9])*([0-9OolI]{6})(?: |[^A-Za-z0-9])*([0-9OolI]{2})"
                        value="($1) ([N]$2)-([N]$3)-([N]$4)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="dlNum" reason="DocumentNotExpected"/>
                    <assignField src="dlNum" field="DriverLicenseNumber" mask="-4"/>

                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?- ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?[^A-Za-z0-9]* ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <replaceIfValid dst="docNum" content=" " replace=""/>
                    <replaceIfValid dst="DoB" content=" " replace=""/>
                    <rejectIfNotValid src="docNum" reason="DocumentNotExpected"/>
                    <assignField src="docNum" field="DocumentNumber" mask="-6"/>

                    <matchIfValid src="sexStr" dst="sex" regex="([02468])" value="F" overwrite="false"/>
                    <matchIfValid src="sexStr" dst="sex" regex="([13579])" value="M" overwrite="false"/>
                    <assignField src="sex" field="Gender"/>

                    <assignIfValid dst="fullN" src="docNum" offset="-1" overwrite="false"/>
                    <assignIfValid dst="fullN" src="dlNum" offset="+1" overwrite="false"/>
                    <findLineInside dst="fullN" overwrite="false"
                        x="0.350" y="0.245" w="0.650" h="0.130"
                    />
                    <rejectIfNotValid src="fullN"/>
                    <matchIfValid src="fullN" dst="fullN"
                        regex="(.{3})[,.:;-A-Za-z0-9]*$"
                        value="($1)"
                    />
                    <assignField src="fullN" field="FullName"/>

                    <findLineMatch src="dorStr" dst="DoR" overwrite="false"
                        regex="([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9]).?$"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoR" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoR" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoR" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoR"/>
                    <assignField src="DoR" field="DateOfRenewal"/>

                    <findLineMatch src="doeStr" dst="DoE"
                        regex="([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9]).?$"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoE" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoE" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoE" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <findLineMatch src="doiStr" dst="DoI"
                        regex="^([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9])"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="address" src="docNum" offset="+1" overwrite="false"/>
                    <assignIfValid dst="address2" src="docNum" offset="+2" overwrite="false"/>
                    <assignIfValid dst="address3" src="docNum" offset="+3" overwrite="false"/>
                    <assignIfValid dst="address" src="DoR" offset="-3" overwrite="false"/>
                    <assignIfValid dst="address2" src="DoR" offset="-2" overwrite="false"/>
                    <assignIfValid dst="address3" src="DoR" offset="-1" overwrite="false"/>
                    <concatenateIfValid dst="address" src="address2" prefix=" " suffix=""/>
                    <concatenateIfValid dst="address" src="address3" prefix=" " suffix=""/>
                    <assignField src="address" field="Address"/>

                    <matchIfValid src="address" dst="cityStr"
                        regex="([^ ]*)[시사]"
                        value="($1)시"
                    />
                    <assignFromList dst="city" src="cityStr" threshold="1"
                        list="서울특별시,부산광역시,대구광역시,인천광역시,광주광역시,대전광역시,울산광역시,세종특별자치시,수원시,성남시,의정부시,안양시,부천시,광명시,평택시,동두천시,안산시,고양시,과천시,구리시,남양주시,오산시,시흥시,군포시,의왕시,하남시,용인시,파주시,이천시,안성시,김포시,화성시,광주시,양주시,포천시,여주시,춘천시,원주시,강릉시,동해시,태백시,속초시,삼척시,청주시,충주시,제천시,천안시,공주시,보령시,아산시,서산시,논산시,계룡시,당진시,전주시,군산시,익산시,정읍시,남원시,김제시,목포시,여수시,순천시,나주시,광양시,포항시,경주시,김천시,안동시,구미시,영주시,영천시,상주시,문경시,경산시,창원시,진주시,통영시,사천시,김해시,밀양시,거제시,양산시,제주시,서귀포시"
                    />
                    <assignField src="city" field="City"/>

                    <matchIfValid src="address" dst="districtStr"
                        regex="([^ ]*)[구쿠꾸]"
                        value="($1)구"
                    />
                    <assignFromList dst="district" src="districtStr" threshold="1"
                        list="장안구,권선구,팔달구,영통구,수정구,중원구,분당구,만안구,동안구,상록구,단원구,덕양구,일산동구,일산서구,처인구,기흥구,수지구,상당구,서원구,흥덕구,청원구,동남구,서북구,완산구,덕진구,남구,북구,의창구,성산구,마산합포구,마산회원구,진해구,종로구,중구,용산구,성동구,광진구,동대문구,중랑구,성북구,강북구,도봉구,노원구,은평구,서대문구,마포구,양천구,강서구,구로구,금천구,영등포구,동작구,관악구,서초구,강남구,송파구,강동구,서구,동구,영도구,부산진구,동래구,해운대구,사하구,금정구,연제구,수영구,사상구,수성구,달서구,미추홀구,연수구,남동구,부평구,계양구,광산구,유성구,대덕구"
                    />
                    <assignField src="district" field="District"/>

                    <matchIfValid src="address" dst="townStr"
                        regex="([^ ]*)[군쿤꾼]"
                        value="($1)군"
                    />
                    <assignFromList dst="town" src="townStr" threshold="1"
                        list="연천군,가평군,양평군,홍천군,횡성군,영월군,평창군,정선군,철원군,화천군,양구군,인제군,고성군,양양군,보은군,옥천군,영동군,증평군,진천군,괴산군,음성군,단양군,금산군,부여군,서천군,청양군,홍성군,예산군,태안군,완주군,진안군,무주군,장수군,임실군,순창군,고창군,부안군,담양군,곡성군,구례군,고흥군,보성군,화순군,장흥군,강진군,해남군,영암군,무안군,함평군,영광군,장성군,완도군,진도군,신안군,군위군,의성군,청송군,영양군,영덕군,청도군,고령군,성주군,칠곡군,예천군,봉화군,울진군,울릉군,의령군,함안군,창녕군,남해군,하동군,산청군,함양군,거창군,합천군,달성군,강화군,옹진군,울주군,기장군"
                    />
                    <assignField src="town" field="Town"/>

                    <matchIfValid src="address" dst="provinceStr"
                        regex="([^ ]*)[도됴툐]"
                        value="($1)도"
                    />
                    <assignFromList dst="province" src="provinceStr" threshold="1"
                        list="경기도,강원도,충청북도,충청남도,전라북도,전라남도,경상북도,경상남도,제주특별자치도"
                    />
                    <assignField src="province" field="Province"/>

                    <replaceIfValid dst="address" content="$cityStr" replace="$city"/>
                    <replaceIfValid dst="address" content="$districtStr" replace="$district"/>
                    <replaceIfValid dst="address" content="$townStr" replace="$town"/>
                    <replaceIfValid dst="address" content="$provinceStr" replace="$province"/>

                </ML-KR>

            </Front>
        </Version>

        <Version id="FC" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML-KR cols="1" split_by="elements" separation="0.20" space_separation="0.15">
                    
                    <findLineContent dst="idStrKor" content="외국인등록증" threshold="2" overwrite="false"/>
                    <findLineContent dst="idStrKor" content="영주증" threshold="1" overwrite="false"/>
                    <rejectIfNotValid src="idStrKor" reason="DocumentNotExpected"/>
                    <findLineContent dst="idStr" content="ALIEN@REGISTRATION@CARD" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="idStr" content="PERMANENT@RESIDENT@CARD" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid src="idStr" reason="DocumentNotExpected"/>

                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?- ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <findLineMatchMultiple src="docNumStr"
                        regex="((?:[0-9OolI] ?){2})([0-1OolI] ?[0-9OolI]) ?([0-3OolI] ?[0-9OolI]) ?[^A-Za-z0-9]* ?([0-9OolI]) ?((?:[0-9OolI] ?){6})"
                        overwrite="false"
                        dst1="docNum"
                        value1="([N]$1)([N]$2)([N]$3)-([N]$4)([N]$5)"
                        dst2="DoB"
                        value2="([N]$3)/([N]$2)/([YP]$1)"
                        dst3="sexStr"
                        value3="([N]$4)"
                    />
                    <replaceIfValid dst="docNum" content=" " replace=""/>
                    <rejectIfNotValid src="docNum" reason="DocumentNotExpected"/>
                    <assignField src="docNum" field="DocumentNumber" mask="-6"/>

                    <replaceIfValid dst="DoB" content=" " replace=""/>
                    <assignField src="DoB" field="DateOfBirth"/>

                    <matchIfValid src="sexStr" dst="sex" regex="([02468])" value="F" overwrite="false"/>
                    <matchIfValid src="sexStr" dst="sex" regex="([13579])" value="M" overwrite="false"/>
                    <assignField src="sex" field="Gender"/>

                    <findLineMatch src="doiStr" dst="DoI"
                        regex="([1-2][0-9]{3})(?: |[^A-Za-z0-9])*([0-1]?[0-9])(?: |[^A-Za-z0-9])*([0-3]?[0-9])"
                        value="($3)/($2)/($1)"
                    />
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{2})/([0-9]{4})" value="0($1)/($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{2})/([0-9]{1})/([0-9]{4})" value="($1)/0($2)/($3)"/>
                    <matchIfValid dst="DoI" regex="^([0-9]{1})/([0-9]{1})/([0-9]{4})" value="0($1)/0($2)/($3)"/>
                    <rejectIfNotValid src="DoI"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                    <assignIfValid dst="fullN" src="doiStr" offset="-3" overwrite="false"/>
                    <matchIfValid src="fullN" dst="fullName"
                        regex="성 ?명 ?([A-Z \.,]+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <matchIfValid src="fullN" dst="fullName"
                        regex="([A-Z \.,]+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="fullName"/>
                    <assignField src="fullName" field="FullName"/>

                    <assignIfValid dst="natStr" src="doiStr" offset="-2" overwrite="false"/>
                    <matchIfValid src="natStr" dst="nat"
                        regex="([A-Z \.,]+)$"
                        value="($1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="nat"/>
                    <assignField src="nat" field="Nationality"/>

                </ML-KR>

            </Front>
        </Version>
    </DocumentID>

    <DocumentID id="VN" iso="VNM">
        <Version id="v2" type="TD1" document_type="IDC">
            <Front>
                <FACE/>
                <ML cols="1" split_by="elements" c_separation="2" space_separation="0.05">
                    
                    <!-- Read Marks -->
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="mrk1" content="CỘNG@HÒA@XÃ@HỘI@CHỦ@NGHĨA@VIỆT@NAM" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk2" content="Độc@lập@@@Tự@do@@@Hạnh@phúc" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk3" content="CHỨNG@MINH@NHÂN@DÂN" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid2 src="mrk1" src2="mrk2" reason="DocumentNotExpected"/>
                    <rejectIfNotValid src="mrk3" reason="DocumentNotExpected"/>

                    <!-- Read DocumentNumber -->
                    <findLineMatch src="docStr" dst="doc"
                        regex="([0-9OolI]{12})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="doc" reason="DocumentNotExpected"/>
                    <assignField src="doc" field="DocumentNumber"/>

                    <!-- Read Name -->
                    <findLineContent dst="nameStr" content="Họ@và@tên@khai@sinh#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nameStr" content="Họ@và@tên#" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid src="nameStr"/>
                    <assignIfValid dst="name" src="nameStr" offset="+1"/>
                    <assignField src="name" field="FullName"/>

                    <!-- Read Other names -->
                    <findLineContent dst="name2Str" content="Ho@và@tên@gọi@khác#" threshold="0.3" overwrite="false"/>

                    <!-- Read Date of birth -->
                    <findLineContent dst="dobStr" content="Ngày@@tháng@@năm@sinh#" threshold="0.3" overwrite="false"/>
                    <replaceIfValid dst="dobStr" content=" " replace=""/>
                    <matchIfValid src="dobStr" dst="DoB" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch src="dobStr" dst="DoB" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>
                    
                    <!-- Read gender -->
                    <findLineContent dst="sexStr" content="Giới@tinh#" threshold="0.3" overwrite="false"/>
                    <jumpIfNotValid src="sexStr" dst="noSex"/>
                    <replaceIfValid dst="sexStr" content="Giới" replace="" threshold="0.3"/>
                    <replaceIfValid dst="sexStr" content="tinh" replace="" threshold="0.3"/>
                    <replaceIfValid dst="sexStr" content=":" replace=""/>
                    <replaceIfValid dst="sexStr" content="." replace=""/>
                    <label src="noSex"/>
                    <findLineContent dst="sexStr" content="Nam" threshold="1" overwrite="false"/>
                    <findLineContent dst="sexStr" content="Nữ" threshold="1" overwrite="false"/>
                    <assignIfContent src="sexStr" dst="gender" value="M"
                        op="distance" param="Nam" param_2="1"
                        overwrite="false"
                    />
                    <assignIfContent src="sexStr" dst="gender" value="F"
                        op="distance" param="Nữ" param_2="1"
                        overwrite="false"
                    />
                    <!-- <rejectIfNotValid src="gender"/> -->
                    <assignField src="gender" field="Gender"/>

                    <!-- Read Ethnicity -->
                    <findLineContent dst="ethnicStr" content="Dân@tộc#" threshold="0.3" overwrite="false"/>
                    <jumpIfNotValid src="ethnicStr" dst="noEthnicity"/>
                    <replaceIfValid dst="ethnicStr" content="Dân" replace="" threshold="0.3"/>
                    <replaceIfValid dst="ethnicStr" content="tộc" replace="" threshold="0.3"/>
                    <replaceIfValid dst="ethnicStr" content=":" replace=""/>
                    <replaceIfValid dst="ethnicStr" content="." replace=""/>
                    <assignField src="ethnicStr" field="Ethnicity"/>
                    <label src="noEthnicity"/>

                    <!-- Read Secondary marks -->
                    <findLineContent dst="PoB" content="Quê@quán#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="addr" content="Nơi@thưởng@trú#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nat" content="Quốc@tịch#" threshold="0.3" overwrite="false"/>

                    <!-- Read Place of birth -->
                    <jumpIfNotValid src="PoB" dst="noPlaceOfBirth"/>
                    <replaceIfValid dst="PoB" content="Quê" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content="quán" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <replaceIfValid dst="PoB" content="." replace=""/>
                    <assignIfValid dst="PoB2" src="PoB" offset="+1"/>
                    <concatenateIfValid dst="PoB" src="PoB2" prefix=" " suffix=""/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <label src="noPlaceOfBirth"/>

                    <!-- Read Date of expiry -->
                    <findLineContent dst="doeStr" content="Có@giá@trị@đến#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="doeStr" content="Có@giá@đến#" threshold="0.3" overwrite="false"/>
                    <replaceIfValid dst="doeStr" content=" " replace=""/>
                    <matchIfValid src="doeStr" dst="DoE" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <!-- Read address -->
                    <jumpIfNotValid src="addr" dst="noAddress"/>
                    <replaceIfValid dst="addr" content="Nơi" replace="" threshold="0.3"/>
                    <replaceIfValid dst="addr" content="thưởng" replace="" threshold="0.3"/>
                    <replaceIfValid dst="addr" content="trú" replace="" threshold="0.3"/>
                    <replaceIfValid dst="addr" content=":" replace=""/>
                    <replaceIfValid dst="addr" content="." replace=""/>
                    <assignIfValid dst="addr2" src="addr" offset="+1"/>
                    <concatenateIfValid dst="addr" src="addr2" prefix=" " suffix=""/>
                    <assignField src="addr" field="Address"/>
                    <label src="noAddress"/>

                    <!-- Read nationality -->
                    <jumpIfNotValid src="nat" dst="noNationality"/>
                    <replaceIfValid dst="nat" content="Quốc" replace="" threshold="0.3"/>
                    <replaceIfValid dst="nat" content="tịch" replace="" threshold="0.3"/>
                    <replaceIfValid dst="nat" content=":" replace=""/>
                    <replaceIfValid dst="nat" content="." replace=""/>
                    <assignField src="nat" field="Nationality"/>
                    <label src="noNationality"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>
                <ML cols="1" split_by="elements" c_separation="2" space_separation="0.05">

                    <findLineContent dst="caracStr" content="Đặc@điểm@nhân@dạng#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="fatherStr" content="Họ@và@tên@cha#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="motherStr" content="Họ@và@tên@mẹ#" threshold="0.3" overwrite="false"/>
                    
                    <rejectIfNotValid src="caracStr" reason="DocumentNotExpected"/>

                    <jumpIfNotValid src="fatherStr" dst="noFather"/>
                    <replaceIfValid dst="fatherStr" content="Họ" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content="và" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content="tên" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content="cha" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content=":" replace=""/>
                    <replaceIfValid dst="fatherStr" content="." replace=""/>
                    <assignField src="fatherStr" field="FatherName"/>
                    <label src="noFather"/>

                    <jumpIfNotValid src="motherStr" dst="noMother"/>
                    <replaceIfValid dst="motherStr" content="Họ" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content="và" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content="tên" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content="mẹ" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content=":" replace=""/>
                    <replaceIfValid dst="motherStr" content="." replace=""/>
                    <assignField src="motherStr" field="MotherName"/>
                    <label src="noMother"/>

                    <jumpIfNotValid src="caracStr" dst="noFeatures"/>
                    <replaceIfValid dst="caracStr" content="Đặc" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="điểm" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="nhân" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="dạng:" replace="" threshold="1"/>
                    <assignIfValid dst="caracStr2" src="caracStr" offset="+1"/>
                    <concatenateIfValid dst="caracStr" src="caracStr2" prefix=" " suffix=""/>
                    <assignField src="caracStr" field="Features"/>
                    <label src="noFeatures"/>

                    <findLineMatch dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])[^0-9]+(0[1-9]|1[0-2])[^0-9]+(1[8-9][0-9]{2}|2[0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <jumpIfValid src="DoI" dst="DoI_found"/>

                    <findLineMatch dst="dDoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])"
                        value="($1)"
                    />
                    <findLineMatch dst="mDoI" overwrite="false"
                        regex="(0[1-9]|1[0-2])"
                        value="($1)"
                    />
                    <findLineMatch dst="yDoI" overwrite="false"
                        regex="(1[8-9][0-9]{2}|2[0-9]{3})"
                        value="($1)"
                    />
                    <assignIfValid dst="strDoI" src="dDoI"/>
                    <concatenateIfValid dst="strDoI" src="mDoI" prefix="/" suffix=""/>
                    <concatenateIfValid dst="strDoI" src="yDoI" prefix="/" suffix=""/>
                    <matchIfValid str="strDoI" dst="DoI" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <!-- <rejectIfNotValid src="DoI"/> -->
                    <label src="DoI_found"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                </ML>
            </Back>
        </Version>

        <Version id="v3" type="TD1" document_type="IDC" priority="PDF417,BARCODE,ML,MRZ,OCR,INPUT">
            <Front>
                <FACE/>

                <BARCODE types="QRCODE" decode="splitBy:|" charset="UTF-8" optional="yes">
                    <field id="DocumentNumber"      data="0"/>
                    <field id="Data1"               data="1"/>
                    <field id="FullName"            data="2"/>
                    <field id="DoBCompact"          data="3"/>
                    <field id="Gender_Vietnamese"   data="4"/>
                    <field id="Address"             data="5"/>
                    <field id="DoICompact"          data="6"/>
                </BARCODE>

                <ML cols="1" split_by="elements" c_separation="5" space_separation="0.05">
                    
                    <!-- Read Marks -->
                    <findLineMatch src="mrzStr" dst="mrzMark" regex="(.*[&lt;«]\s?[&lt;«].*)" value="($1)"/>
                    <matchIfValid src="mrzStr" dst="mrzPresent" regex="(.{15,})" value="($1)"/>
                    <rejectIfValid src="mrzPresent" reason="DocumentNotExpected"/>

                    <findLineContent dst="mrk1" content="CỘNG@HÒA@XÃ@HỘI@CHỦ@NGHĨA@VIỆT@NAM" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk2" content="Độc@lập@@@Tự@do@@@Hạnh@phúc" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk3" content="CĂN@CƯỚC@CÔNG@DÂN" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="mrk4" content="SOCIALIST@REPUBLIC@OF@VIET@NAM" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid2 src="mrk1" src2="mrk2" reason="DocumentNotExpected"/>
                    <rejectIfNotValid src="mrk3" reason="DocumentNotExpected"/>
                    <!-- <rejectIfNotValid src="mrk4"/> -->

                    <!-- Read DocumentNumber -->
                    <findLineMatch src="docStr" dst="doc"
                        regex="([0-9OolI]{12})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <rejectIfNotValid src="doc" reason="DocumentNotExpected"/>
                    <assignField src="doc" field="DocumentNumber"/>

                    <matchIfValid src="docStr" dst="addDoc"
                        regex="[0-9OolI]{3}([0-9OolI]{9})"
                        value="([N]$1)"
                        overwrite="false"
                    />
                    <assignField src="addDoc" field="DocumentAdditionalNumber"/>

                    <!-- Read Name -->
                    <findLineContent dst="nameStr" content="Họ@và@tên@/@Full@name#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nameStr" content="Họ@và@tên@khai@sinh#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nameStr" content="Họ@và@tên#" threshold="0.3" overwrite="false"/>
                    <rejectIfNotValid src="nameStr"/>
                    <assignIfValid dst="name" src="nameStr" offset="+1"/>
                    <assignField src="name" field="FullName"/>

                    <!-- Read Date of birth -->
                    <findLineContent dst="dobStr" content="Ngày@sinh@@@Date@of@Birth#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="dobStr" content="Ngày@@tháng@@năm@sinh#" threshold="0.3" overwrite="false"/>
                    <replaceIfValid dst="dobStr" content=" " replace=""/>
                    <matchIfValid src="dobStr" dst="DoB" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch src="dobStr" dst="DoB" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoB"/>
                    <assignField src="DoB" field="DateOfBirth"/>
                    
                    <!-- Read gender -->
                    <findLineContent dst="sexStr" content="Giới@tinh@@@Sex#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="sexStr" content="Giới@tinh#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="sexStr" content="Nam" threshold="1" overwrite="false"/>
                    <findLineContent dst="sexStr" content="Nữ" threshold="1" overwrite="false"/>
                    <assignIfContent src="sexStr" dst="gender" value="M"
                        op="contains" param="Nam"
                        overwrite="false"
                    />
                    <assignIfContent src="sexStr" dst="gender" value="F"
                        op="contains" param="Nữ"
                        overwrite="false"
                    />
                    <!-- <rejectIfNotValid src="gender"/> -->
                    <assignField src="gender" field="Gender"/>

                    <!-- Read Ethnicity -->
                    <findLineContent dst="ethnicStr" content="Dân@tộc#" threshold="0.3" overwrite="false"/>
                    <jumpIfNotValid src="ethnicStr" dst="noEthnicity"/>
                    <replaceIfValid dst="ethnicStr" content="Dân" replace="" threshold="0.3"/>
                    <replaceIfValid dst="ethnicStr" content="tộc" replace="" threshold="0.3"/>
                    <replaceIfValid dst="ethnicStr" content=":" replace=""/>
                    <replaceIfValid dst="ethnicStr" content="." replace=""/>
                    <assignField src="ethnicStr" field="Ethnicity"/>
                    <label src="noEthnicity"/>

                    <!-- Read Secondary marks -->
                    <findLineContent dst="PoB" content="Quê@quán@@@Place@of@origin#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="PoB" content="Quê@quán#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="addr" content="Nơi@thưởng@trú@@@Place@of@residence#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="addr" content="Nơi@thưởng@trú#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nat" content="Quốc@tịch@@@Nationality#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="nat" content="Quốc@tịch#" threshold="0.3" overwrite="false"/>

                    <!-- Read Place of birth -->
                    <jumpIfNotValid src="PoB" dst="noPlaceOfBirth"/>
                    <replaceIfValid dst="PoB" content="Quê" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content="quán" replace="" threshold="0.3"/>
                    <replaceIfValid dst="PoB" content=":" replace=""/>
                    <replaceIfValid dst="PoB" content="." replace=""/>
                    <replaceIfValid dst="PoB" content="/" replace=""/>
                    <replaceIfValid dst="PoB" content="Place" replace=""/>
                    <replaceIfValid dst="PoB" content="of" replace=""/>
                    <replaceIfValid dst="PoB" content="origin" replace=""/>
                    <assignIfValid dst="PoB2" src="PoB" offset="+1"/>
                    <concatenateIfValid dst="PoB" src="PoB2" prefix=" " suffix=""/>
                    <assignField src="PoB" field="PlaceOfBirth"/>
                    <label src="noPlaceOfBirth"/>

                    <!-- Read Date of expiry -->
                    <findLineContent dst="doeStr" content="Có@giá@trị@đến#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="doeStr" content="Có@giá@đến#" threshold="0.3" overwrite="false"/>
                    <replaceIfValid dst="doeStr" content=" " replace=""/>
                    <matchIfValid src="doeStr" dst="DoE" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <findLineMatch src="doeStr" dst="DoE" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <rejectIfNotValid src="DoE"/>
                    <assignField src="DoE" field="DateOfExpiry"/>

                    <!-- Read address -->
                    <jumpIfNotValid src="addr" dst="noAddress"/>
                    <replaceIfValid dst="addr" content="Nơi" replace="" threshold="0.3"/>
                    <replaceIfValid dst="addr" content="thưởng" replace="" threshold="0.3"/>
                    <replaceIfValid dst="addr" content="trú" replace="" threshold="0.3"/>
                    <replaceIfValid dst="addr" content=":" replace=""/>
                    <replaceIfValid dst="addr" content="." replace=""/>
                    <replaceIfValid dst="addr" content="/" replace=""/>
                    <replaceIfValid dst="addr" content="Place" replace=""/>
                    <replaceIfValid dst="addr" content="of" replace=""/>
                    <replaceIfValid dst="addr" content="residence" replace=""/>
                    <assignIfValid dst="addr2" src="addr" offset="+1"/>
                    <concatenateIfValid dst="addr" src="addr2" prefix=" " suffix=""/>
                    <assignField src="addr" field="Address"/>
                    <label src="noAddress"/>

                    <!-- Read nationality -->
                    <jumpIfNotValid src="nat" dst="noNationality"/>
                    <replaceIfValid dst="nat" content="Quốc" replace="" threshold="0.3"/>
                    <replaceIfValid dst="nat" content="tịch" replace="" threshold="0.3"/>
                    <replaceIfValid dst="nat" content=":" replace=""/>
                    <replaceIfValid dst="nat" content="." replace=""/>
                    <replaceIfValid dst="nat" content="/" replace=""/>
                    <replaceIfValid dst="nat" content="Nationality" replace=""/>
                    <assignField src="nat" field="Nationality"/>
                    <label src="noNationality"/>

                </ML>
            </Front>
            <Back>
                <OCR>
                    <region id="FullDocument" x="0.000" y="0.000" w="1.000" h="1.000"/>
                </OCR>

                <MRZ optional="yes">
                    <field id="DocumentCode"                line="1" starts="1" count="2"/>
                    <field id="Issuer"                      line="1" starts="3" count="3" regex="VNM"/>
                    <field id="DocumentAdditionalNumber"    line="1" starts="6" count="9"/>
                    <field id="DocumentNumber"              line="1" starts="16" count="12"/>
                    <field id="Opt1"                        line="1" starts="28" count="3"/>
                    <field id="DateOfBirth"                 line="2" starts="1" count="6"/>
                    <field id="Gender"                      line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"                line="2" starts="9" count="6"/>
                    <field id="Nationality"                 line="2" starts="16" count="3"/>
                    <field id="Opt2"                        line="2" starts="19" count="11"/>
                    <field id="FirstName"                   line="3" starts="1" count="??"/>
                    <field id="LastName"                    line="3" starts="??" count="30"/>

                    <field id="NfcKey"                      line="1" starts="6" count="9"/>
                </MRZ>

                <ML cols="1" split_by="elements" c_separation="2" space_separation="0.15">

                    <findLineContent dst="caracStr" content="Đặc@điểm@nhân@dạng@@@Personal@identification#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="caracStr" content="Đặc@điểm@nhân@dạng#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="fatherStr" content="Họ@và@tên@cha#" threshold="0.3" overwrite="false"/>
                    <findLineContent dst="motherStr" content="Họ@và@tên@mẹ#" threshold="0.3" overwrite="false"/>
                    
                    <rejectIfNotValid src="caracStr" reason="DocumentNotExpected"/>

                    <jumpIfNotValid src="fatherStr" dst="noFather"/>
                    <replaceIfValid dst="fatherStr" content="Họ" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content="và" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content="tên" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content="cha" replace="" threshold="1"/>
                    <replaceIfValid dst="fatherStr" content=":" replace=""/>
                    <replaceIfValid dst="fatherStr" content="." replace=""/>
                    <assignField src="fatherStr" field="FatherName"/>
                    <label src="noFather"/>

                    <jumpIfNotValid src="motherStr" dst="noMother"/>
                    <replaceIfValid dst="motherStr" content="Họ" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content="và" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content="tên" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content="mẹ" replace="" threshold="1"/>
                    <replaceIfValid dst="motherStr" content=":" replace=""/>
                    <replaceIfValid dst="motherStr" content="." replace=""/>
                    <assignField src="motherStr" field="MotherName"/>
                    <label src="noMother"/>

                    <jumpIfNotValid src="caracStr" dst="noFeatures"/>
                    <replaceIfValid dst="caracStr" content="Đặc" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="điểm" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="nhân" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="dạng:" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="Personal" replace="" threshold="1"/>
                    <replaceIfValid dst="caracStr" content="identification" replace="" threshold="1"/>
                    <assignIfValid dst="caracStr2" src="caracStr" offset="+1"/>
                    <concatenateIfValid dst="caracStr" src="caracStr2" prefix=" " suffix=""/>
                    <assignField src="caracStr" field="Features"/>
                    <label src="noFeatures"/>

                    <findLineMatch dst="DoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])[^0-9]+(0[1-9]|1[0-2])[^0-9]+(1[8-9][0-9]{2}|2[0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <jumpIfValid src="DoI" dst="DoI_found"/>

                    <findLineMatch dst="dDoI" overwrite="false"
                        regex="(0[1-9]|[1-2][0-9]|3[0-1])"
                        value="($1)"
                    />
                    <findLineMatch dst="mDoI" overwrite="false"
                        regex="(0[1-9]|1[0-2])"
                        value="($1)"
                    />
                    <findLineMatch dst="yDoI" overwrite="false"
                        regex="(1[8-9][0-9]{2}|2[0-9]{3})"
                        value="($1)"
                    />
                    <assignIfValid dst="strDoI" src="dDoI"/>
                    <concatenateIfValid dst="strDoI" src="mDoI" prefix="/" suffix=""/>
                    <concatenateIfValid dst="strDoI" src="yDoI" prefix="/" suffix=""/>
                    <matchIfValid str="strDoI" dst="DoI" overwrite="false"
                        regex="([0-3][0-9])(?: |[^A-Za-z0-9])*([0-1][0-9])(?: |[^A-Za-z0-9])*([1-2][0-9]{3})"
                        value="($1)/($2)/($3)"
                    />
                    <!-- <rejectIfNotValid src="DoI"/> -->
                    <label src="DoI_found"/>
                    <assignField src="DoI" field="DateOfIssue"/>

                </ML>
            </Back>
        </Version>

    </DocumentID>

    <DocumentID id="JO" iso="JOR">
        
        <Version id="PresetId" type="TD1" document_type="IDC">
            <Back>
                <BLINKID>
                    <ML>
                        <field id="IDCardNumber" move="DocumentNumber"/>                        
                    </ML>
                    <MRZ>
                        <field id="IDCardNumber" move="DocumentNumber"/>
                        <field id="DocumentNumber" move="Opt1"/>
                    </MRZ>
                </BLINKID>
            </Back>
        </Version>

    </DocumentID>

    <DocumentID id="ZA" iso="ZAF">

        <Version id="IDBook_v1" type="TD2" document_type="IDC" document_id="ZAF-00-IDC-1986-IBk-01-00">
            <Front>
              <ML cols="6" split_by="elements" c_separation="2" space_separation="0.15">
                <calculateOffset x="0.619" y="0.218" w="0.222" h="0.015" content="S@A@BURGER@S@A@CITIZEN" threshold="0.3"/>
                <findElementsIntersecting dst="var0" x="0.619" y="0.218" w="0.222" h="0.015"/>
                <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="S@A@BURGER@S@A@CITIZEN" param_2="0.3"/>
                <rejectIfNotValid reason="DocumentNotExpected" src="found0"/>
                
                <findElementsIntersecting dst="match_var1" x="0.578" y="0.127" w="0.358" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var1" regex="([0-9oOIlhBASsG]{6}) ?([0-9oOIlhBASsG]{4}) ?([0-9oOIlhBASsG]{2}) ?([0-9oOIlhBASsG])" value="([N]$1)([N]$2)([N]$3)([N]$4)" dst="var1"/>
                <rejectIfNotValid src="var1"/>
                <assignField src="var1" field="DocumentNumber"/>

                <findElementsIntersecting dst="match_var1_1" x="0.578" y="0.127" w="0.358" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var1_1" regex="[0-9oOIlhBASsG]{6} ?([0-4oOIlA])[0-9oOIlhBASsG]{3} ?[0-9oOIlhBASsG]{2} ?[0-9oOIlhBASsG]" value="F" dst="var1_1"/>
                <assignField src="var1_1" field="Gender"/>

                <findElementsIntersecting dst="match_var1_2" x="0.578" y="0.127" w="0.358" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var1_2" regex="[0-9oOIlhBASsG]{6} ?([5-9hBSsG])[0-9oOIlhBASsG]{3} ?[0-9oOIlhBASsG]{2} ?[0-9oOIlhBASsG]" value="M" dst="var1_2"/>
                <assignField src="var1_2" field="Gender"/>

                <calculateOffset x="0.542" y="0.259" w="0.097" h="0.017" content="VAN@SURNAME" threshold="0.3"/>
                <findElementsIntersecting dst="var3" x="0.544" y="0.297" w="0.375" h="0.007"/>
                <rejectIfNotValid src="var3"/>
                <assignField src="var3" field="LastName"/>
                
                <calculateOffset x="0.541" y="0.375" w="0.168" h="0.015" content="VOORNAME@FORENAMES" threshold="0.3"/>
                <findElementsIntersecting dst="var5" x="0.545" y="0.414" w="0.379" h="0.006"/>
                <rejectIfNotValid src="var5"/>
                <assignField src="var5" field="FirstName"/>
                
                <calculateOffset x="0.542" y="0.500" w="0.196" h="0.015" content="GEBOORTEDISTRIK@OF@LAND@" threshold="0.3"/>
                <findElementsIntersecting dst="var7" x="0.545" y="0.560" w="0.385" h="0.003"/>
                <assignField src="var7" field="Nationality"/>
                <calculateOffset x="0.735" y="0.654" w="0.122" h="0.016" content="DATUM@UITGEREIK" threshold="0.3"/>
                
                <findElementsIntersecting dst="match_var8" x="0.749" y="0.594" w="0.143" h="0.032"/>
                <matchIfValid overwrite="false" src="match_var8" regex="([0-9]{4})[^0-9]*([0-9]{2})[^0-9]*([0-9]{2})" value="($3)/($2)/($1)" dst="var8"/>
                <rejectIfNotValid src="var8"/>
                <assignField src="var8" field="DateOfBirth"/>
                
                <findElementsIntersecting dst="match_var10" x="0.749" y="0.705" w="0.150" h="0.034"/>
                <matchIfValid overwrite="false" src="match_var10" regex="([0-9]{4})[^0-9]*([0-9]{2})[^0-9]*([0-9]{2})" value="($3)/($2)/($1)" dst="var10"/>
                <rejectIfNotValid src="var10"/>
                <assignField src="var10" field="DateOfIssue"/>
              </ML>
              <FACE/>
              <BARCODE types="Code39" decode="splitBy:|" charset="UTF-8" optional="yes">
                <field id="DocumentNumber"            data="0"/>
            </BARCODE>
            </Front>
          </Version>

          <Version id="IDBook_v2" type="TD2" document_type="IDC" document_id="ZAF-00-IDC-1986-IBk-02-00">
            <Front>
              <ML cols="6" split_by="elements" c_separation="2" space_separation="0.15">
                <calculateOffset x="0.731" y="0.206" w="0.085" h="0.017" content="S@A@CITIZEN" threshold="0.3"/>
                <findElementsIntersecting dst="var0" x="0.731" y="0.206" w="0.085" h="0.017"/>
                <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="S@A@CITIZEN" param_2="0.3"/>
                <rejectIfNotValid reason="DocumentNotExpected" src="found0"/>
                
                <findElementsIntersecting dst="match_var1" x="0.618" y="0.112" w="0.358" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var1" regex="([0-9oOIlhBASsG]{6}) ?([0-9oOIlhBASsG]{4}) ?([0-9oOIlhBASsG]{3})" value="([N]$1)([N]$2)([N]$3)" dst="var1"/>
                <rejectIfNotValid src="var1"/>
                <assignField src="var1" field="DocumentNumber"/>

                <findElementsIntersecting dst="match_var1_1" x="0.618" y="0.112" w="0.358" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var1_1" regex="[0-9oOIlhBASsG]{6} ?([0-4oOIlA])[0-9oOIlhBASsG]{3} ?[0-9oOIlhBASsG]{2} ?[0-9oOIlhBASsG]" value="F" dst="var1_1"/>
                <assignField src="var1_1" field="Gender"/>

                <findElementsIntersecting dst="match_var1_2" x="0.618" y="0.112" w="0.358" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var1_2" regex="[0-9oOIlhBASsG]{6} ?([5-9hBSsG])[0-9oOIlhBASsG]{3} ?[0-9oOIlhBASsG]{2} ?[0-9oOIlhBASsG]" value="M" dst="var1_2"/>
                <assignField src="var1_2" field="Gender"/>

                <calculateOffset x="0.569" y="0.263" w="0.072" h="0.015" content="SURNAME" threshold="0.3"/>
                <findElementsIntersecting dst="var3" x="0.555" y="0.300" w="0.375" h="0.007"/>
                <rejectIfNotValid src="var3"/>
                <assignField src="var3" field="LastName"/>
                
                <calculateOffset x="0.568" y="0.381" w="0.094" h="0.017" content="FORENAMES" threshold="0.3"/>
                <findElementsIntersecting dst="var5" x="0.555" y="0.426" w="0.379" h="0.006"/>
                <rejectIfNotValid src="var5"/>
                <assignField src="var5" field="FirstName"/>
                
                <calculateOffset x="0.568" y="0.499" w="0.148" h="0.017" content="COUNTRY@OF@BIRTH" threshold="0.3"/>
                <findElementsIntersecting dst="var7" x="0.554" y="0.537" w="0.385" h="0.003"/>
                <rejectIfNotValid src="var7"/>
                <assignField src="var7" field="Nationality"/>
                
                <calculateOffset x="0.568" y="0.572" w="0.112" h="0.017" content="DATE@OF@BIRTH" threshold="0.3"/>
                <findElementsIntersecting dst="match_var9" x="0.558" y="0.611" w="0.190" h="0.006"/>
                <matchIfValid overwrite="false" src="match_var9" regex="([0-9]{4})[^0-9]*([0-9]{2})[^0-9]*([0-9]{2})" value="($3)/($2)/($1)" dst="var9"/>
                <rejectIfNotValid src="var9"/>
                <assignField src="var9" field="DateOfBirth"/>
                
                <calculateOffset x="0.813" y="0.676" w="0.099" h="0.018" content="DATE@ISSUED" threshold="0.3"/>
                <findElementsIntersecting dst="match_var11" x="0.764" y="0.714" w="0.188" h="0.008"/>
                <matchIfValid overwrite="false" src="match_var11" regex="([0-9]{4})[^0-9]*([0-9]{2})[^0-9]*([0-9]{2})" value="($3)/($2)/($1)" dst="var11"/>
                <rejectIfNotValid src="var11"/>
                <assignField src="var11" field="DateOfIssue"/>
              </ML>
              <FACE/>
              <BARCODE types="Code39" decode="splitBy:|" charset="UTF-8" optional="yes">
                <field id="DocumentNumber"            data="0"/>
              </BARCODE>
            </Front>
          </Version>

        <Version id="IDCard_v1" type="TD1" document_type="IDC" document_id="ZAF-00-IDC-1997-000-01-00">
            <Front>
                <FACE/>
                <ML>
                    <calculateOffset x="0.274" y="0.075" w="0.635" h="0.055" content="REPUBLIC@OF@SOUTH@AFRICA" threshold="0.3"/>
                    <findElementsIntersecting dst="var0" x="0.274" y="0.075" w="0.635" h="0.055"/>
                    <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="REPUBLIC@OF@SOUTH@AFRICA" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="found0"/>

                    <calculateOffset x="0.274" y="0.142" w="0.637" h="0.032" content="NATIONAL@IDENTITY@CARD" threshold="0.3"/>
                    <findElementsIntersecting dst="var1" x="0.274" y="0.142" w="0.637" h="0.032"/>
                    <assignIfContent overwrite="false" src="var1" dst="found1" value="Y" op="distance" param="NATIONAL@IDENTITY@CARD" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="found1"/>

                    <calculateOffset x="0.276" y="0.237" w="0.098" h="0.028" content="Surname" threshold="0.3"/>
                    <findElementsIntersecting dst="var3" x="0.265" y="0.291" w="0.372" h="0.007"/>
                    <rejectIfNotValid src="var3"/>
                    <assignField src="var3" field="LastName"/>

                    <calculateOffset x="0.275" y="0.323" w="0.077" h="0.028" content="Names" threshold="0.3"/>
                    <findElementsIntersecting dst="var5" x="0.267" y="0.376" w="0.370" h="0.006"/>
                    <rejectIfNotValid src="var5"/>
                    <assignField src="var5" field="FirstName"/>

                    <calculateOffset x="0.276" y="0.412" w="0.047" h="0.028" content="Sex#" threshold="0.3"/>
                    <findElementsIntersecting dst="var7" x="0.269" y="0.461" w="0.058" h="0.008"/>
                    <rejectIfNotValid src="var7"/>
                    <assignField src="var7" field="Gender"/>

                    <calculateOffset x="0.276" y="0.501" w="0.117" h="0.028" content="Nationality" threshold="0.3"/>

                    <calculateOffset x="0.275" y="0.588" w="0.179" h="0.028" content="Identity Number" threshold="0.3"/>
                    <findElementsIntersecting dst="var10" x="0.269" y="0.549" w="0.350" h="0.007"/>
                    <rejectIfNotValid src="var10"/>
                    <assignField src="var10" field="Nationality"/>

                    <findElementsIntersecting dst="var11" x="0.268" y="0.637" w="0.217" h="0.005"/>
                    <rejectIfNotValid src="var11"/>
                    <assignField src="var11" field="DocumentNumber"/>

                    <calculateOffset x="0.276" y="0.674" w="0.140" h="0.028" content="Date of Birth" threshold="0.3"/>
                    <findElementsIntersecting dst="match_var13" x="0.267" y="0.726" w="0.199" h="0.007"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(JAN) ?([1-2l][0-9oOl]{3})" value="([N]$1)/01/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(FEB) ?([1-2l][0-9oOl]{3})" value="([N]$1)/02/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(MAR) ?([1-2l][0-9oOl]{3})" value="([N]$1)/03/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(APR) ?([1-2l][0-9oOl]{3})" value="([N]$1)/04/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(MAY) ?([1-2l][0-9oOl]{3})" value="([N]$1)/05/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(JUN) ?([1-2l][0-9oOl]{3})" value="([N]$1)/06/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(JUL) ?([1-2l][0-9oOl]{3})" value="([N]$1)/07/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(AUG) ?([1-2l][0-9oOl]{3})" value="([N]$1)/08/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(SEP) ?([1-2l][0-9oOl]{3})" value="([N]$1)/09/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?([O0]CT) ?([1-2l][0-9oOl]{3})" value="([N]$1)/10/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(N[O0]V) ?([1-2l][0-9oOl]{3})" value="([N]$1)/11/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?(DEC) ?([1-2l][0-9oOl]{3})" value="([N]$1)/12/([N]$3)" dst="var13"/>
                    <matchIfValid overwrite="false" src="match_var13" regex="([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})" value="([N]$1)/([M]$2)/([N]$3)" dst="var13"/>
                    <rejectIfNotValid src="var13"/>
                    <assignField src="var13" field="DateOfBirth"/>

                    <calculateOffset x="0.276" y="0.763" w="0.175" h="0.028" content="Country of Birth" threshold="0.3"/>
                    <findElementsIntersecting dst="var15" x="0.267" y="0.812" w="0.350" h="0.007"/>
                    <rejectIfNotValid src="var15"/>
                    <assignField src="var15" field="CountryOfBirth"/>

                    <calculateOffset x="0.274" y="0.850" w="0.075" h="0.028" content="Status" threshold="0.3"/>
                    <findElementsIntersecting dst="var17" x="0.266" y="0.899" w="0.350" h="0.008"/>
                    <rejectIfNotValid src="var17"/>
                    <assignField src="var17" field="Status"/>
                </ML>
                <CROP>
                    <region id="Signature" x="0.666" y="0.762" w="0.330" h="0.234"/>
                </CROP>
            </Front>
            <Back>
                <ML>
                    <calculateOffset x="0.619" y="0.082" w="0.164" h="0.034" content="Date of Issue" threshold="0.3"/>
                    <findElementsIntersecting dst="var0" x="0.619" y="0.082" w="0.164" h="0.034"/>
                    <assignIfContent overwrite="false" src="var0" dst="found0" value="Y" op="distance" param="Date of Issue" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="found0"/>

                    <findElementsIntersecting dst="match_var1" x="0.601" y="0.149" w="0.247" h="0.007"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(JAN) ?([1-2l][0-9oOl]{3})" value="([N]$1)/01/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(FEB) ?([1-2l][0-9oOl]{3})" value="([N]$1)/02/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(MAR) ?([1-2l][0-9oOl]{3})" value="([N]$1)/03/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(APR) ?([1-2l][0-9oOl]{3})" value="([N]$1)/04/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(MAY) ?([1-2l][0-9oOl]{3})" value="([N]$1)/05/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(JUN) ?([1-2l][0-9oOl]{3})" value="([N]$1)/06/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(JUL) ?([1-2l][0-9oOl]{3})" value="([N]$1)/07/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(AUG) ?([1-2l][0-9oOl]{3})" value="([N]$1)/08/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(SEP) ?([1-2l][0-9oOl]{3})" value="([N]$1)/09/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?([O0]CT) ?([1-2l][0-9oOl]{3})" value="([N]$1)/10/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(N[O0]V) ?([1-2l][0-9oOl]{3})" value="([N]$1)/11/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?(DEC) ?([1-2l][0-9oOl]{3})" value="([N]$1)/12/([N]$3)" dst="var1"/>
                    <matchIfValid overwrite="false" src="match_var1" regex="([0-3oOl][0-9oOl]) ?([a-zA-Z0-9oOl]{3}) ?([1-2l][0-9oOl]{3})" value="([N]$1)/([M]$2)/([N]$3)" dst="var1"/>
                    <rejectIfNotValid src="var1"/>
                    <assignField src="var1" field="DateOfIssue"/>

                    <calculateOffset x="0.207" y="0.082" w="0.131" h="0.034" content="Conditions" threshold="0.3"/>
                    <findElementsIntersecting dst="var2" x="0.207" y="0.082" w="0.131" h="0.034"/>
                    <assignIfContent overwrite="false" src="var2" dst="found2" value="Y" op="distance" param="Conditions" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="found2"/>
                </ML>
                <PDF417 optional="yes" decode="splitBy:|">
                    <field id="LastName" data="0"/>
                    <field id="FirstName" data="1"/>
                    <field id="Gender" data="2"/>
                    <field id="Nationality" data="3"/>
                    <field id="DocumentNumber" data="4"/>
                    <field id="DateOfBirth" data="5"/>
                    <field id="CountryOfBirth" data="6"/>
                    <field id="Status" data="7"/>
                    <field id="DateOfIssue" data="8"/>
                    <field id="DocumentAdditionalNumber" data="9"/>
                    <field id="DocumentAdditionalNumber2" data="10"/>
                </PDF417>
            </Back>
        </Version>
              
    </DocumentID>

    <DocumentID id="UG" iso="UGA">
        <Version id="UGA_I_1" type="TD1" document_type="IDC" document_id="UGA-00-IDC-2015-000-01-00">
            <Front>
                <FACE/>
                <ML>
                    <!--Static mandatory field "[REPUBLIC@OF@UGANDA]"-->
                    <calculateOffset x="0.322" y="0.074" w="0.561" h="0.060" content="REPUBLIC@OF@UGANDA" threshold="0.3"/>
                    <findElementsIntersecting dst="ml1_var0" x="0.322" y="0.074" w="0.561" h="0.060"/>
                    <assignIfContent overwrite="false" src="ml1_var0" dst="ml1_found0" value="Y" op="distance" param="REPUBLIC@OF@UGANDA" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="ml1_found0"/>
                    <!--Static mandatory field "[NATIONAL@ID@CARD]"-->
                    <calculateOffset x="0.416" y="0.164" w="0.392" h="0.050" content="NATIONAL@ID@CARD" threshold="0.3"/>
                    <findElementsIntersecting dst="ml1_var1" x="0.416" y="0.164" w="0.392" h="0.050"/>
                    <assignIfContent overwrite="false" src="ml1_var1" dst="ml1_found1" value="Y" op="distance" param="NATIONAL@ID@CARD" param_2="0.3"/>
                    <rejectIfNotValid reason="DocumentNotExpected" src="ml1_found1"/>
                    <!--Static optional field "[SURNAME]"-->
                    <calculateOffset x="0.328" y="0.296" w="0.083" h="0.023" content="SURNAME" threshold="0.3"/>
                    <!--Dynamic mandatory field "LastName"-->
                    <findElementsIntersecting dst="ml1_var7" x="0.337" y="0.356" w="0.453" h="0.001"/>
                    <rejectIfNotValid src="ml1_var7"/>
                    <assignField src="ml1_var7" field="LastName"/>
                    <!--Static optional field "[GIVEN@NAME]"-->
                    <calculateOffset x="0.330" y="0.406" w="0.104" h="0.019" content="GIVEN@NAME" threshold="0.3"/>
                    <!--Dynamic mandatory field "FirstName"-->
                    <findElementsIntersecting dst="ml1_var8" x="0.337" y="0.457" w="0.453" h="0.001"/>
                    <rejectIfNotValid src="ml1_var8"/>
                    <assignField src="ml1_var8" field="FirstName"/>
                    <!--Static optional field "[NATIONALITY]"-->
                    <calculateOffset x="0.328" y="0.508" w="0.112" h="0.021" content="NATIONALITY" threshold="0.3"/>
                    <!--Dynamic mandatory field "Nationality"-->
                    <findElementsIntersecting dst="ml1_var5" x="0.337" y="0.564" w="0.061" h="0.001"/>
                    <assignField src="ml1_var5" field="Nationality"/>
                    <!--Static optional field "[SEX]"-->
                    <calculateOffset x="0.507" y="0.508" w="0.032" h="0.025" content="SEX" threshold="0.3"/>
                    <!--Dynamic mandatory field "Gender"-->
                    <findElementsIntersecting dst="ml1_var9" x="0.516" y="0.561" w="0.017" h="0.001"/>
                    <assignField src="ml1_var9" field="Gender"/>
                    <!--Static optional field "[DATE@OF@BIRTH]"-->
                    <calculateOffset x="0.621" y="0.508" w="0.125" h="0.025" content="DATE@OF@BIRTH" threshold="0.3"/>
                    <!--Dynamic mandatory field "DateOfBirth"-->
                    <findElementsIntersecting dst="ml1_match_var11" x="0.628" y="0.561" w="0.133" h="0.001"/>
                    <matchIfValid overwrite="false" src="ml1_match_var11" regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})" value="([N]$1)/([N]$2)/([N]$3)" dst="ml1_var11"/>
                    <rejectIfNotValid src="ml1_var11"/>
                    <assignField src="ml1_var11" field="DateOfBirth"/>
                    <!--Static optional field "[CARD@NO#]"-->
                    <calculateOffset x="0.620" y="0.608" w="0.078" h="0.027" content="CARD@NO#" threshold="0.3"/>
                    <!--Dynamic mandatory field "IDCardNumber"-->
                    <findElementsIntersecting dst="ml1_match_var13" x="0.620" y="0.672" w="0.181" h="0.001"/>
                    <matchIfValid overwrite="false" src="ml1_match_var13" regex="([0-9]{9})" value="([N]$1)" dst="ml1_var13"/>
                    <rejectIfNotValid src="ml1_var13"/>
                    <assignField src="ml1_var13" field="IDCardNumber"/>
                    <!--Static optional field "[NIN]"-->
                    <calculateOffset x="0.330" y="0.613" w="0.029" h="0.023" content="NIN" threshold="0.3"/>
                    <!--Dynamic mandatory field "DocumentNumber"-->
                    <findElementsIntersecting dst="ml1_match_var16" x="0.337" y="0.665" w="0.233" h="0.001"/>
                    <matchIfValid overwrite="false" src="ml1_match_var16" regex="([A-Z]{2})([0-9]{7})([0-9A-Z]{5})" value="([U]$1)([N]$2)($3)" dst="ml1_var16"/>
                    <rejectIfNotValid src="ml1_var16"/>
                    <assignField src="ml1_var16" field="DocumentNumber"/>
                    <!--Static optional field "[DATE@OF@EXPIRY]"-->
                    <calculateOffset x="0.331" y="0.716" w="0.136" h="0.025" content="DATE@OF@EXPIRY" threshold="0.3"/>
                    <!--Dynamic mandatory field "DateOfExpiry"-->
                    <findElementsIntersecting dst="ml1_match_var17" x="0.337" y="0.773" w="0.130" h="0.001"/>
                    <matchIfValid overwrite="false" src="ml1_match_var17" regex="(0[1-9]|[1-2][0-9]|3[0-1])(?: |[^A-Za-z0-9])*(0[1-9]|1[0-2])(?: |[^A-Za-z0-9])*((?:1[8-9]|2[0-2])[0-9]{2})" value="([N]$1)/([N]$2)/([N]$3)" dst="ml1_var17"/>
                    <rejectIfNotValid src="ml1_var17"/>
                    <assignField src="ml1_var17" field="DateOfExpiry"/>
                    <!--Static optional field "[HOLDERS@SIGNATURE]"-->
                    <calculateOffset x="0.331" y="0.822" w="0.182" h="0.023" content="HOLDERS@SIGNATURE" threshold="0.3"/>
                </ML>
                <CROP>
                    <region id="Signature" x="0.361" y="0.859" w="0.204" h="0.123"/>
                </CROP>
            </Front>
            <Back>
                <MRZ>
                    <field id="DocumentCode"       line="1" starts="1" count="2"/>
                    <field id="Issuer"             line="1" starts="3" count="3" regex="UGA"/>
                    <field id="IDCardNumber"       line="1" starts="6" count="9"/>
                    <field id="DocumentNumber"     line="1" starts="16" count="15"/>
                    <field id="DateOfBirth"        line="2" starts="1" count="6"/>
                    <field id="Gender"             line="2" starts="8" count="1"/>
                    <field id="DateOfExpiry"       line="2" starts="9" count="6"/>
                    <field id="Nationality"        line="2" starts="16" count="3"/>
                    <field id="DateOfIssueYYMMDD"  line="2" starts="19" count="6"/>
                    <field id="Opt2"               line="2" starts="25" count="5"/>
                    <field id="LastName"           line="3" starts="1" count="??"/>
                    <field id="FirstName"          line="3" starts="??" count="30"/>

                    <field id="NfcKey"             line="1" starts="6" count="9"/>
                </MRZ>
                <ML>
                    <!--Static optional field "[RIGHT@THUMB]"-->
                    <calculateOffset x="0.068" y="0.033" w="0.138" h="0.027" content="RIGHT@THUMB" threshold="0.3"/>
                    <!--Static optional field "[VILLAGE#]"-->
                    <calculateOffset x="0.079" y="0.393" w="0.073" h="0.023" content="VILLAGE#" threshold="0.3"/>
                    <!--Dynamic optional field "Village"-->
                    <findElementsIntersecting dst="ml0_var4" x="0.201" y="0.411" w="0.5" h="0.001"/>
                    <assignField src="ml0_var4" field="Village"/>
                    <!--Static optional field "[PARISH#]"-->
                    <calculateOffset x="0.079" y="0.431" w="0.067" h="0.021" content="PARISH#" threshold="0.3"/>
                    <!--Dynamic optional field "Parish"-->
                    <findElementsIntersecting dst="ml0_var5" x="0.201" y="0.445" w="0.5" h="0.001"/>
                    <assignField src="ml0_var5" field="Parish"/>
                    <!--Static optional field "[S@@COUNTY#]"-->
                    <calculateOffset x="0.079" y="0.467" w="0.088" h="0.021" content="S@@COUNTY#" threshold="0.3"/>
                    <!--Dynamic optional field "SubCounty"-->
                    <findElementsIntersecting dst="ml0_var6" x="0.201" y="0.483" w="0.5" h="0.001"/>
                    <assignField src="ml0_var6" field="SubCounty"/>
                    <!--Static optional field "[COUNTY#]"-->
                    <calculateOffset x="0.079" y="0.501" w="0.072" h="0.025" content="COUNTY#" threshold="0.3"/>
                    <!--Dynamic optional field "County"-->
                    <findElementsIntersecting dst="ml0_var7" x="0.201" y="0.520" w="0.5" h="0.001"/>
                    <assignField src="ml0_var7" field="County"/>
                    <!--Static optional field "[DISTRICT#]"-->
                    <calculateOffset x="0.079" y="0.540" w="0.079" h="0.021" content="DISTRICT#" threshold="0.3"/>
                    <!--Dynamic optional field "District"-->
                    <findElementsIntersecting dst="ml0_var10" x="0.201" y="0.557" w="0.5" h="0.001"/>
                    <assignField src="ml0_var10" field="District"/>
                </ML>
            </Back>
        </Version>
    </DocumentID>


    <Supported
        Front="AL,AT,BE,BA,BG,HR,CY,CZ,EE,FI,FR,GE,DE,GR,HU,IT,XK,LV,LT,LU,MT,MD,ME,NL,PL,PT,RS,SK,SI,ES,SE,CH,UA,DZ,BH,BW,BF,CM,EG,GH,IQ,IL,JO,KE,KW,LB,MU,MA,NG,OM,QA,SA,SN,ZA,TR,AE,UG,AR,BS,BO,CL,CO,CR,DO,EC,SV,GT,HT,HN,MX,NI,PY,PE,PR,TT,UY,AM,AZ,BD,BN,CN,IN,KZ,KG,MY,MV,PK,PH,SG,KR,LK,TW,TH,VN,AU,CA,US,RO,RW,TN,PA,VE,KH,HK,ID"
        Back= "AL,AT,BE,BA,BG,HR,CY,CZ,EE,FI,FR,GE,DE,GR,HU,IT,XK,LV,LT,LU,MT,MD,ME,NL,PL,PT,RS,SK,SI,ES,SE,CH,UA,DZ,BH,BW,BF,CM,EG,GH,IQ,IL,JO,KE,KW,LB,MU,MA,NG,NG,OM,SA,SN,ZA,TR,AE,UG,AR,BO,CL,CO,CR,DO,EC,SV,GT,HT,HN,MX,NI,PY,PE,TT,UY,AM,AZ,BD,BN,CN,IN,KZ,KG,MY,MV,PK,SG,LK,TH,VN,CA,US"
    
        Exceptions-Front="AR,KR,VN"
        Exceptions-Back="AR,KR,VN,ES"
    />

</selphid-widget-conf>
